<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pre-screen party</title>
  <style>
    :root {
      color-scheme: light;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --card-bg: #ffffff;
      --primary: #1d4ed8;
      --text-strong: #0f172a;
      --text-muted: #475569;
      --border: #e2e8f0;
      --accent: #dbeafe;
    }
    body {
      margin: 0;
      padding: 16px;
      background: #ffffff;
      color: var(--text-strong);
      line-height: 1.7;
    }
    .doc-shell {
      max-width: 960px;
      margin: 0 auto;
    }
    h1 {
      font-size: 1.5rem;
      margin: 0 0 24px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 8px;
    }
    h2 {
      color: var(--primary);
      margin: 24px 0 12px;
      font-size: 1.1rem;
    }
    p { margin: 0 0 12px; }
    ul { padding-left: 20px; margin: 0 0 12px; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 12px 0;
      background: var(--card-bg);
      border: 1px solid var(--border);
    }
    table th,
    table td {
      border-bottom: 1px solid var(--border);
      padding: 8px;
      text-align: left;
    }
    table th {
      background: var(--accent);
      color: var(--primary);
      font-weight: 600;
    }
    table tr:last-child td {
      border-bottom: none;
    }
    .muted { color: var(--text-muted); font-size: 0.9rem; }
    a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
    }
    a:hover { text-decoration: underline; }
    .doc-section {
      margin-bottom: 24px;
      padding: 16px;
      background: var(--card-bg);
      border: 1px solid var(--border);
    }
    .doc-section + .doc-section { margin-top: 16px; }
    .doc-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--accent);
      color: var(--primary);
      padding: 2px 10px;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-bottom: 8px;
    }
    .llm-fallback-banner {
      padding: 8px 12px;
      margin-bottom: 16px;
      border-radius: 6px;
      background-color: #fefce8;
      color: #854d0e;
      border: 1px solid #fef9c3;
      font-size: 0.85rem;
    }
    .llm-fallback-badge {
      display: inline-block;
      padding: 4px 8px;
      margin-bottom: 12px;
      border-radius: 4px;
      background-color: #fff3cd;
      color: #856404;
      border: 1px solid #ffeeba;
      font-size: 0.9rem;
      font-weight: 600;
    }
    .llm-fallback-details {
      font-size: 0.8rem;
      color: #4b5563;
      margin-bottom: 16px;
      white-space: pre-wrap;
    }
    .llm-fallback-local-note {
      font-size: 0.8rem;
      color: #2563eb;
      margin-bottom: 16px;
    }
    .mermaid {
      margin: 16px 0;
      text-align: center;
    }
    details {
      margin: 12px 0;
    }
    details summary {
      cursor: pointer;
      font-weight: 600;
      color: var(--primary);
      padding: 8px;
      background: var(--accent);
      border-radius: 4px;
    }
    details summary:hover {
      background: #bfdbfe;
    }
    .dmn-table {
      margin: 16px 0;
      font-size: 0.9rem;
    }
    .dmn-table th {
      background: var(--primary);
      color: #fff;
      font-weight: 600;
    }
    .dmn-table td {
      vertical-align: top;
    }
    .dmn-input {
      background: #f0f9ff;
    }
    .dmn-output {
      background: #ecfdf5;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({ startOnLoad: true, theme: 'default' });
  </script>
</head>
<body>
  <div class="doc-shell">
    
    
    
    <div class="doc-badge">üìÑ Lokal version ‚Äì F√∂rb√§ttrat inneh√•ll</div>

    <section class="doc-section">
      <h1>Epic ‚Äì Pre-screen party</h1>
      <ul>
        <li><strong>Epic-namn:</strong> Pre-screen party</li>
        <li><strong>BPMN-fil:</strong> mortgage-se-internal-data-gathering.bpmn</li>
        <li><strong>Element ID:</strong> pre-screen-party</li>
        <li><strong>Nodtyp:</strong> businessRuleTask</li>
        <li><strong>Version:</strong> 1.0 (exempel) ‚Äì uppdateras vid √§ndring</li>
        <li><strong>√Ñgare:</strong> Produktteam Kredit / Arkitektur</li>
        <li><strong>Confluence:</strong> <a href="#confluence-link">#confluence-link</a></li>
      </ul>
    </section>

    <section class="doc-section">
      <h2>Syfte & V√§rde</h2>
      <p class="muted">Beskrivning av epikens syfte och aff√§rsv√§rde.</p>
      <div class="card">
        <p>Pre-screen party √§r en DMN-beslutsregel (businessRuleTask) som g√∂r en initial eligibility check tidigt i kreditresan f√∂r att bed√∂ma om en kund eller medpart √§r l√§mplig att g√• vidare med ans√∂kan. Regeln analyserar grundl√§ggande interna uppgifter som √•lder, kreditscore, och anst√§llningsstatus innan mer resurskr√§vande kontroller genomf√∂rs. Syftet √§r att s√• tidigt som m√∂jligt sortera bort uppenbart ol√§mpliga eller blockerade parter och prioritera de √§renden d√§r f√∂rdjupad kreditpr√∂vning √§r motiverad. Regeln omfattar inte fullst√§ndig kreditpr√∂vning eller externa upplysningar som hanteras i senare steg.</p>
      </div>
    </section>

    <section class="doc-section">
      <h2>Processkontext</h2>
      <p class="muted">Var epicen befinner sig i Application-processen.</p>
      <div class="card">
        <p>Epiken <strong>pre-screen-party</strong> √§r en del av <strong>internal-data-gathering</strong> subprocessen i <strong>mortgage-se-application</strong> processen. Den k√∂rs efter <strong>fetch-party-information</strong> och anv√§nder h√§mtad partinformation f√∂r att g√∂ra en initial eligibility check. Resultatet avg√∂r om processen kan forts√§tta till <strong>fetch-engagements</strong> (om approved) eller om processen avslutas med "Pre-screening rejected" (om not approved).</p>
        
        <details>
          <summary>Application Process Flow</summary>
          <div class="mermaid">
flowchart TD
    Start[Application Start]
    InternalData[internal-data-gathering<br/>subprocess]
    Gateway1[Parallel Gateway]
    Household[household<br/>subprocess]
    Stakeholders[stakeholders<br/>subprocess]
    Object[object<br/>subprocess]
    Gateway2[Parallel Gateway]
    Confirm[confirm-application]
    End[Application End]
    
    Start --> InternalData
    InternalData --> Gateway1
    Gateway1 -->|Parallel| Household
    Gateway1 -->|Parallel| Stakeholders
    Stakeholders --> Object
    Household --> Gateway2
    Stakeholders --> Gateway2
    Object --> Gateway2
    Gateway2 -->|All complete| Confirm
    Confirm --> End
    
    style InternalData fill:#1d4ed8,color:#fff
    style PreScreen fill:#f59e0b,color:#fff
          </div>
          <p class="muted">Application Process Flow visar √∂vergripande fl√∂de: Application startar ‚Üí internal-data-gathering ‚Üí parallellt household och stakeholders ‚Üí object ‚Üí confirm-application.</p>
        </details>
        
        <details>
          <summary>Internal Data Gathering Subprocess Flow</summary>
          <div class="mermaid">
flowchart LR
    Start[Start Event]
    FetchParty[fetch-party-information<br/>serviceTask]
    PreScreen[pre-screen-party<br/>businessRuleTask]
    Gateway{is-approved<br/>Gateway}
    FetchEngagements[fetch-engagements<br/>serviceTask]
    End[End Event]
    Rejected[Pre-screening<br/>rejected]
    
    Start --> FetchParty
    FetchParty --> PreScreen
    PreScreen --> Gateway
    Gateway -->|Yes| FetchEngagements
    Gateway -->|No| Rejected
    FetchEngagements --> End
    
    style FetchParty fill:#3b82f6,color:#fff
    style PreScreen fill:#f59e0b,color:#fff
    style FetchEngagements fill:#3b82f6,color:#fff
    style Gateway fill:#fbbf24,color:#000
    style Rejected fill:#ef4444,color:#fff
          </div>
          <p class="muted">Internal Data Gathering Subprocess Flow visar: fetch-party-information ‚Üí pre-screen-party ‚Üí gateway (is-approved) ‚Üí fetch-engagements (om approved) eller rejected (om not approved).</p>
        </details>
        
        <h3>F√∂reg√•ende steg</h3>
        <ul>
          <li><strong>fetch-party-information:</strong> M√•ste vara slutf√∂rd f√∂r att partinformation ska vara tillg√§nglig f√∂r eligibility check</li>
        </ul>
        
        <h3>Efterf√∂ljande steg</h3>
        <ul>
          <li><strong>Gateway "is-approved":</strong> Anv√§nder resultatet fr√•n pre-screen-party f√∂r att avg√∂ra om processen ska forts√§tta</li>
          <li><strong>fetch-engagements:</strong> K√∂rs om gateway returnerar "Yes" (is-approved-yes)</li>
          <li><strong>Pre-screening rejected:</strong> Processen avslutas om gateway returnerar "No" (is-approved-no)</li>
        </ul>
      </div>
    </section>

    <section class="doc-section">
      <h2>Anv√§ndarupplevelse</h2>
      <p class="muted">Beskrivning av anv√§ndarupplevelsen f√∂r b√•de s√∂kande (kund) och anst√§lld (r√•dgivare/admin).</p>
      
      <h3>S√∂kande (Kund)</h3>
      <div class="card">
        <ul>
          <li><strong>Vad ser anv√§ndaren:</strong> Detta √§r en automatisk bakgrundsprocess (DMN businessRuleTask) som k√∂rs utan direkt anv√§ndarinteraktion. Kunden ser ingen direkt UI, men resultatet p√•verkar vilka steg som kan forts√§tta i ans√∂kningsprocessen. Om ans√∂kan stoppas (REJECTED) f√•r kunden ett meddelande om att ans√∂kan inte kan forts√§tta.</li>
          <li><strong>Steg:</strong> 
            <ul>
              <li>Processen k√∂rs automatiskt efter att partinformation har h√§mtats</li><li>Kunden forts√§tter med ans√∂kningsprocessen medan bed√∂mningen g√∂rs i bakgrunden</li><li>Resultatet p√•verkar om kunden kan forts√§tta eller om ans√∂kan stoppas</li><li>Vid REJECTED f√•r kunden information om varf√∂r ans√∂kan stoppades</li>
            </ul>
          </li>
          <li><strong>Interaktioner:</strong> Ingen direkt anv√§ndarinteraktion ‚Äì automatisk systemprocess. Kunden kan se status i ans√∂knings√∂versikten.</li>
          <li><strong>Design:</strong> N/A ‚Äì backend-process</li>
          
        </ul>
      </div>
      
      <h3>Anst√§lld (R√•dgivare/Admin)</h3>
      <div class="card">
        <ul>
          <li><strong>Vad ser anv√§ndaren:</strong> Handl√§ggare kan se resultatet av pre-screen i systemloggar eller admin-gr√§nssnitt. Resultatet (APPROVED/REJECTED/REVIEW) visas i ans√∂knings√∂versikten tillsammans med motivering och eventuella flaggor.</li>
          <li><strong>Steg:</strong> 
            <ul>
              <li>Systemet k√∂r pre-screen automatiskt n√§r partinformation √§r tillg√§nglig</li><li>Handl√§ggare ser resultatet i ans√∂knings√∂versikten</li><li>Vid REJECTED eller REVIEW kan handl√§ggare se motivering och vidta √•tg√§rder</li><li>Handl√§ggare kan √∂verskriva beslutet vid behov (med r√§tt beh√∂righet)</li>
            </ul>
          </li>
          <li><strong>Interaktioner:</strong> Granska pre-screen-resultat, Se motivering, √ñverskriv beslut (vid behov), Flagga f√∂r manuell granskning</li>
          <li><strong>Design:</strong> <a href="#figma-link">[L√§nk till Figma-design]</a></li>
          
        </ul>
      </div>
    </section>

    <section class="doc-section">
      <h2>Funktionellt fl√∂de</h2>
      <p class="muted">Steg-f√∂r-steg beskrivning av processen.</p>
      <div class="card">
        <ol>
          <li>Epiken triggas automatiskt n√§r fetch-party-information har slutf√∂rts och partinformation √§r tillg√§nglig.</li><li>DMN-motorn l√§ser in relevanta indata: √•lder, kreditscore (om tillg√§nglig), anst√§llningsstatus, och eventuella interna flaggor eller sp√§rrar.</li><li>DMN-regeln utv√§rderar indata mot beslutslogik och aff√§rsregler f√∂r initial eligibility check.</li><li>Regeln returnerar ett beslut: APPROVED (kan forts√§tta), REJECTED (stoppas), eller REVIEW (kr√§ver manuell granskning).</li><li>Resultatet sparas i processens datastore tillsammans med motivering och eventuella flaggor.</li><li>Beroende p√• resultat forts√§tter processen: APPROVED ‚Üí fetch-engagements, REJECTED ‚Üí avslutas med fel, REVIEW ‚Üí flaggas f√∂r manuell granskning.</li>
        </ol>
        <p><strong>Beslutslogik:</strong> Epiken √§r en businessRuleTask (DMN) som anv√§nder beslutslogik f√∂r att utv√§rdera eligibility. Gateway "is-approved" anv√§nder resultatet fr√•n pre-screen f√∂r att avg√∂ra om processen ska forts√§tta (Yes) eller stoppas (No). Beslutslogiken baseras p√• √•lder (t.ex. 21-75 √•r), kreditscore (t.ex. minimum 600), och anst√§llningsstatus (aktiv anst√§llning).</p>
        <p><strong>Felhantering:</strong> Om obligatoriska indata saknas eller DMN-motorn inte kan k√∂ras loggas felet och processen flaggas f√∂r manuell granskning. Om DMN-motorn returnerar fel eller timeout uppst√•r loggas detta och processen kan avbrytas eller skickas till felhantering. Alla beslut loggas f√∂r sp√•rbarhet och efterkontroll.</p>
        <p><strong>Edge cases:</strong> Kunder utan kreditscore (kan kr√§va manuell bed√∂mning), kunder med ofullst√§ndig anst√§llningsinformation, kunder med interna sp√§rrar eller varningar, nya kunder utan historik, kunder med √§ndrad anst√§llningsstatus under processen, gr√§nsfall d√§r beslut kan vara oklart (REVIEW).</p>
      </div>
      
      <details>
        <summary>Sekvensdiagram - Initial Eligibility Check</summary>
        <div class="mermaid">
sequenceDiagram
    participant Camunda as BPMN Engine<br/>(Camunda)
    participant Service as Eligibility Service<br/>Pre-screen Party
    participant DMN as DMN Decision Engine
    participant PartStore as Part Data Store
    participant CoreBanking as Core Banking System
    participant AppDB as Application DB
    
    Note over Camunda: Triggas efter<br/>fetch-party-information
    Camunda->>Service: Exekvera pre-screen-party
    
    Service->>PartStore: H√§mta partinformation<br/>(√•lder, kreditscore,<br/>anst√§llningsstatus)
    PartStore-->>Service: Partinformation
    
    Service->>CoreBanking: H√§mta interna sp√§rrar<br/>och varningar
    CoreBanking-->>Service: Interna sp√§rrar/varningar
    
    Service->>Service: Validera indata<br/>(format, obligatoriska f√§lt)
    
    Service->>DMN: Utv√§rdera eligibility<br/>(√•lder, kreditscore,<br/>anst√§llningsstatus, sp√§rrar)
    DMN->>DMN: Applicera beslutslogik<br/>(DMN Decision Table)
    DMN-->>Service: Beslut (APPROVED/REJECTED/REVIEW)<br/>+ Motivering
    
    Service->>AppDB: Spara beslut + motivering<br/>+ metadata
    AppDB-->>Service: Bekr√§ftelse
    
    Service->>Camunda: Resultat (APPROVED/REJECTED/REVIEW)
    
    alt APPROVED
        Camunda->>Camunda: Gateway: is-approved = Yes
        Camunda->>Camunda: Forts√§tt till<br/>fetch-engagements
    else REJECTED
        Camunda->>Camunda: Gateway: is-approved = No
        Camunda->>Camunda: Avsluta processen
    else REVIEW
        Camunda->>Camunda: Flagga f√∂r manuell granskning
        Camunda->>Camunda: Pausa processen
    end
        </div>
        <p class="muted">Sekvensdiagram visar tidslinje f√∂r interaktioner: BPMN Engine triggar Eligibility Service, som h√§mtar data fr√•n Part Data Store och Core Banking System, validerar indata, anropar DMN Decision Engine f√∂r beslutslogik, sparar beslut, och gateway avg√∂r om processen forts√§tter, avslutas, eller flaggas f√∂r manuell granskning.</p>
      </details>
    </section>

    <section class="doc-section">
      <h2>Inputs & Datak√§llor</h2>
      <p class="muted">Beskrivning av inputs och datak√§llor (interna och externa).</p>
      
      <h3>Inputs</h3>
      <p class="muted">Data som epiken tar emot fr√•n f√∂reg√•ende steg eller anv√§ndaren.</p>
      <table>
        <tr>
          <th>Input</th>
          <th>K√§lla</th>
          <th>Typ</th>
          <th>Obligatoriskt</th>
          <th>Beskrivning</th>
        </tr>
        
        <tr>
          <td>Partinformation (personnummer, √•lder)</td>
          <td>Fetch party information (serviceTask)</td>
          <td>PartyInformation</td>
          <td>Ja</td>
          <td>Grundl√§ggande partinformation inklusive personnummer och √•lder f√∂r eligibility check</td>
        </tr>
        <tr>
          <td>Kreditscore (om tillg√§nglig)</td>
          <td>Interna system eller tidigare kreditupplysning</td>
          <td>Number</td>
          <td>Nej</td>
          <td>Kundens kreditscore f√∂r initial bed√∂mning. Kan saknas f√∂r nya kunder.</td>
        </tr>
        <tr>
          <td>Anst√§llningsstatus</td>
          <td>Partinformation eller ans√∂kningsdata</td>
          <td>EmploymentStatus</td>
          <td>Ja</td>
          <td>Kundens nuvarande anst√§llningsstatus (aktiv anst√§llning, egenf√∂retagare, pension√§r, etc.)</td>
        </tr>
        <tr>
          <td>Interna flaggor och sp√§rrar</td>
          <td>Core banking system, IS-Part</td>
          <td>InternalFlags</td>
          <td>Nej</td>
          <td>Eventuella interna varningar, sp√§rrar, eller observanda som kan p√•verka eligibility</td>
        </tr>
      </table>

      <h3>Datak√§llor</h3>
      <p class="muted">System och k√§llor som epiken h√§mtar data fr√•n.</p>
      
      
      <h4>Interna datak√§llor (bankens system)</h4>
      <ul>
        <li><strong>Part Data Store:</strong> Partinformation fr√•n fetch-party-information, inklusive personnummer och √•lder</li>
        <li><strong>Core Banking System:</strong> Interna flaggor, sp√§rrar, och observanda f√∂r kunden</li>
        <li><strong>Credit History (om tillg√§nglig):</strong> Tidigare kreditupplysningar eller interna kreditscore</li>
      </ul>
      

      
      <h4>Externa APIs</h4>
      <ul>
        <li>Inga externa APIs i detta steg ‚Äì all data h√§mtas fr√•n interna system. Externa kreditupplysningar g√∂rs i senare steg.</li>
      </ul>
      

      
      <h4>Databaser</h4>
      <ul>
        <li><strong>Application DB:</strong> Ans√∂kningsdata och processkontext</li>
        <li><strong>DMN Decision Table:</strong> Beslutslogik f√∂r eligibility check lagras i DMN-modell</li>
      </ul>
      

      
    </section>

    

    <section class="doc-section">
      <h2>Outputs</h2>
      <p class="muted">Data som skapas, uppdateras eller skickas vidare.</p>
      <table>
        <tr>
          <th>Output</th>
          <th>Mottagare</th>
          <th>Typ</th>
          <th>Beskrivning</th>
        </tr>
        
        <tr>
          <td>Pre-screen resultat (APPROVED/REJECTED/REVIEW)</td>
          <td>Gateway "is-approved", efterf√∂ljande steg</td>
          <td>PreScreenResult</td>
          <td>Beslut fr√•n DMN-regeln: APPROVED (kan forts√§tta), REJECTED (stoppas), eller REVIEW (kr√§ver manuell granskning)</td>
        </tr>
        <tr>
          <td>Motivering och flaggor</td>
          <td>Processkontext, loggsystem</td>
          <td>PreScreenReasoning</td>
          <td>Motivering f√∂r beslutet, eventuella flaggor, och information om vilka kriterier som p√•verkade beslutet</td>
        </tr>
        <tr>
          <td>Validerad eligibility status</td>
          <td>Efterf√∂ljande steg</td>
          <td>EligibilityStatus</td>
          <td>Status som anv√§nds av gateway "is-approved" f√∂r att avg√∂ra om processen ska forts√§tta eller stoppas</td>
        </tr>
      </table>
    </section>

    
    <section class="doc-section">
      <h2>Arkitektur & Systeminteraktioner</h2>
      <p class="muted">Beskrivning av systemarkitektur, integrationer och teknisk stack.</p>
      <div class="card">
        <ul>
          
          
          
          <li><strong>System som interagerar:</strong>
            <ul>
              <li><strong>DMN Decision Engine:</strong> Camunda DMN eller liknande f√∂r att k√∂ra beslutslogik</li>
              <li><strong>Part Data Store:</strong> Lagrar partinformation fr√•n fetch-party-information</li>
              <li><strong>Core Banking System:</strong> F√∂r interna flaggor och sp√§rrar</li>
              <li><strong>Application DB:</strong> PostgreSQL-databas f√∂r ans√∂kningsdata och processkontext</li>
            </ul>
          </li>
          
          <li><strong>Integrationer:</strong>
            <ul>
              <li><strong>API-integrationer:</strong> REST API f√∂r att k√∂ra DMN-beslutsregel. API:et exponerar endpoint /api/dmn/pre-screen-party som tar indata (√•lder, kreditscore, anst√§llningsstatus) och returnerar beslut (APPROVED/REJECTED/REVIEW).</li>
              <li><strong>Event-integrationer:</strong> Processen triggas n√§r fetch-party-information √§r slutf√∂rd. Vid beslut publiceras event f√∂r att trigga gateway "is-approved".</li>
              <li><strong>Databas-integrationer:</strong> PostgreSQL f√∂r ans√∂kningsdata. DMN-beslutslogik lagras i DMN-modell och kan uppdateras utan kod√§ndringar.</li>
            </ul>
          </li>
          
          <li><strong>Teknisk stack:</strong>
            <ul>
              <li>BPMN-processmotor (Camunda) f√∂r orkestrering</li>
              <li>DMN Decision Engine f√∂r beslutslogik</li>
              <li>REST API f√∂r DMN-anrop</li>
              <li>PostgreSQL f√∂r datalagring</li>
            </ul>
          </li>
          
          <li><strong>Arkitekturdiagram:</strong>
            <details>
              <summary>C4 System Context Diagram</summary>
              <div class="mermaid">
graph TB
    Customer[üë§ Customer<br/>Kund]
    Handler[üë§ Handler<br/>Handl√§ggare]
    
    Epic[Pre-screen Party<br/>businessRuleTask / DMN]
    
    PartStore[(Part Data Store<br/>Partinformation)]
    CoreBanking[Core Banking System<br/>Interna sp√§rrar]
    AppDB[(Application DB<br/>PostgreSQL)]
    
    Customer -.->|Triggar via<br/>ans√∂kan| Epic
    Handler -.->|Granskar<br/>beslut| Epic
    
    Epic -->|L√§ser| PartStore
    Epic -->|L√§ser| CoreBanking
    Epic -->|L√§ser/Sparar<br/>ans√∂kningsdata| AppDB
    Epic -->|Sparar<br/>beslut| AppDB
    
    style Epic fill:#1d4ed8,color:#fff
    style PartStore fill:#10b981,color:#fff
    style CoreBanking fill:#3b82f6,color:#fff
    style AppDB fill:#10b981,color:#fff
              </div>
              <p class="muted">System Context Diagram visar epic i centrum med interna system (Part Data Store, Core Banking System, Application DB) och anv√§ndare (Customer, Handler).</p>
            </details>
            
            <details>
              <summary>Komponentdiagram</summary>
              <div class="mermaid">
graph TB
    BPMN[BPMN Engine<br/>Camunda]
    EligibilityService[Eligibility Service<br/>Pre-screen Party]
    DMNEngine[DMN Decision Engine<br/>Eligibility Check]
    PartStore[Part Data Store<br/>Partinformation]
    CoreBankingClient[Core Banking Client<br/>Interna sp√§rrar]
    
    BPMN -->|Orkestrerar| EligibilityService
    EligibilityService -->|Anv√§nder| DMNEngine
    EligibilityService -->|L√§ser| PartStore
    EligibilityService -->|L√§ser| CoreBankingClient
    EligibilityService -->|Sparar beslut| AppDB[(Application DB)]
    
    DMNEngine -->|Utv√§rderar| EligibilityService
    CoreBankingClient -->|L√§ser| CoreBanking[Core Banking System]
    
    style BPMN fill:#1d4ed8,color:#fff
    style EligibilityService fill:#3b82f6,color:#fff
    style DMNEngine fill:#8b5cf6,color:#fff
    style PartStore fill:#10b981,color:#fff
    style CoreBankingClient fill:#60a5fa,color:#fff
              </div>
              <p class="muted">Komponentdiagram visar huvudkomponenter: BPMN Engine orkestrerar Eligibility Service, som anv√§nder DMN Decision Engine f√∂r beslutslogik, l√§ser data fr√•n Part Data Store och Core Banking System, och sparar beslut i Application DB.</p>
            </details>
          </li>
          
        </ul>
      </div>
    </section>
    

    

    <section class="doc-section">
      <h2>Aff√§rsregler & Beroenden</h2>
      <p class="muted">Beskrivning av aff√§rsregler, kreditregler och beroenden.</p>
      <div class="card">
        <h3>Aff√§rsregler</h3>
        <ul>
          <li><strong>DMN-beslutslogik:</strong> Regeln implementeras som DMN (Decision Model and Notation) beslutsregel med beslutslogik baserad p√• √•lder, kreditscore, och anst√§llningsstatus. Beslutslogiken kan uppdateras utan kod√§ndringar.</li>
          <li><strong>Eligibility-kriterier:</strong> Grundl√§ggande kriterier f√∂r eligibility: √•lder (t.ex. 21-75 √•r), kreditscore (t.ex. minimum 600 om tillg√§nglig), aktiv anst√§llningsstatus eller egenf√∂retagare med dokumenterad inkomst.</li>
          <li><strong>Interna sp√§rrar:</strong> Kunder med aktiva interna sp√§rrar eller varningar ska stoppas (REJECTED) eller flaggas f√∂r manuell granskning (REVIEW) enligt g√§llande rutin.</li>
          <li><strong>Policykrav:</strong> Policykrav f√∂r risk, skulds√§ttning och produktvillkor ska vara sp√•rbara via kopplade regler. Regeln omfattar inte fullst√§ndig kreditpr√∂vning som hanteras i senare steg.</li>
          <li><strong>AML/KYC:</strong> Eventuella AML/KYC-krav hanteras i samverkan med dedikerade kontrollnoder. Pre-screen fokuserar p√• grundl√§ggande eligibility, inte compliance-kontroller.</li>
        </ul>
        
        <h3>DMN Decision Table</h3>
        <p class="muted">Beslutslogik f√∂r initial eligibility check baserat p√• √•lder, kreditscore, anst√§llningsstatus, och interna sp√§rrar.</p>
        <table class="dmn-table">
          <tr>
            <th colspan="4" class="dmn-input">Input</th>
            <th colspan="2" class="dmn-output">Output</th>
          </tr>
          <tr>
            <th>√Ölder<br/>(√•r)</th>
            <th>Kreditscore</th>
            <th>Anst√§llnings-<br/>status</th>
            <th>Interna<br/>sp√§rrar</th>
            <th>Beslut</th>
            <th>Motivering</th>
          </tr>
          <tr>
            <td>21-75</td>
            <td>‚â• 600</td>
            <td>Aktiv/Egenf√∂retagare</td>
            <td>Inga</td>
            <td><strong>APPROVED</strong></td>
            <td>Alla kriterier uppfyllda. Etablerad kund utan interna sp√§rrar.</td>
          </tr>
          <tr>
            <td>21-75</td>
            <td>‚â• 600</td>
            <td>Aktiv/Egenf√∂retagare</td>
            <td>Aktiv sp√§rr</td>
            <td><strong>REJECTED</strong></td>
            <td>Aktiv intern sp√§rr stoppar vidare handl√§ggning.</td>
          </tr>
          <tr>
            <td>21-75</td>
            <td>‚â• 600</td>
            <td>Aktiv/Egenf√∂retagare</td>
            <td>Varning/Observanda</td>
            <td><strong>REVIEW</strong></td>
            <td>Intern varning kr√§ver manuell pr√∂vning.</td>
          </tr>
          <tr>
            <td>&lt; 21</td>
            <td>‚â• 600</td>
            <td>Aktiv/Egenf√∂retagare</td>
            <td>Inga</td>
            <td><strong>REJECTED</strong></td>
            <td>F√∂r l√•g √•lder. Minimum √•lder √§r 21 √•r.</td>
          </tr>
          <tr>
            <td>21-75</td>
            <td>&lt; 600</td>
            <td>Aktiv/Egenf√∂retagare</td>
            <td>Inga</td>
            <td><strong>REJECTED</strong></td>
            <td>F√∂r l√•g kreditscore. Minimum kreditscore √§r 600.</td>
          </tr>
          <tr>
            <td>21-75</td>
            <td>‚â• 600</td>
            <td>Arbetsl√∂s</td>
            <td>Inga</td>
            <td><strong>REJECTED</strong></td>
            <td>Arbetsl√∂s. Aktiv anst√§llning eller egenf√∂retagare kr√§vs.</td>
          </tr>
          <tr>
            <td>20-22</td>
            <td>595-605</td>
            <td>Aktiv/Egenf√∂retagare</td>
            <td>Inga</td>
            <td><strong>REVIEW</strong></td>
            <td>Gr√§nsfall. Kr√§ver manuell bed√∂mning.</td>
          </tr>
          <tr>
            <td>21-75</td>
            <td>Saknas</td>
            <td>Aktiv/Egenf√∂retagare</td>
            <td>Inga</td>
            <td><strong>REVIEW</strong></td>
            <td>Ofullst√§ndig intern databild. Kr√§ver manuell utredning.</td>
          </tr>
        </table>
        <p class="muted"><strong>Hit Policy:</strong> FIRST (f√∂rsta matchande regel anv√§nds)</p>
        
        <h3>Tr√∂skelv√§rden och Prioritering</h3>
        <table>
          <tr>
            <th>Kriterium</th>
            <th>Tr√∂skelv√§rde</th>
            <th>Prioritering</th>
            <th>Beskrivning</th>
          </tr>
          <tr>
            <td>√Ölder</td>
            <td>21-75 √•r</td>
            <td>H√∂g</td>
            <td>Kunder under 21 √•r eller √∂ver 75 √•r avvisas automatiskt</td>
          </tr>
          <tr>
            <td>Kreditscore</td>
            <td>Minimum 600 (om tillg√§nglig)</td>
            <td>H√∂g</td>
            <td>Kunder med kreditscore under 600 avvisas automatiskt. Om kreditscore saknas kan kr√§va manuell bed√∂mning.</td>
          </tr>
          <tr>
            <td>Anst√§llningsstatus</td>
            <td>Aktiv anst√§llning eller egenf√∂retagare</td>
            <td>Kritisk</td>
            <td>Arbetsl√∂sa kunder avvisas automatiskt oavsett andra kriterier</td>
          </tr>
          <tr>
            <td>Interna sp√§rrar</td>
            <td>Inga aktiva sp√§rrar</td>
            <td>Kritisk</td>
            <td>Kunder med aktiva interna sp√§rrar avvisas automatiskt oavsett andra kriterier</td>
          </tr>
          <tr>
            <td>Interna varningar</td>
            <td>Inga varningar</td>
            <td>H√∂g</td>
            <td>Kunder med interna varningar eller observanda flaggas f√∂r manuell granskning (REVIEW)</td>
          </tr>
          <tr>
            <td>√Ölder (gr√§nsv√§rden)</td>
            <td>20-22 √•r</td>
            <td>Medium</td>
            <td>Kunder med √•lder 20-22 √•r kan kr√§va manuell granskning</td>
          </tr>
          <tr>
            <td>Kreditscore (gr√§nsv√§rden)</td>
            <td>595-605</td>
            <td>Medium</td>
            <td>Kunder med kreditscore 595-605 kan kr√§va manuell granskning</td>
          </tr>
        </table>
        
        <details>
          <summary>Regeltr√§d / Decision Tree</summary>
          <div class="mermaid">
flowchart TD
    Start[Pre-screen Party<br/>Initial Eligibility Check]
    
    CheckSparrar{Interna<br/>sp√§rrar?}
    CheckAge{√Ölder<br/>21-75 √•r?}
    CheckScore{Kreditscore<br/>‚â• 600?}
    CheckEmployment{Anst√§llnings-<br/>status?}
    
    Rejected1[REJECTED<br/>Aktiv intern sp√§rr]
    Rejected2[REJECTED<br/>F√∂r l√•g √•lder]
    Rejected3[REJECTED<br/>F√∂r l√•g kreditscore]
    Rejected4[REJECTED<br/>Arbetsl√∂s]
    
    Approved1[APPROVED<br/>Alla kriterier uppfyllda]
    Review1[REVIEW<br/>Intern varning, kr√§ver granskning]
    Review2[REVIEW<br/>Gr√§nsfall, kr√§ver bed√∂mning]
    Review3[REVIEW<br/>Ofullst√§ndig data]
    
    Start --> CheckSparrar
    CheckSparrar -->|Aktiv sp√§rr| Rejected1
    CheckSparrar -->|Varning/Observanda| Review1
    CheckSparrar -->|Inga| CheckAge
    CheckAge -->|Nej| Rejected2
    CheckAge -->|Ja| CheckScore
    CheckScore -->|Nej| Rejected3
    CheckScore -->|Saknas| Review3
    CheckScore -->|Ja| CheckEmployment
    CheckEmployment -->|Arbetsl√∂s| Rejected4
    CheckEmployment -->|Aktiv/Egenf√∂retagare| Approved1
    
    CheckAge -->|20-22 √•r| Review2
    CheckScore -->|595-605| Review2
    
    style Start fill:#1d4ed8,color:#fff
    style CheckSparrar fill:#fbbf24,color:#000
    style CheckAge fill:#fbbf24,color:#000
    style CheckScore fill:#fbbf24,color:#000
    style CheckEmployment fill:#fbbf24,color:#000
    style Rejected1 fill:#ef4444,color:#fff
    style Rejected2 fill:#ef4444,color:#fff
    style Rejected3 fill:#ef4444,color:#fff
    style Rejected4 fill:#ef4444,color:#fff
    style Approved1 fill:#10b981,color:#fff
    style Review1 fill:#f59e0b,color:#fff
    style Review2 fill:#f59e0b,color:#fff
    style Review3 fill:#f59e0b,color:#fff
          </div>
          <p class="muted">Regeltr√§d visar beslutslogik: F√∂rst kontrolleras interna sp√§rrar (kritisk), sedan √•lder, kreditscore, och anst√§llningsstatus. Varje steg kan leda till APPROVED, REJECTED, eller REVIEW.</p>
        </details>
      </div>
    </section>

    <section class="doc-section">
      <h2>Test Information</h2>
      <p class="muted">Beskrivning av testscenarier, testdata och testmilj√∂er.</p>
      <div class="card">
        <h3>Testscenarier</h3>
        <ul>
          <li><strong>BR1: Etablerad kund utan interna sp√§rrar:</strong> Kund med aktiv relation, stabil engagemangsbild, √•lder inom gr√§nser, god kreditscore, och inga interna varningar eller sp√§rrar. Regeln markerar kunden som prelimin√§rt godtagbar (APPROVED) och √§rendet g√•r vidare till fetch-engagements.</li>
          <li><strong>BR2: Intern varning kr√§ver manuell pr√∂vning:</strong> Kund med intern observanda, exempelvis tidigare avtalsbrott eller noteringar om betalningsproblem, men utan tydlig blockering. Regeln flaggar kunden f√∂r manuell granskning (REVIEW), och fortsatt handl√§ggning kr√§ver aktivt st√§llningstagande fr√•n beh√∂rig funktion.</li>
          <li><strong>BR3: Intern sp√§rr stoppar vidare handl√§ggning:</strong> Kund eller part med aktiv intern sp√§rr, exempelvis resultat av tidigare beslut eller s√§rskild riskklassificering. Regeln stoppar √§rendet (REJECTED) fr√•n att g√• vidare i den automatiska processen och rekommenderar avslag eller s√§rskild hantering enligt g√§llande rutin.</li>
          <li><strong>BR4: Ofullst√§ndig intern databild:</strong> Ny eller nyligen migrerad kund d√§r centrala interna uppgifter saknas eller inte kan l√§sas in korrekt. Regeln kan inte g√∂ra en s√§ker f√∂rhandsbed√∂mning, loggar avvikelsen och skickar √§rendet till manuell utredning (REVIEW) innan processen f√•r forts√§tta.</li>
          <li><strong>Edge case: Gr√§nsfall:</strong> Kund som ligger precis p√• gr√§nsen f√∂r eligibility-kriterier (t.ex. kreditscore 595-605, √•lder 20-22 √•r). Regeln kan returnera REVIEW f√∂r manuell bed√∂mning.</li>
        </ul>

        <h3>Testdata</h3>
        <ul>
          <li>Testkunder med olika √•ldrar: 18-20 √•r (f√∂r ung), 21-75 √•r (godk√§nd), 76+ √•r (f√∂r gammal)</li>
          <li>Olika kreditscore: < 600 (under gr√§ns), 600-700 (godk√§nd), > 700 (h√∂g), saknas (ny kund)</li>
          <li>Olika anst√§llningsstatus: aktiv anst√§llning, egenf√∂retagare, pension√§r, arbetsl√∂s, student</li>
          <li>Testdata f√∂r interna flaggor: inga flaggor, varningar, sp√§rrar</li>
          <li>Mock DMN-responser f√∂r olika scenarion (APPROVED, REJECTED, REVIEW)</li>
        </ul>

        <h3>Testmilj√∂er</h3>
        <ul>
          <li><strong>Local development:</strong> Mock DMN-engine med lokala testdata</li>
          <li><strong>Staging:</strong> Anslutning till staging-instans av DMN-engine</li>
          <li><strong>Integration test:</strong> Test mot isolerad testmilj√∂ med kontrollerade testdata</li>
        </ul>

        <h3>Automatiska tester</h3>
        <p>Scenarierna BR1‚ÄìBR4 ska mappas till automatiska tester d√§r scenario-ID och namn anv√§nds i testbeskrivningar. Testerna b√∂r t√§cka normalfl√∂de (APPROVED), edge cases (REVIEW), samt rejection (REJECTED). Tester ska verifiera att DMN-regeln returnerar korrekt beslut baserat p√• indata och att beslutet p√•verkar processfl√∂det korrekt.</p>
        
      </div>
    </section>

    <section class="doc-section">
      <h2>Felhantering & Edge Cases</h2>
      <p class="muted">Beskrivning av felhantering och edge cases.</p>
      
      <h3>Tekniska fel</h3>
      <div class="card">
        <ul>
          <li><strong>DMN Engine-fel:</strong> Om DMN-motorn inte kan k√∂ras (500 Server Error, timeout) ska systemet logga felet och flagga processen f√∂r manuell granskning. √ñverv√§g fallback-beslut (t.ex. REVIEW) vid tekniska fel f√∂r att undvika att processen stoppas helt.</li>
          <li><strong>DMN-modell saknas:</strong> Om DMN-modellen inte hittas (404 Not Found) ska systemet logga felet och flagga processen f√∂r manuell granskning. Detta kan h√§nda vid deployment eller modelluppdateringar.</li>
          <li><strong>Databasfel:</strong> Vid databasfel (connection timeout, deadlock) n√§r indata h√§mtas ska processen flaggas f√∂r manuell hantering och felet loggas med detaljerad information.</li>
        </ul>
      </div>
      
      <h3>Aff√§rsrelaterade fel</h3>
      <div class="card">
        <ul>
          <li><strong>Obligatoriska indata saknas:</strong> Om obligatoriska indata saknas (t.ex. √•lder, kreditscore) ska systemet logga felet och flagga processen f√∂r manuell granskning. Processen kan inte forts√§tta utan dessa data.</li>
          <li><strong>Ogiltiga indata:</strong> Om indata √§r ogiltiga (t.ex. negativ √•lder, kreditscore > 850) ska systemet validera och flagga f√∂r manuell verifiering med tydligt felmeddelande. Kunden kan beh√∂va kontakta banken f√∂r att korrigera informationen.</li>
          <li><strong>Ofullst√§ndig databild:</strong> Om centrala interna uppgifter saknas eller inte kan l√§sas in korrekt ska systemet logga avvikelsen och skicka √§rendet till manuell utredning (REVIEW) innan processen f√•r forts√§tta.</li>
        </ul>
      </div>
      
      <h3>Edge cases</h3>
      <div class="card">
        <ul>
          <li><strong>Gr√§nsfall:</strong> Kunder som ligger precis p√• gr√§nsen f√∂r eligibility-kriterier (t.ex. kreditscore 595-605, √•lder 20-22 √•r) kan returnera REVIEW f√∂r manuell bed√∂mning. Systemet ska hantera dessa gr√§nsfall korrekt och flagga f√∂r manuell granskning.</li>
          <li><strong>Nya kunder:</strong> Nya kunder utan historisk data (ingen kreditscore, ingen anst√§llningsstatus) kan kr√§va manuell bed√∂mning. Systemet ska identifiera detta scenario och returnera REVIEW.</li>
          <li><strong>Interna flaggor:</strong> Kunder med interna varningar eller observanda (men utan tydlig blockering) ska flaggas f√∂r manuell granskning (REVIEW). Systemet ska skilja mellan varningar och sp√§rrar.</li>
          <li><strong>Historiska data:</strong> Data fr√•n olika k√§llor kan vara inkonsistenta (t.ex. olika √•lder i olika system) och kr√§va manuell granskning. Systemet ska identifiera inkonsistenser och flagga f√∂r manuell verifiering.</li>
        </ul>
      </div>
      
      <h3>Retry-strategier</h3>
      <div class="card">
        <ul>
          <li><strong>DMN Engine:</strong> Retry med exponentiell backoff (1s, 2s, 4s) f√∂r tillf√§lliga fel (timeout, 503 Service Unavailable). Max 2 f√∂rs√∂k innan fallback-beslut (REVIEW) anv√§nds.</li>
          <li><strong>Fallback-beslut:</strong> Vid tekniska fel kan systemet anv√§nda fallback-beslut (REVIEW) f√∂r att undvika att processen stoppas helt. Detta ger manuell granskning m√∂jlighet att bed√∂ma kunden.</li>
        </ul>
      </div>
    </section>

    <section class="doc-section">
      <h2>Implementation Notes</h2>
      <p class="muted">Tekniska noteringar, k√§nda begr√§nsningar och framtida f√∂rb√§ttringar.</p>
      <div class="card">
        <ul>
          <li><strong>DMN-implementation:</strong> Prim√§ra API:er/tj√§nster: POST /api/dmn/pre-screen-party f√∂r exekvering. DMN-beslutslogik lagras i DMN-modell och kan uppdateras utan kod√§ndringar. √ñverv√§g versionering av DMN-modeller f√∂r sp√•rbarhet.</li>
          <li><strong>Loggning:</strong> Viktiga f√§lt och beslut b√∂r loggas f√∂r att m√∂jligg√∂ra fels√∂kning och efterkontroll. Logga: indata (√•lder, kreditscore, anst√§llningsstatus), beslut (APPROVED/REJECTED/REVIEW), motivering, och eventuella flaggor. Alla beslut ska vara sp√•rbara f√∂r compliance och efterkontroll.</li>
          <li><strong>Prestanda:</strong> DMN-beslut b√∂r vara snabba (< 1 sekund). Prestanda- och tillg√§nglighetskrav hanteras p√• plattformsniv√• men b√∂r beaktas i designen. √ñverv√§g caching av DMN-beslut om samma kund bed√∂ms flera g√•nger.</li>
          <li><strong>Datavalidering:</strong> Validera att indata matchar f√∂rv√§ntat format innan DMN-anrop. Verifiera att obligatoriska f√§lt finns med och att datatyper √§r korrekta. Validera √•lder (positivt tal, rimligt intervall), kreditscore (0-850 om tillg√§nglig).</li>
          <li><strong>Framtida f√∂rb√§ttringar:</strong> √ñverv√§g att inkludera fler kriterier i pre-screen (t.ex. inkomst, skulds√§ttning) f√∂r mer exakt bed√∂mning. St√∂d f√∂r olika produkter med olika eligibility-kriterier. Integration med machine learning f√∂r mer sofistikerad bed√∂mning.</li>
        </ul>
      </div>
    </section>

    <section class="doc-section">
      <h2>Relaterade noder</h2>
      <p class="muted">L√§nkar till relaterade epics, feature goals och business rules.</p>
      
      <details>
        <summary>Beroendediagram</summary>
        <div class="mermaid">
flowchart LR
    Previous[fetch-party-information<br/>serviceTask]
    Current[pre-screen-party<br/>businessRuleTask]
    Gateway{is-approved<br/>Gateway}
    Next[fetch-engagements<br/>serviceTask]
    End[Internal Data Gathering<br/>End]
    Rejected[Pre-screening<br/>rejected]
    
    Previous -->|Input till| Current
    Current --> Gateway
    Gateway -->|Yes| Next
    Gateway -->|No| Rejected
    Next --> End
    
    style Current fill:#f59e0b,color:#fff
    style Previous fill:#3b82f6,color:#fff
    style Next fill:#3b82f6,color:#fff
    style Gateway fill:#fbbf24,color:#000
    style Rejected fill:#ef4444,color:#fff
        </div>
        <p class="muted">Beroendediagram visar: fetch-party-information ‚Üí pre-screen-party ‚Üí gateway (is-approved) ‚Üí fetch-engagements (om Yes) eller rejected (om No).</p>
      </details>
      
      <h3>F√∂reg√•ende steg</h3>
      <ul>
        <li><strong>fetch-party-information:</strong> M√•ste vara slutf√∂rd f√∂r att partinformation ska vara tillg√§nglig f√∂r eligibility check</li>
      </ul>
      
      <h3>Efterf√∂ljande steg</h3>
      <ul>
        <li><strong>Gateway "is-approved":</strong> Anv√§nder resultatet fr√•n pre-screen-party f√∂r att avg√∂ra om processen ska forts√§tta</li>
        <li><strong>fetch-engagements:</strong> K√∂rs om gateway returnerar "Yes" (is-approved-yes)</li>
        <li><strong>Pre-screening rejected:</strong> Processen avslutas om gateway returnerar "No" (is-approved-no)</li>
      </ul>
      
      <h3>Parallella steg</h3>
      <ul>
        <li><strong>evaluate-personal-information:</strong> K√∂rs parallellt i stakeholder subprocessen (anv√§nder samma grundl√§ggande kriterier)</li>
      </ul>
      
      <h3>Business Rules</h3>
      <ul>
        <li><strong>DMN-modell:</strong> pre-screen-party.dmn inneh√•ller beslutslogik och aff√§rsregler. Regeln kan uppdateras utan kod√§ndringar genom att uppdatera DMN-modellen</li>
        <li><strong>Eligibility criteria:</strong> √Ölder, kreditscore, anst√§llningsstatus, interna sp√§rrar</li>
      </ul>
    </section>

    <section class="doc-section">
      <h2>BPMN ‚Äì Process (Bild)</h2>
      <p class="muted">Bild av BPMN-processen som epiken refererar till.</p>
      <div class="card">
        <p><strong>BPMN-diagram:</strong></p>
        <p><a href="#/bpmn/mortgage-se-internal-data-gathering.bpmn">Visa BPMN-processen</a></p>
        <p class="muted">[Beskrivning av BPMN-processen eller l√§nk till BPMN-viewer. Bilden ska visa noden och dess kontext i processen.]</p>
      </div>
    </section>

    <section class="doc-section">
      <h2>API Dokumentation</h2>
      <p class="muted">Beskrivning av API-endpoints som anv√§nds eller exponeras.</p>
      
      <h3>API-endpoints (exponerade)</h3>
      <table>
        <tr>
          <th>Endpoint</th>
          <th>Metod</th>
          <th>Request</th>
          <th>Response</th>
          <th>Felkoder</th>
        </tr>
        <tr>
          <td><code>/api/pre-screen-party</code></td>
          <td>POST</td>
          <td><code>{ "partyInformation": {...}, "√•lder": "number", "kreditscore": "number", "anst√§llningsstatus": "string", "applicationId": "uuid" }</code></td>
          <td><code>{ "beslut": "APPROVED" | "REJECTED" | "REVIEW", "motivering": "string", "status": "success" }</code></td>
          <td>400 (Bad Request), 500 (Server Error)</td>
        </tr>
      </table>
      
      <h3>DMN Decision Table</h3>
      <div class="card">
        <ul>
          <li><strong>DMN-fil:</strong> pre-screen-party.dmn</li>
          <li><strong>Besluts-ID:</strong> pre-screen-party</li>
          <li><strong>Hit Policy:</strong> FIRST (f√∂rsta matchande regel anv√§nds)</li>
          <li><strong>Inputs:</strong> √•lder, kreditscore, anst√§llningsstatus, interna sp√§rrar</li>
          <li><strong>Outputs:</strong> beslut (APPROVED/REJECTED/REVIEW), motivering</li>
        </ul>
      </div>
      
      <h3>Autentisering</h3>
      <div class="card">
        <ul>
          <li><strong>Exponerad endpoint:</strong> Kr√§ver OAuth 2.0 Bearer token i Authorization header</li>
          <li><strong>DMN Engine:</strong> Intern autentisering via API Gateway</li>
        </ul>
      </div>
      
      <h3>Felhantering</h3>
      <div class="card">
        <ul>
          <li><strong>400 Bad Request:</strong> Ogiltig input (t.ex. saknade obligatoriska f√§lt eller ogiltiga v√§rden)</li>
          <li><strong>500 Server Error:</strong> Internt serverfel eller DMN Engine-fel</li>
        </ul>
      </div>
    </section>
  
  </div>
</body>
</html>