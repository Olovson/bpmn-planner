<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Valuate bostad</title>
  <style>
    :root {
      color-scheme: light;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --card-bg: #ffffff;
      --primary: #1d4ed8;
      --text-strong: #0f172a;
      --text-muted: #475569;
      --border: #e2e8f0;
      --accent: #dbeafe;
    }
    body {
      margin: 0;
      padding: 16px;
      background: #ffffff;
      color: var(--text-strong);
      line-height: 1.7;
    }
    .doc-shell {
      max-width: 960px;
      margin: 0 auto;
    }
    h1 {
      font-size: 1.5rem;
      margin: 0 0 24px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 8px;
    }
    h2 {
      color: var(--primary);
      margin: 24px 0 12px;
      font-size: 1.1rem;
    }
    p { margin: 0 0 12px; }
    ul { padding-left: 20px; margin: 0 0 12px; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 12px 0;
      background: var(--card-bg);
      border: 1px solid var(--border);
    }
    table th,
    table td {
      border-bottom: 1px solid var(--border);
      padding: 8px;
      text-align: left;
    }
    table th {
      background: var(--accent);
      color: var(--primary);
      font-weight: 600;
    }
    table tr:last-child td {
      border-bottom: none;
    }
    .muted { color: var(--text-muted); font-size: 0.9rem; }
    a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
    }
    a:hover { text-decoration: underline; }
    .doc-section {
      margin-bottom: 24px;
      padding: 16px;
      background: var(--card-bg);
      border: 1px solid var(--border);
    }
    .doc-section + .doc-section { margin-top: 16px; }
    .doc-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--accent);
      color: var(--primary);
      padding: 2px 10px;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-bottom: 8px;
    }
    .llm-fallback-banner {
      padding: 8px 12px;
      margin-bottom: 16px;
      border-radius: 6px;
      background-color: #fefce8;
      color: #854d0e;
      border: 1px solid #fef9c3;
      font-size: 0.85rem;
    }
    .llm-fallback-badge {
      display: inline-block;
      padding: 4px 8px;
      margin-bottom: 12px;
      border-radius: 4px;
      background-color: #fff3cd;
      color: #856404;
      border: 1px solid #ffeeba;
      font-size: 0.9rem;
      font-weight: 600;
    }
    .llm-fallback-details {
      font-size: 0.8rem;
      color: #4b5563;
      margin-bottom: 16px;
      white-space: pre-wrap;
    }
    .llm-fallback-local-note {
      font-size: 0.8rem;
      color: #2563eb;
      margin-bottom: 16px;
    }
    .mermaid {
      margin: 16px 0;
      text-align: center;
    }
    details {
      margin: 12px 0;
    }
    details summary {
      cursor: pointer;
      font-weight: 600;
      color: var(--primary);
      padding: 8px;
      background: var(--accent);
      border-radius: 4px;
    }
    details summary:hover {
      background: #bfdbfe;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({ startOnLoad: true, theme: 'default' });
  </script>
</head>
<body>
  <div class="doc-shell">
    
    
    
    <div class="doc-badge">üìÑ Lokal version ‚Äì F√∂rb√§ttrat inneh√•ll</div>

    <section class="doc-section">
      <h1>Epic ‚Äì Valuate bostad</h1>
      <ul>
        <li><strong>Epic-namn:</strong> Valuate bostad</li>
        <li><strong>BPMN-fil:</strong> mortgage-se-object.bpmn</li>
        <li><strong>Element ID:</strong> valuate-property</li>
        <li><strong>Nodtyp:</strong> serviceTask</li>
        <li><strong>Version:</strong> 1.0 (exempel) ‚Äì uppdateras vid √§ndring</li>
        <li><strong>√Ñgare:</strong> Produktteam Kredit / Arkitektur</li>
        <li><strong>Confluence:</strong> <a href="#confluence-link">#confluence-link</a></li>
      </ul>
    </section>

    <section class="doc-section">
      <h2>Syfte & V√§rde</h2>
      <p class="muted">Beskrivning av epikens syfte och aff√§rsv√§rde.</p>
      <div class="card">
        <p>Epiken v√§rderar fastigheten automatiskt genom att h√§mta data fr√•n externa k√§llor som Lantm√§teriet, M√§klarstatistik, Booli, och andra fastighetsregister. Detta √§r en kritisk del av bol√•neans√∂kan eftersom fastighetsv√§rdet avg√∂r maximalt l√•nebelopp och anv√§nds i kreditbed√∂mningen. Systemet h√§mtar information om fastighetens adress, storlek, bygg√•r, och j√§mf√∂r med liknande fastigheter i omr√•det f√∂r att ber√§kna ett v√§rderat v√§rde. V√§rderingen kan vara automatisk (baserat p√• registerdata) eller kr√§va manuell granskning vid behov. Resultatet anv√§nds f√∂r att ber√§kna maximalt l√•nebelopp och kontantinsatskrav.</p>
      </div>
    </section>

    <section class="doc-section">
      <h2>Processkontext</h2>
      <p class="muted">Var epicen befinner sig i Application-processen.</p>
      <div class="card">
        <p>Epiken <strong>valuate-property</strong> √§r en del av <strong>object</strong> subprocessen i <strong>mortgage-se-application</strong> processen. Den k√∂rs n√§r gateway "needs-valuation" returnerar "Yes", vilket indikerar att fastighetsv√§rdering beh√∂vs. V√§rdering beh√∂vs alltid vid Purchase n√§r k√§llan till eget kapital √§r f√∂rs√§ljning av annan fastighet, eller vid andra √§ndam√•l. Efter att fastigheten har v√§rderats forts√§tter processen till gateway "Gateway_0u4o84x" och sedan till End.</p>
        
        <details>
          <summary>Application Process Flow</summary>
          <div class="mermaid">
flowchart TD
    Start[Application Start]
    InternalData[internal-data-gathering<br/>subprocess]
    Gateway1[Parallel Gateway]
    Household[household<br/>subprocess]
    Stakeholders[stakeholders<br/>subprocess]
    Object[object<br/>subprocess]
    Gateway2[Parallel Gateway]
    Confirm[confirm-application]
    End[Application End]
    
    Start --> InternalData
    InternalData --> Gateway1
    Gateway1 -->|Parallel| Household
    Gateway1 -->|Parallel| Stakeholders
    Stakeholders --> Object
    Household --> Gateway2
    Stakeholders --> Gateway2
    Object --> Gateway2
    Gateway2 -->|All complete| Confirm
    Confirm --> End
    
    style Object fill:#1d4ed8,color:#fff
    style Valuate fill:#3b82f6,color:#fff
          </div>
          <p class="muted">Application Process Flow visar √∂vergripande fl√∂de: Application startar ‚Üí internal-data-gathering ‚Üí parallellt household och stakeholders ‚Üí object ‚Üí confirm-application.</p>
        </details>
        
        <details>
          <summary>Object Subprocess Flow</summary>
          <div class="mermaid">
flowchart TD
    Start[Start Event]
    Purposes{Purposes?<br/>Gateway}
    RegisterSource[register-source-of-equity<br/>userTask]
    Gateway1[Gateway Merge]
    NeedsValuation{needs-valuation?<br/>Gateway}
    Valuate[valuate-property<br/>serviceTask]
    Gateway2[Gateway Merge]
    End[End Event]
    RegisterLoan[register-loan-details<br/>userTask]
    ObjectInfo[object-information<br/>subprocess]
    ObjectsValid{objects-valid?<br/>Gateway}
    Rejected[Object rejected]
    
    Start --> Purposes
    Purposes -->|Purchase| RegisterSource
    Purposes -->|Refinancing/Move loan| RegisterLoan
    RegisterSource --> Gateway1
    Gateway1 --> NeedsValuation
    NeedsValuation -->|Yes| Valuate
    NeedsValuation -->|No| Gateway2
    Valuate --> Gateway2
    Gateway2 --> End
    RegisterLoan --> ObjectInfo
    ObjectInfo --> ObjectsValid
    ObjectsValid -->|All| Gateway1
    ObjectsValid -->|Some| RegisterLoan
    ObjectsValid -->|None| Rejected
    
    style RegisterSource fill:#3b82f6,color:#fff
    style RegisterLoan fill:#3b82f6,color:#fff
    style Valuate fill:#3b82f6,color:#fff
    style ObjectInfo fill:#1d4ed8,color:#fff
    style Purposes fill:#fbbf24,color:#000
    style NeedsValuation fill:#fbbf24,color:#000
    style ObjectsValid fill:#fbbf24,color:#000
    style Rejected fill:#ef4444,color:#fff
          </div>
          <p class="muted">Object Subprocess Flow visar: Start ‚Üí purposes gateway ‚Üí register-source-of-equity (om Purchase) eller register-loan-details (om Refinancing/Move loan) ‚Üí needs-valuation ‚Üí valuate-property (om Yes) ‚Üí End.</p>
        </details>
        
        <h3>F√∂reg√•ende steg</h3>
        <ul>
          <li><strong>Gateway "Gateway_1uyee92":</strong> Merge gateway som samlar fl√∂den fr√•n register-source-of-equity och objects-valid (All)</li>
          <li><strong>needs-valuation:</strong> Gateway som avg√∂r om fastighetsv√§rdering beh√∂vs. M√•ste returnera "Yes" f√∂r att valuate-property ska k√∂ras</li>
        </ul>
        
        <h3>Efterf√∂ljande steg</h3>
        <ul>
          <li><strong>Gateway "Gateway_0u4o84x":</strong> Merge gateway som samlar fl√∂den fr√•n needs-valuation (No) och valuate-property</li>
          <li><strong>Object Subprocess End:</strong> N√§r valuate-property √§r klar slutf√∂rs object subprocessen</li>
        </ul>
      </div>
    </section>

    <section class="doc-section">
      <h2>Anv√§ndarupplevelse</h2>
      <p class="muted">Beskrivning av anv√§ndarupplevelsen f√∂r b√•de s√∂kande (kund) och anst√§lld (r√•dgivare/admin).</p>
      
      <h3>S√∂kande (Kund)</h3>
      <div class="card">
        <ul>
          <li><strong>Vad ser anv√§ndaren:</strong> Detta √§r en automatisk bakgrundsprocess (serviceTask) som k√∂rs utan direkt anv√§ndarinteraktion. Kunden ser ingen direkt UI, men resultatet p√•verkar vilket l√•nebelopp som kan erbjudas och vilka kontantinsatskrav som g√§ller.</li>
          <li><strong>Steg:</strong> 
            <ul>
              <li>Processen k√∂rs automatiskt n√§r fastighetsinformation √§r tillg√§nglig</li><li>Kunden forts√§tter med ans√∂kningsprocessen medan v√§rderingen g√∂rs i bakgrunden</li><li>Vid slutf√∂rd v√§rdering f√•r kunden information om fastighetsv√§rde och maximalt l√•nebelopp</li>
            </ul>
          </li>
          <li><strong>Interaktioner:</strong> Ingen direkt anv√§ndarinteraktion ‚Äì automatisk systemprocess</li>
          <li><strong>Design:</strong> N/A ‚Äì backend-process</li>
          
        </ul>
      </div>
      
      <h3>Anst√§lld (R√•dgivare/Admin)</h3>
      <div class="card">
        <ul>
          <li><strong>Vad ser anv√§ndaren:</strong> Handl√§ggare kan se status f√∂r v√§rderingen i systemloggar eller admin-gr√§nssnitt. V√§rderingsresultatet visas i ans√∂knings√∂versikten tillsammans med fastighetsinformation, v√§rderingsmetod, och eventuella flaggor eller varningar.</li>
          <li><strong>Steg:</strong> 
            <ul>
              <li>Systemet k√∂r v√§rderingen automatiskt n√§r fastighetsinformation √§r tillg√§nglig</li><li>Handl√§ggare ser v√§rderingsresultatet i ans√∂knings√∂versikten</li><li>Vid behov kan handl√§ggare granska v√§rderingen och beg√§ra manuell v√§rdering eller justering</li><li>Handl√§ggare kan se v√§rderingsmetod och j√§mf√∂relse med liknande fastigheter</li>
            </ul>
          </li>
          <li><strong>Interaktioner:</strong> Granska v√§rderingsresultat, Se v√§rderingsmetod och j√§mf√∂relse, Beg√§ra manuell v√§rdering (vid behov), Justera v√§rdering (vid behov)</li>
          <li><strong>Design:</strong> <a href="#figma-link">[L√§nk till Figma-design]</a></li>
          
        </ul>
      </div>
    </section>

    <section class="doc-section">
      <h2>Funktionellt fl√∂de</h2>
      <p class="muted">Steg-f√∂r-steg beskrivning av processen.</p>
      <div class="card">
        <ol>
          <li>Epiken triggas automatiskt n√§r fastighetsinformation (adress, fastighetsbeteckning) √§r tillg√§nglig fr√•n ans√∂kningsdata.</li><li>Systemet identifierar fastighetsinformation (adress, fastighetsbeteckning) fr√•n ans√∂kningsdata.</li><li>Ett API-anrop g√∂rs till Lantm√§teriet, M√§klarstatistik, Booli, eller andra fastighetsregister f√∂r att h√§mta fastighetsinformation (storlek, bygg√•r, typ, etc.).</li><li>Systemet j√§mf√∂r fastigheten med liknande fastigheter i omr√•det baserat p√• storlek, bygg√•r, typ, och plats f√∂r att ber√§kna ett v√§rderat v√§rde.</li><li>V√§rderingen kan vara automatisk (baserat p√• registerdata och j√§mf√∂relse) eller kr√§va manuell granskning vid behov (t.ex. unika fastigheter, os√§ker data).</li><li>V√§rderingsresultatet sparas i processens datastore tillsammans med v√§rderingsmetod, j√§mf√∂relse, och eventuella flaggor eller varningar.</li><li>Om v√§rderingen lyckas, forts√§tter processen till n√§sta steg. Vid fel loggas informationen och processen kan avbrytas eller skickas till manuell hantering.</li>
        </ol>
        <p><strong>Beslutslogik:</strong> Epiken √§r en serviceTask utan egna gateways. Den k√∂rs sekventiellt n√§r fastighetsinformation √§r tillg√§nglig och m√•ste slutf√∂ras framg√•ngsrikt f√∂r att efterf√∂ljande steg ska kunna k√∂ras. Om v√§rderingen kr√§ver manuell granskning kan processen flaggas f√∂r manuell hantering.</p>
        <p><strong>Felhantering:</strong> Vid timeout eller fel fr√•n fastighetsregister ska systemet logga felet med detaljerad information (felkod, meddelande, timestamp). Vid tillf√§lliga fel kan retry-logik implementeras med exponentiell backoff. Om fastigheten inte hittas i register kan processen flaggas f√∂r manuell v√§rdering. Om v√§rderingen √§r os√§ker kan processen flaggas f√∂r manuell granskning.</p>
        <p><strong>Edge cases:</strong> Nya fastigheter som inte finns i register (kan kr√§va manuell v√§rdering), unika fastigheter utan j√§mf√∂relseobjekt (kan kr√§va manuell v√§rdering), fastigheter med ofullst√§ndig data (kan kr√§va manuell komplettering), fastigheter med os√§ker v√§rdering (kan kr√§va manuell granskning), data fr√•n olika k√§llor som kan vara inkonsistenta.</p>
      </div>
      
      <details>
        <summary>Sekvensdiagram - Fastighetsv√§rdering</summary>
        <div class="mermaid">
sequenceDiagram
    participant Camunda as BPMN Engine<br/>(Camunda)
    participant Service as Valuation Service
    participant Lantmateriet as Lantm√§teriet
    participant Maklarstatistik as M√§klarstatistik
    participant Booli as Booli
    participant Comparison as Comparison Service
    participant Engine as Valuation Engine
    participant Store as Valuation Data Store
    
    Note over Camunda: Triggas n√§r<br/>fastighetsinfo √§r tillg√§nglig
    Camunda->>Service: Exekvera valuate-property
    Service->>Service: Identifiera fastighetsinfo<br/>(adress, fastighetsbeteckning)
    
    par Parallella API-anrop
        Service->>Lantmateriet: REST API: H√§mta fastighetsinfo<br/>(adress/fastighetsbeteckning)
        Lantmateriet-->>Service: Fastighetsinfo<br/>(storlek, bygg√•r, typ)
    and
        Service->>Maklarstatistik: REST API: H√§mta j√§mf√∂relse<br/>(liknande fastigheter)
        Maklarstatistik-->>Service: J√§mf√∂relseobjekt<br/>(f√∂rs√§ljningspriser)
    and
        Service->>Booli: REST API: H√§mta j√§mf√∂relse<br/>(liknande fastigheter)
        Booli-->>Service: J√§mf√∂relseobjekt<br/>(f√∂rs√§ljningspriser)
    end
    
    Service->>Comparison: J√§mf√∂r fastighet<br/>med liknande (storlek, bygg√•r, typ, plats)
    Comparison-->>Service: J√§mf√∂relseresultat
    
    Service->>Engine: Ber√§kna v√§rderat v√§rde<br/>(baserat p√• j√§mf√∂relse)
    Engine-->>Service: V√§rderat v√§rde + metod
    
    alt V√§rdering lyckas
        Service->>Store: Spara v√§rderingsresultat<br/>+ metadata + j√§mf√∂relse
        Store-->>Service: Bekr√§ftelse
        Service->>Camunda: Success + v√§rderingsresultat
        Camunda->>Camunda: Publicera event f√∂r<br/>efterf√∂ljande steg
    else V√§rdering os√§ker eller fel
        Service->>Camunda: Flagga f√∂r manuell granskning
        Camunda->>Camunda: Pausa processen
    end
    
    alt API-timeout eller fel
        Service->>Service: Retry med exponentiell backoff
        Service->>Lantmateriet: Retry API-anrop
        Lantmateriet-->>Service: Fastighetsinfo
    else Fallback till alternativ k√§lla
        Service->>Service: V√§xla till M√§klarstatistik/Booli
        Service->>Maklarstatistik: API-anrop till alternativ k√§lla
        Maklarstatistik-->>Service: Fastighetsinfo
    else Fastighet hittas inte
        Lantmateriet-->>Service: 404 Not Found
        Service->>Camunda: Error: Fastighet hittas inte
        Camunda->>Camunda: Flagga f√∂r manuell v√§rdering
    end
        </div>
        <p class="muted">Sekvensdiagram visar tidslinje f√∂r interaktioner: BPMN Engine triggar Valuation Service, som g√∂r parallella API-anrop till flera fastighetsregister, j√§mf√∂r fastigheter, ber√§knar v√§rderat v√§rde, sparar resultat, och hanterar fel med retry-logik och fallback mellan olika k√§llor.</p>
      </details>
    </section>

    <section class="doc-section">
      <h2>Inputs & Datak√§llor</h2>
      <p class="muted">Beskrivning av inputs och datak√§llor (interna och externa).</p>
      
      <h3>Inputs</h3>
      <p class="muted">Data som epiken tar emot fr√•n f√∂reg√•ende steg eller anv√§ndaren.</p>
      <table>
        <tr>
          <th>Input</th>
          <th>K√§lla</th>
          <th>Typ</th>
          <th>Obligatoriskt</th>
          <th>Beskrivning</th>
        </tr>
        
        <tr>
          <td>Fastighetsinformation (adress, fastighetsbeteckning)</td>
          <td>Ans√∂kningsdata eller f√∂reg√•ende steg</td>
          <td>PropertyInfo</td>
          <td>Ja</td>
          <td>Grundl√§ggande fastighetsinformation f√∂r att identifiera r√§tt fastighet i register</td>
        </tr>
        <tr>
          <td>Ans√∂knings-ID</td>
          <td>Processkontext</td>
          <td>String/UUID</td>
          <td>Ja</td>
          <td>F√∂r att koppla v√§rdering till r√§tt ans√∂kan och m√∂jligg√∂ra sp√•rbarhet</td>
        </tr>
        <tr>
          <td>Befintlig v√§rdering (om tillg√§nglig)</td>
          <td>Tidigare ans√∂kningar eller session</td>
          <td>PropertyValuation</td>
          <td>Nej</td>
          <td>Om fastigheten redan har v√§rderats i tidigare ans√∂kan kan denna √•teranv√§ndas eller anv√§ndas som utg√•ngspunkt</td>
        </tr>
      </table>

      <h3>Datak√§llor</h3>
      <p class="muted">System och k√§llor som epiken h√§mtar data fr√•n.</p>
      
      
      <h4>Interna datak√§llor (bankens system)</h4>
      <ul>
        <li><strong>Application DB:</strong> Ans√∂kningsdata och fastighetsinformation</li>
        <li><strong>Valuation Data Store:</strong> Tidigare v√§rderingar om tillg√§nglig</li>
      </ul>
      

      
      <h4>Externa APIs</h4>
      <ul>
        <li><strong>Lantm√§teriet:</strong> Offentligt register som inneh√•ller fastighetsinformation inklusive fastighetsbeteckning, storlek, bygg√•r, och typ. Detta √§r prim√§r datak√§lla f√∂r fastighetsinformation.</li>
        <li><strong>M√§klarstatistik:</strong> Fastighetsregister som inneh√•ller f√∂rs√§ljningspriser och marknadsdata f√∂r j√§mf√∂relse med liknande fastigheter.</li>
        <li><strong>Booli:</strong> Fastighetsregister som inneh√•ller f√∂rs√§ljningspriser och marknadsdata f√∂r j√§mf√∂relse med liknande fastigheter.</li>
      </ul>
      

      
      <h4>Databaser</h4>
      <ul>
        <li><strong>Application DB:</strong> PostgreSQL-databas f√∂r ans√∂kningsdata och processkontext</li>
        <li><strong>Valuation Data Store:</strong> Lagrar v√§rderingsresultat f√∂r anv√§ndning i efterf√∂ljande steg</li>
      </ul>
      

      <details>
        <summary>Data Flow Diagram</summary>
        <div class="mermaid">
flowchart LR
    Input[Fastighetsinformation<br/>Adress, Fastighetsbeteckning]
    
    Lantmateriet[Lantm√§teriet<br/>Fastighetsinfo]
    Maklarstatistik[M√§klarstatistik<br/>J√§mf√∂relseobjekt]
    Booli[Booli<br/>J√§mf√∂relseobjekt]
    
    Transform1[Transformation<br/>Normalisera data]
    Transform2[Transformation<br/>J√§mf√∂r fastigheter]
    Transform3[Transformation<br/>Ber√§kna v√§rderat v√§rde]
    
    Output[V√§rderingsresultat<br/>V√§rderat v√§rde, Metod,<br/>J√§mf√∂relse, Metadata]
    
    Input -->|API-anrop| Lantmateriet
    Input -->|API-anrop| Maklarstatistik
    Input -->|API-anrop| Booli
    
    Lantmateriet -->|Fastighetsinfo| Transform1
    Maklarstatistik -->|J√§mf√∂relseobjekt| Transform2
    Booli -->|J√§mf√∂relseobjekt| Transform2
    
    Transform1 -->|Normaliserad data| Transform2
    Transform2 -->|J√§mf√∂relseresultat| Transform3
    Transform3 -->|V√§rderat v√§rde| Output
    
    style Input fill:#dbeafe,color:#000
    style Lantmateriet fill:#fef3c7,color:#000
    style Maklarstatistik fill:#fef3c7,color:#000
    style Booli fill:#fef3c7,color:#000
    style Transform1 fill:#ddd6fe,color:#000
    style Transform2 fill:#ddd6fe,color:#000
    style Transform3 fill:#ddd6fe,color:#000
    style Output fill:#d1fae5,color:#000
        </div>
        <p class="muted">Data Flow Diagram visar datak√§llor (Lantm√§teriet, M√§klarstatistik, Booli), datatransformationer (normalisering, j√§mf√∂relse, ber√§kning), och datam√•l (v√§rderingsresultat).</p>
      </details>
      
    </section>

    

    <section class="doc-section">
      <h2>Outputs</h2>
      <p class="muted">Data som skapas, uppdateras eller skickas vidare.</p>
      <table>
        <tr>
          <th>Output</th>
          <th>Mottagare</th>
          <th>Typ</th>
          <th>Beskrivning</th>
        </tr>
        
        <tr>
          <td>V√§rderingsresultat (v√§rderat v√§rde, v√§rderingsmetod, j√§mf√∂relse)</td>
          <td>Valuation Data Store, efterf√∂ljande steg</td>
          <td>PropertyValuation</td>
          <td>Strukturerat v√§rderingsresultat inklusive v√§rderat v√§rde, v√§rderingsmetod, j√§mf√∂relse med liknande fastigheter, och eventuella flaggor eller varningar</td>
        </tr>
        <tr>
          <td>Fastighetsinformation (storlek, bygg√•r, typ, plats)</td>
          <td>Processkontext, efterf√∂ljande steg</td>
          <td>PropertyDetails</td>
          <td>Detaljerad fastighetsinformation fr√•n register f√∂r anv√§ndning i kreditbed√∂mning</td>
        </tr>
        <tr>
          <td>V√§rderingsstatus och metadata</td>
          <td>Processkontext, loggsystem</td>
          <td>ValuationStatus</td>
          <td>Status f√∂r v√§rderingen (completed/manual_review_required), timestamp, v√§rderingsmetod, datak√§llor, och eventuella flaggor</td>
        </tr>
      </table>
    </section>

    
    <section class="doc-section">
      <h2>Arkitektur & Systeminteraktioner</h2>
      <p class="muted">Beskrivning av systemarkitektur, integrationer och teknisk stack.</p>
      <div class="card">
        <ul>
          
          
          <li><strong>System som interagerar:</strong>
            <ul>
              <li><strong>Lantm√§teriet:</strong> Offentligt register ‚Äì prim√§r datak√§lla f√∂r fastighetsinformation</li>
              <li><strong>M√§klarstatistik:</strong> Fastighetsregister ‚Äì datak√§lla f√∂r j√§mf√∂relse med liknande fastigheter</li>
              <li><strong>Booli:</strong> Fastighetsregister ‚Äì datak√§lla f√∂r j√§mf√∂relse med liknande fastigheter</li>
              <li><strong>Application DB:</strong> PostgreSQL-databas f√∂r ans√∂kningsdata och processkontext</li>
            </ul>
          </li>
          
          <li><strong>Integrationer:</strong>
            <ul>
              <li><strong>API-integrationer:</strong> REST API-anrop till Lantm√§teriet, M√§klarstatistik, och Booli f√∂r att h√§mta fastighetsinformation och j√§mf√∂relse. API:et exponerar endpoints f√∂r att s√∂ka fastighet baserat p√• adress eller fastighetsbeteckning. St√∂djer filtrering och validering av data. √ñverv√§g fallback mellan olika k√§llor om en k√§lla inte √§r tillg√§nglig.</li>
              <li><strong>Event-integrationer:</strong> Processen triggas n√§r fastighetsinformation √§r tillg√§nglig. Vid lyckad v√§rdering kan events publiceras f√∂r efterf√∂ljande steg.</li>
              <li><strong>Databas-integrationer:</strong> PostgreSQL f√∂r ans√∂kningsdata. V√§rderingsresultat sparas i Valuation Data Store f√∂r anv√§ndning i efterf√∂ljande steg.</li>
            </ul>
          </li>
          
          <li><strong>Teknisk stack:</strong>
            <ul>
              <li>BPMN-processmotor (Camunda) f√∂r orkestrering</li>
              <li>REST-klienter f√∂r API-anrop till fastighetsregister</li>
              <li>Valuation Engine f√∂r ber√§kning av v√§rderat v√§rde</li>
              <li>PostgreSQL f√∂r datalagring</li>
              <li>Loggning via centraliserat loggsystem</li>
            </ul>
          </li>
          
          <li><strong>Arkitekturdiagram:</strong>
            <details>
              <summary>C4 System Context Diagram</summary>
              <div class="mermaid">
graph TB
    Customer[üë§ Customer<br/>Kund]
    Handler[üë§ Handler<br/>Handl√§ggare]
    
    Epic[Valuate Property<br/>serviceTask]
    
    Lantmateriet[Lantm√§teriet<br/>Offentligt register]
    Maklarstatistik[M√§klarstatistik<br/>Fastighetsregister]
    Booli[Booli<br/>Fastighetsregister]
    
    AppDB[(Application DB<br/>PostgreSQL)]
    ValuationStore[(Valuation Data Store<br/>V√§rderingsresultat)]
    
    Customer -.->|Triggar via<br/>ans√∂kan| Epic
    Handler -.->|Granskar<br/>v√§rdering| Epic
    
    Epic -->|REST API<br/>H√§mtar fastighetsinfo| Lantmateriet
    Epic -->|REST API<br/>H√§mtar j√§mf√∂relse| Maklarstatistik
    Epic -->|REST API<br/>H√§mtar j√§mf√∂relse| Booli
    Epic -->|L√§ser/Sparar<br/>ans√∂kningsdata| AppDB
    Epic -->|Sparar<br/>v√§rderingsresultat| ValuationStore
    
    style Epic fill:#1d4ed8,color:#fff
    style Lantmateriet fill:#f59e0b,color:#fff
    style Maklarstatistik fill:#f59e0b,color:#fff
    style Booli fill:#f59e0b,color:#fff
    style AppDB fill:#10b981,color:#fff
    style ValuationStore fill:#10b981,color:#fff
              </div>
              <p class="muted">System Context Diagram visar epic i centrum med externa system (Lantm√§teriet, M√§klarstatistik, Booli), interna system (Application DB, Valuation Data Store), och anv√§ndare (Customer, Handler).</p>
            </details>
            
            <details>
              <summary>Komponentdiagram</summary>
              <div class="mermaid">
graph TB
    BPMN[BPMN Engine<br/>Camunda]
    ValuationService[Valuation Service<br/>Valuate Property]
    RESTClient1[REST Client<br/>Lantm√§teriet]
    RESTClient2[REST Client<br/>M√§klarstatistik]
    RESTClient3[REST Client<br/>Booli]
    ComparisonService[Comparison Service<br/>J√§mf√∂r fastigheter]
    ValuationEngine[Valuation Engine<br/>Ber√§kna v√§rde]
    ValuationStore[Valuation Data Store<br/>V√§rderingsresultat]
    
    BPMN -->|Orkestrerar| ValuationService
    ValuationService -->|Anv√§nder| RESTClient1
    ValuationService -->|Anv√§nder| RESTClient2
    ValuationService -->|Anv√§nder| RESTClient3
    ValuationService -->|Anv√§nder| ComparisonService
    ValuationService -->|Anv√§nder| ValuationEngine
    ValuationService -->|Sparar data| ValuationStore
    
    RESTClient1 -->|API-anrop| Lantmateriet[Lantm√§teriet]
    RESTClient2 -->|API-anrop| Maklarstatistik[M√§klarstatistik]
    RESTClient3 -->|API-anrop| Booli[Booli]
    ComparisonService -->|J√§mf√∂r| ValuationEngine
    ValuationEngine -->|Ber√§knar| ValuationStore
    
    style BPMN fill:#1d4ed8,color:#fff
    style ValuationService fill:#3b82f6,color:#fff
    style RESTClient1 fill:#60a5fa,color:#fff
    style RESTClient2 fill:#60a5fa,color:#fff
    style RESTClient3 fill:#60a5fa,color:#fff
    style ComparisonService fill:#93c5fd,color:#fff
    style ValuationEngine fill:#93c5fd,color:#fff
    style ValuationStore fill:#10b981,color:#fff
              </div>
              <p class="muted">Komponentdiagram visar huvudkomponenter: BPMN Engine orkestrerar Valuation Service, som anv√§nder flera REST Clients f√∂r API-anrop, Comparison Service f√∂r j√§mf√∂relse, Valuation Engine f√∂r ber√§kning, och sparar data i Valuation Data Store.</p>
            </details>
          </li>
          
        </ul>
      </div>
    </section>
    

    
    <section class="doc-section">
      <h2>API Dokumentation</h2>
      <p class="muted">Beskrivning av API-endpoints som anv√§nds eller exponeras.</p>
      
      
      <h3>API-endpoints (exponerade)</h3>
      <table>
        <tr>
          <th>Endpoint</th>
          <th>Metod</th>
          <th>Request</th>
          <th>Response</th>
          <th>Felkoder</th>
        </tr>
        <tr>
          <td><code>/api/valuate-property</code></td>
          <td>POST</td>
          <td><code>{ "fastighetsbeteckning": "string", "adress": "string", "applicationId": "uuid" }</code></td>
          <td><code>{ "valuation": { "v√§rderatV√§rde": "number", "v√§rderingsmetod": "string", "j√§mf√∂relseobjekt": [...] }, "status": "success", "metadata": { "datak√§lla": "Lantm√§teriet", "timestamp": "ISO8601" } }</code></td>
          <td>400 (Bad Request), 404 (Not Found), 500 (Server Error), 503 (Service Unavailable)</td>
        </tr>
      </table>
      
      <h3>Externa API:er (anv√§nds)</h3>
      <table>
        <tr>
          <th>API</th>
          <th>Endpoint</th>
          <th>Autentisering</th>
          <th>Rate Limit</th>
          <th>Beskrivning</th>
        </tr>
        <tr>
          <td>Lantm√§teriet</td>
          <td><code>/api/fastighet/{fastighetsbeteckning}</code></td>
          <td>API key (X-API-Key header)</td>
          <td>100 requests/minut</td>
          <td>Fastighetsregister f√∂r fastighetsinformation (adress, storlek, bygg√•r, typ)</td>
        </tr>
        <tr>
          <td>M√§klarstatistik</td>
          <td><code>/api/properties/{adress}/comparables</code></td>
          <td>API key (X-API-Key header)</td>
          <td>50 requests/minut</td>
          <td>J√§mf√∂relseobjekt f√∂r fastighetsv√§rdering baserat p√• liknande fastigheter i omr√•det</td>
        </tr>
        <tr>
          <td>Booli</td>
          <td><code>/api/properties/{adress}/valuation</code></td>
          <td>API key (X-API-Key header)</td>
          <td>50 requests/minut</td>
          <td>Alternativ fastighetsv√§rdering baserat p√• marknadsdata</td>
        </tr>
      </table>
      
      <h3>Autentisering</h3>
      <div class="card">
        <ul>
          <li><strong>Exponerad endpoint:</strong> Kr√§ver OAuth 2.0 Bearer token i Authorization header</li>
          <li><strong>Lantm√§teriet/M√§klarstatistik/Booli:</strong> API key i X-API-Key header (hanteras av API Gateway)</li>
        </ul>
      </div>
      
      <h3>Felhantering</h3>
      <div class="card">
        <ul>
          <li><strong>400 Bad Request:</strong> Ogiltig input (t.ex. ogiltig fastighetsbeteckning eller adress)</li>
          <li><strong>404 Not Found:</strong> Fastighet hittas inte i register</li>
          <li><strong>500 Server Error:</strong> Internt serverfel</li>
          <li><strong>503 Service Unavailable:</strong> Extern API √§r otillg√§nglig (retry med exponentiell backoff)</li>
          <li><strong>Timeout:</strong> 30 sekunder f√∂r externa API-anrop, retry max 3 g√•nger</li>
        </ul>
      </div>
    </section>
    

    <section class="doc-section">
      <h2>Aff√§rsregler & Beroenden</h2>
      <p class="muted">Beskrivning av aff√§rsregler, kreditregler och beroenden.</p>
      <div class="card">
        <h3>Aff√§rsregler</h3>
        <ul>
          <li><strong>V√§rderingsmetod:</strong> V√§rderingen baseras p√• j√§mf√∂relse med liknande fastigheter i omr√•det. Systemet j√§mf√∂r fastigheten med liknande fastigheter baserat p√• storlek, bygg√•r, typ, och plats. V√§rderat v√§rde ber√§knas som genomsnitt eller median av j√§mf√∂relseobjekt.</li>
          <li><strong>V√§rderingsgr√§nser:</strong> V√§rderat v√§rde m√•ste vara rimligt baserat p√• marknadsdata. Om v√§rderingen avviker signifikant fr√•n marknadsdata kan processen flaggas f√∂r manuell granskning. V√§rderat v√§rde anv√§nds f√∂r att ber√§kna maximalt l√•nebelopp (t.ex. max 85% av v√§rderat v√§rde).</li>
          <li><strong>Manuell granskning:</strong> Vissa fastigheter kan kr√§va manuell v√§rdering (t.ex. unika fastigheter, os√§ker data, avvikande v√§rdering). Systemet b√∂r flagga dessa f√∂r manuell granskning.</li>
          <li><strong>Datakvalitet:</strong> V√§rdering fr√•n olika k√§llor kan variera. Systemet b√∂r hantera inkonsistenser och flagga f√∂r manuell granskning vid behov. √ñverv√§g att anv√§nda flera k√§llor f√∂r mer exakt v√§rdering.</li>
          <li><strong>Sp√•rbarhet:</strong> Alla v√§rderingar m√•ste loggas med timestamp, datak√§llor, v√§rderingsmetod, och eventuella flaggor f√∂r compliance och efterkontroll.</li>
        </ul>
      </div>
    </section>

    <section class="doc-section">
      <h2>Test Information</h2>
      <p class="muted">Beskrivning av testscenarier, testdata och testmilj√∂er.</p>
      <div class="card">
        <h3>Testscenarier</h3>
        <ul>
          <li><strong>Normalfl√∂de med komplett underlag:</strong> Kunden eller handl√§ggaren har l√§mnat kompletta och konsistenta uppgifter som uppfyller grundl√§ggande krav.</li><li><strong>Delvis ofullst√§ndigt eller oklart underlag:</strong> Enstaka uppgifter saknas eller √§r mots√§gelsefulla, men √§rendet bed√∂ms kunna kompletteras utan att avbrytas.</li><li><strong>Tekniskt fel eller kritisk avvikelse:</strong> Centrala data inte kan l√§sas in, valideras eller sparas p√• ett s√§kert s√§tt.</li>
        </ul>

        <h3>Testdata</h3>
        <ul>
          <li>[Beskrivning av testdata som beh√∂vs]</li>
        </ul>

        <h3>Testmilj√∂er</h3>
        <ul>
          <li>[Milj√∂ 1: t.ex. "Local development"]</li>
          <li>[Milj√∂ 2: t.ex. "Staging"]</li>
        </ul>

        <h3>Automatiska tester</h3>
        <p>Aff√§rs-scenarierna EPIC-S1‚ÄìEPIC-S3 ska mappas mot automatiska tester d√§r scenario-ID och namn anv√§nds i testfallens ben√§mningar. Testerna b√∂r t√§cka normalfl√∂de, kompletteringsfall samt tekniska fel eller kritiska avvikelser.</p>
        
      </div>
    </section>

    <section class="doc-section">
      <h2>Felhantering & Edge Cases</h2>
      <p class="muted">Beskrivning av felhantering och edge cases.</p>
      
      <h3>Tekniska fel</h3>
      <div class="card">
        <ul>
          <li><strong>API-timeout:</strong> Vid timeout fr√•n fastighetsregister (30 sekunder) ska systemet logga felet och implementera retry med exponentiell backoff (max 3 f√∂rs√∂k per k√§lla). Om alla retries misslyckas f√∂r en k√§lla, fallback till n√§sta k√§lla (Lantm√§teriet ‚Üí M√§klarstatistik ‚Üí Booli).</li>
          <li><strong>N√§tverksfel:</strong> Vid n√§tverksfel (connection refused, DNS failure) ska systemet logga felet med detaljerad information och implementera retry med exponentiell backoff. Om alla retries misslyckas f√∂r en k√§lla, fallback till n√§sta k√§lla.</li>
          <li><strong>Databasfel:</strong> Vid databasfel (connection timeout, deadlock) n√§r v√§rderat v√§rde sparas ska processen flaggas f√∂r manuell hantering och felet loggas med detaljerad information. √ñverv√§g retry f√∂r tillf√§lliga databasfel.</li>
          <li><strong>Fastighetsregister-fel:</strong> Vid fel fr√•n fastighetsregister (503 Service Unavailable, 500 Server Error) ska systemet logga felet och implementera retry med exponentiell backoff. Om alla retries misslyckas f√∂r en k√§lla, fallback till n√§sta k√§lla.</li>
        </ul>
      </div>
      
      <h3>Aff√§rsrelaterade fel</h3>
      <div class="card">
        <ul>
          <li><strong>Validering:</strong> Om fastighetsinformation √§r ogiltig (t.ex. ogiltig adress, ogiltig fastighetsbeteckning) ska processen flaggas f√∂r manuell verifiering med tydligt felmeddelande. Kunden kan beh√∂va kontakta banken f√∂r att korrigera informationen.</li>
          <li><strong>Fastighet hittas inte:</strong> Om fastighet inte hittas i fastighetsregister (404 Not Found) ska processen flaggas f√∂r manuell verifiering. Detta kan vara f√∂rv√§ntat f√∂r nya fastigheter eller fastigheter med ogiltiga fastighetsbeteckningar.</li>
          <li><strong>Os√§ker v√§rdering:</strong> Om v√§rdering √§r os√§ker (t.ex. f√• j√§mf√∂relseobjekt, stora avvikelser mellan k√§llor) ska processen flaggas f√∂r manuell granskning. Systemet ska logga varf√∂r v√§rderingen √§r os√§ker.</li>
          <li><strong>Ofullst√§ndig data:</strong> Om fastighetsinformation saknar obligatoriska f√§lt (t.ex. storlek saknas, bygg√•r saknas) ska processen flaggas f√∂r manuell komplettering. Systemet ska logga vilka f√§lt som saknas.</li>
        </ul>
      </div>
      
      <h3>Edge cases</h3>
      <div class="card">
        <ul>
          <li><strong>Fallback mellan k√§llor:</strong> Om Lantm√§teriet inte √§r tillg√§nglig ska systemet automatiskt fallback till M√§klarstatistik, och om M√§klarstatistik inte √§r tillg√§nglig ska systemet fallback till Booli. Systemet ska logga vilken k√§lla som anv√§ndes.</li>
          <li><strong>Olika v√§rderingsmetoder:</strong> Olika k√§llor kan anv√§nda olika v√§rderingsmetoder (t.ex. j√§mf√∂relse vs kostnadsmetod). Systemet ska normalisera v√§rderat v√§rde till en gemensam metod f√∂r konsistens.</li>
          <li><strong>Nya fastigheter:</strong> Nya fastigheter utan historisk data kan sakna j√§mf√∂relseobjekt. Systemet ska hantera detta gracefully och flagga f√∂r manuell granskning om j√§mf√∂relseobjekt saknas.</li>
          <li><strong>Historiska data:</strong> V√§rdering fr√•n olika k√§llor kan vara inkonsistenta och kr√§va manuell granskning. Systemet ska identifiera inkonsistenser och flagga f√∂r manuell verifiering.</li>
          <li><strong>Cache:</strong> Om v√§rdering √§r cachad (t.ex. v√§rderad inom senaste 30 dagarna) ska systemet anv√§nda cachad data f√∂r att undvika on√∂diga anrop. √ñverv√§g att validera cache-√•lder f√∂r att s√§kerst√§lla att data √§r aktuell.</li>
        </ul>
      </div>
      
      <h3>Retry-strategier</h3>
      <div class="card">
        <ul>
          <li><strong>Exponentiell backoff:</strong> Retry med v√§xande intervall (1s, 2s, 4s) f√∂r tillf√§lliga fel (timeout, 503 Service Unavailable). Max 3 f√∂rs√∂k per k√§lla innan fallback till n√§sta k√§lla.</li>
          <li><strong>Fallback-strategi:</strong> Om en k√§lla misslyckas efter 3 f√∂rs√∂k, fallback till n√§sta k√§lla (Lantm√§teriet ‚Üí M√§klarstatistik ‚Üí Booli). Om alla k√§llor misslyckas flaggas processen f√∂r manuell hantering.</li>
          <li><strong>Retry-kriterier:</strong> Retry endast f√∂r tillf√§lliga fel (timeout, 503, connection refused). Inte f√∂r permanenta fel (400 Bad Request, 404 Not Found, 401 Unauthorized).</li>
        </ul>
      </div>
    </section>

    <section class="doc-section">
      <h2>Implementation Notes</h2>
      <p class="muted">Tekniska noteringar, k√§nda begr√§nsningar och framtida f√∂rb√§ttringar.</p>
      <div class="card">
        <ul>
          <li><strong>API-anrop:</strong> Epiken exponeras via BPMN serviceTask och kan anropas via processgr√§nssnitt. API-anrop till fastighetsregister b√∂r implementeras med retry-logik f√∂r tillf√§lliga fel och timeout-hantering. √ñverv√§g fallback mellan olika k√§llor (Lantm√§teriet ‚Üí M√§klarstatistik ‚Üí Booli) om en k√§lla inte √§r tillg√§nglig.</li>
          <li><strong>Valuation Engine:</strong> Systemet m√•ste ber√§kna v√§rderat v√§rde korrekt baserat p√• j√§mf√∂relse med liknande fastigheter. √ñverv√§g att anv√§nda flera k√§llor f√∂r mer exakt v√§rdering. V√§rderingsmetod b√∂r vara transparent och sp√•rbar.</li>
          <li><strong>Loggning:</strong> Loggning ska omfatta: fastighetsinformation (adress, fastighetsbeteckning), v√§rderat v√§rde, v√§rderingsmetod, datak√§llor, j√§mf√∂relseobjekt, eventuella fel eller varningar, och status (success/failure/manual_review_required). Alla v√§rderingar ska loggas f√∂r sp√•rbarhet.</li>
          <li><strong>Prestanda:</strong> API-anrop till fastighetsregister kan ta 2-5 sekunder. √ñverv√§g asynkron v√§rdering om det tar l√§ngre tid. Cache kan anv√§ndas f√∂r att undvika on√∂diga anrop om samma fastighet v√§rderas flera g√•nger (med rimlig tidsbegr√§nsning).</li>
          <li><strong>Datavalidering:</strong> Validera att fastighetsinformation matchar f√∂rv√§ntat format innan v√§rdering. Verifiera att obligatoriska f√§lt finns med (adress, fastighetsbeteckning) och att datatyper √§r korrekta. Validera att v√§rderat v√§rde √§r rimligt baserat p√• marknadsdata.</li>
          <li><strong>Framtida f√∂rb√§ttringar:</strong> √ñverv√§g att inkludera fler faktorer i v√§rderingen (t.ex. renoveringar, l√§ge, marknadsutveckling) f√∂r mer exakt v√§rdering. St√∂d f√∂r olika v√§rderingsmetoder (t.ex. j√§mf√∂relse, kostnadsmetod, inkomstmetod). Integration med machine learning f√∂r mer sofistikerad v√§rdering baserat p√• historisk data.</li>
        </ul>
      </div>
    </section>

    <section class="doc-section">
      <h2>Relaterade noder</h2>
      <p class="muted">L√§nkar till relaterade epics, feature goals och business rules.</p>
      
      <details>
        <summary>Beroendediagram</summary>
        <div class="mermaid">
flowchart LR
    Previous1[register-source-of-equity<br/>userTask]
    Previous2[objects-valid<br/>Gateway - All]
    Gateway1[Gateway Merge]
    NeedsValuation{needs-valuation?<br/>Gateway}
    Current[valuate-property<br/>serviceTask]
    Gateway2[Gateway Merge]
    End[Object Subprocess<br/>End]
    
    Previous1 --> Gateway1
    Previous2 --> Gateway1
    Gateway1 --> NeedsValuation
    NeedsValuation -->|Yes| Current
    NeedsValuation -->|No| Gateway2
    Current --> Gateway2
    Gateway2 --> End
    
    style Current fill:#3b82f6,color:#fff
    style Previous1 fill:#3b82f6,color:#fff
    style Gateway1 fill:#fbbf24,color:#000
    style NeedsValuation fill:#fbbf24,color:#000
    style Gateway2 fill:#fbbf24,color:#000
        </div>
        <p class="muted">Beroendediagram visar: register-source-of-equity eller objects-valid (All) ‚Üí Gateway Merge ‚Üí needs-valuation ‚Üí valuate-property (om Yes) ‚Üí Gateway Merge ‚Üí End.</p>
      </details>
      
      <h3>F√∂reg√•ende steg</h3>
      <ul>
        <li><strong>Gateway "Gateway_1uyee92":</strong> Merge gateway som samlar fl√∂den fr√•n register-source-of-equity och objects-valid (All)</li>
        <li><strong>needs-valuation:</strong> Gateway som avg√∂r om fastighetsv√§rdering beh√∂vs. M√•ste returnera "Yes" f√∂r att valuate-property ska k√∂ras</li>
      </ul>
      
      <h3>Efterf√∂ljande steg</h3>
      <ul>
        <li><strong>Gateway "Gateway_0u4o84x":</strong> Merge gateway som samlar fl√∂den fr√•n needs-valuation (No) och valuate-property</li>
        <li><strong>Object Subprocess End:</strong> N√§r valuate-property √§r klar slutf√∂rs object subprocessen</li>
      </ul>
      
      <h3>Parallella steg</h3>
      <ul>
        <li><strong>object-information:</strong> K√∂rs parallellt i object subprocessen (validerar objektinformation)</li>
      </ul>
      
      <h3>Business Rules</h3>
      <ul>
        <li><strong>V√§rderingsregler:</strong> V√§rderat v√§rde m√•ste vara korrekt och rimligt</li>
        <li><strong>J√§mf√∂relse:</strong> Regler f√∂r j√§mf√∂relse med liknande fastigheter</li>
        <li><strong>Manuell granskning:</strong> Regler f√∂r manuell granskning vid os√§ker v√§rdering</li>
        <li><strong>Kreditbed√∂mning:</strong> Regler f√∂r anv√§ndning av v√§rderat v√§rde i kreditbed√∂mning</li>
      </ul>
    </section>

    <section class="doc-section">
      <h2>BPMN ‚Äì Process (Bild)</h2>
      <p class="muted">Bild av BPMN-processen som epiken refererar till.</p>
      <div class="card">
        <p><strong>BPMN-diagram:</strong></p>
        <p><a href="#/bpmn/mortgage-se-object.bpmn">Visa BPMN-processen</a></p>
        <p class="muted">[Beskrivning av BPMN-processen eller l√§nk till BPMN-viewer. Bilden ska visa noden och dess kontext i processen.]</p>
      </div>
    </section>
  
  </div>
</body>
</html>