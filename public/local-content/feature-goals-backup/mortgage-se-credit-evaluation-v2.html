<!DOCTYPE html>
<html lang="sv">
<head>
  <meta name="x-generation-source" content="local-fallback" />
  <meta name="x-feature-goal-template-version" content="v2" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Automatic Credit Evaluation</title>
  <style>
    :root {
      --primary: #1d4ed8;
      --text-strong: #0f172a;
      --text-muted: #64748b;
      --border: #e2e8f0;
      --accent: #e0e7ff;
      --bg-light: #f8f9fa;
    }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      margin: 0;
      padding: 24px;
      background: #ffffff;
      color: var(--text-strong);
      line-height: 1.6;
      max-width: 1200px;
      margin: 0 auto;
    }
    h1 {
      font-size: 2rem;
      margin: 0 0 32px;
      border-bottom: 2px solid var(--border);
      padding-bottom: 12px;
      color: var(--text-strong);
    }
    h2 {
      color: var(--primary);
      margin: 0;
      font-size: 1.5rem;
    }
    h3 {
      color: var(--text-strong);
      margin: 32px 0 12px;
      font-size: 1.2rem;
    }
    p { margin: 0 0 12px; }
    ul {
      padding-left: 24px;
      margin: 0 0 16px;
    }
    li { margin-bottom: 8px; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
      background: white;
      border: 1px solid var(--border);
      border-radius: 6px;
      overflow: hidden;
    }
    table th,
    table td {
      border-bottom: 1px solid var(--border);
      padding: 12px;
      text-align: left;
    }
    table th {
      background: var(--accent);
      color: var(--primary);
      font-weight: 600;
    }
    table tr:last-child td {
      border-bottom: none;
    }
    .muted {
      color: var(--text-muted);
      font-size: 0.9rem;
      font-style: italic;
    }
    .card {
      background: var(--bg-light);
      padding: 20px;
      border-radius: 8px;
      margin: 16px 0;
      border-left: 4px solid var(--primary);
    }
    .doc-section {
      margin-bottom: 16px;
      background: white;
      border: 1px solid var(--border);
      border-radius: 8px;
      overflow: hidden;
    }
    .doc-section details {
      margin: 0;
    }
    .doc-section details summary {
      cursor: pointer;
      font-weight: 600;
      color: var(--primary);
      padding: 16px 20px;
      background: var(--bg-light);
      border-bottom: 1px solid var(--border);
      user-select: none;
      font-size: 1.5rem;
      list-style: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .doc-section details summary::-webkit-details-marker {
      display: none;
    }
    .doc-section details summary::before {
      content: '‚ñ∂';
      display: inline-block;
      transition: transform 0.2s;
      font-size: 0.8rem;
      color: var(--primary);
    }
    .doc-section details[open] summary::before {
      transform: rotate(90deg);
    }
    .doc-section details summary:hover {
      background: var(--accent);
    }
    .doc-section details .section-content {
      padding: 20px;
    }
    .doc-section details[open] summary {
      border-bottom: 1px solid var(--border);
    }
    .doc-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--accent);
      color: var(--primary);
      padding: 2px 10px;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-bottom: 8px;
    }
    .local-version-badge {
      background: #e0f2fe;
      color: #0369a1;
      padding: 8px 16px;
      margin: 16px 0;
      border-radius: 6px;
      border-left: 4px solid #0284c7;
      font-size: 0.9rem;
      font-weight: 500;
    }
    details {
      margin: 16px 0;
    }
    details summary {
      cursor: pointer;
      font-weight: 600;
      color: var(--primary);
      padding: 12px;
      background: var(--bg-light);
      border: 1px solid var(--border);
      border-radius: 6px;
      user-select: none;
    }
    details summary:hover {
      background: var(--accent);
    }
    details[open] summary {
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
    }
    details .collapsible-content {
      padding: 16px;
      border: 1px solid var(--border);
      border-top: none;
      border-radius: 0 0 6px 6px;
      margin-top: 0;
    }
    a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
    }
    a:hover { text-decoration: underline; }
</style>
</head>
<body>
  <div class="local-version-badge" style="background: #e0f2fe; color: #0369a1; padding: 8px 16px; margin: 16px; border-radius: 6px; border-left: 4px solid #0284c7; font-size: 0.9rem; font-weight: 500;">
      üìÑ Lokal version ‚Äì F√∂rb√§ttrat inneh√•ll
    </div>
  
    <section class="doc-section">
      <details open>
        <summary>Beskrivning av FGoal</summary>
        <div class="section-content">
<p>Automatic Credit Evaluation √§r en systemaktivitet d√§r systemet automatiskt bed√∂mer kreditv√§rdighet och aff√§rsm√∂jlighet f√∂r l√•neans√∂kningar. Processen syftar till att automatiskt utv√§rdera ans√∂kningar baserat p√• riskklassificering, prisinformation, amorteringsber√§kningar, hush√•llsaffordabilitet och kreditpolicyer f√∂r att avg√∂ra om ans√∂kan kan godk√§nnas automatiskt eller kr√§ver manuell granskning.</p>
      <p>Processen b√∂rjar med att systemet v√§ljer produkt via "Select product" business rule task. D√§refter h√§mtas prisinformation fr√•n "Pricing engine" datastore via "Fetch price" service task. Systemet ber√§knar sedan amortering via "Determine amortisation" business rule task. F√∂r varje stakeholder i ans√∂kan kontrollerar systemet om uppdaterad kreditinformation beh√∂vs via "Needs updated Credit information" gateway. Om uppdaterad information beh√∂vs, h√§mtas den fr√•n "Personal credit information source" datastore via "Fetch credit information" service task. F√∂r varje hush√•ll ber√§knar systemet hush√•llsaffordabilitet via "Calculate household affordabilty" service task (med data fr√•n "Stacc Affordability" datastore) och bed√∂mer sedan hush√•llet via "Evaluate household" business rule task. Systemet bed√∂mer √§ven stakeholders via "Evaluate stakeholders" business rule task. Efter att alla hush√•ll och stakeholders √§r bearbetade, h√§mtas riskklassificering fr√•n "Risk engine" datastore via "Fetch risk classification" service task. Systemet bed√∂mer sedan ans√∂kan via "Evaluate application" business rule task och slutligen bed√∂mer kreditpolicyer via "Evaluate credit policies" business rule task innan processen avslutas.</p>
      
      <h3>Anropningskontexter</h3>
      <p>Denna process anropas fr√•n flera st√§llen i Mortgage-processen:</p>
      <ul>
        <li><strong>Manual Credit Evaluation (mortgage-se-manual-credit-evaluation.bpmn):</strong> Efter manuell kreditevaluering n√§r automatisk kreditevaluering beh√∂vs som del av den manuella processen. Ny information: Resultat fr√•n manuell kreditevaluering och eventuella kompletteringar. Anropas via "Activity_1gzlxx4" call activity med called_element "credit-evaluation".</li>
        <li><strong>Mortgage Commitment - F√∂rsta utv√§rdering (mortgage-se-mortgage-commitment.bpmn):</strong> N√§r automatisk kreditevaluering beh√∂vs f√∂r f√∂rsta g√•ngen i mortgage commitment-processen. Ny information: Komplett ans√∂kningsinformation inklusive objekt, hush√•ll och stakeholders. Anropas via "credit-evaluation-1" call activity.</li>
        <li><strong>Mortgage Commitment - Andra utv√§rdering (mortgage-se-mortgage-commitment.bpmn):</strong> N√§r automatisk kreditevaluering beh√∂vs igen efter att objektinformation har uppdaterats. Ny information: Uppdaterad objektinformation fr√•n "Object information" call activity. Anropas via "credit-evaluation-2" call activity.</li>
        <li><strong>Object Control (mortgage-se-object-control.bpmn):</strong> N√§r automatisk kreditevaluering beh√∂vs efter att objektkontroll har genomf√∂rts och objektinformation har uppdaterats. Ny information: Uppdaterad objektinformation fr√•n "Object information" call activity efter objektkontroll. Anropas via "credit-evaluation-2" call activity med called_element "credit-evaluation".</li>
        <li><strong>Mortgage - Huvudprocessen (mortgage.bpmn):</strong> N√§r automatisk kreditevaluering beh√∂vs f√∂r f√∂rsta g√•ngen i huvudprocessen efter att Application-processen √§r slutf√∂rd. Ny information: Komplett ans√∂kningsinformation fr√•n Application-processen. Anropas via "credit-evaluation" call activity.</li>
      </ul>
        </div>
      </details>
    </section>
<section class="doc-section">
      <details>
        <summary>Processteg - Input</summary>
        <div class="section-content">
      <p>Automatic Credit Evaluation-processen startar n√§r:</p>
      <ul>
        <li><strong>Ans√∂kningsinformation √§r tillg√§nglig:</strong> All n√∂dv√§ndig information f√∂r kreditevaluering √§r samlad, inklusive produktval, objektinformation, hush√•llsinformation, stakeholder-information och ekonomiska data</li>
        <li><strong>Externa tj√§nster √§r tillg√§ngliga:</strong> "Pricing engine", "Risk engine", "Personal credit information source" och "Stacc Affordability" datastores m√•ste vara tillg√§ngliga f√∂r att h√§mta information</li>
        <li><strong>Processkontext:</strong> Automatic Credit Evaluation anropas via call activity. Alla relevanta processvariabler, inklusive ans√∂kningsdata, objektdata, hush√•llsdata och stakeholder-data, skickas med f√∂r att s√§kerst√§lla fullst√§ndig kontext</li>
      </ul>
      
      <h3>Kontextspecifika input-krav</h3>
      <ul>
        <li><strong>Manual Credit Evaluation:</strong> Manuell kreditevaluering √§r slutf√∂rd och resultat fr√•n manuell process √§r tillg√§ngliga. Eventuella kompletteringar fr√•n manuell process √§r tillg√§ngliga. Processen anropas via "Activity_1gzlxx4" call activity med called_element "credit-evaluation".</li>
        <li><strong>Mortgage Commitment - F√∂rsta utv√§rdering:</strong> Komplett ans√∂kningsinformation inklusive objekt, hush√•ll och stakeholders √§r tillg√§nglig. Detta √§r f√∂rsta g√•ngen automatisk kreditevaluering g√∂rs i mortgage commitment-processen. Processen anropas via "credit-evaluation-1" call activity.</li>
        <li><strong>Mortgage Commitment - Andra utv√§rdering:</strong> "Object information" call activity har slutf√∂rts och uppdaterad objektinformation √§r tillg√§nglig. Ny information: Uppdaterad objektinformation fr√•n "Object information" call activity. Processen anropas via "credit-evaluation-2" call activity.</li>
        <li><strong>Object Control:</strong> "Object information" call activity har slutf√∂rts efter objektkontroll och uppdaterad objektinformation √§r tillg√§nglig. Ny information: Uppdaterad objektinformation fr√•n "Object information" call activity efter objektkontroll. Processen anropas via "credit-evaluation-2" call activity med called_element "credit-evaluation".</li>
        <li><strong>Mortgage - Huvudprocessen:</strong> Application-processen √§r slutf√∂rd och komplett ans√∂kningsinformation √§r tillg√§nglig. Detta √§r f√∂rsta g√•ngen automatisk kreditevaluering g√∂rs i huvudprocessen. Processen anropas via "credit-evaluation" call activity.</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Processteg - Output</summary>
        <div class="section-content">
      <p>N√§r Automatic Credit Evaluation-processen √§r slutf√∂rd har f√∂ljande resultat uppn√•tts:</p>
      <ul>
        <li><strong>Kreditevaluering √§r slutf√∂rd:</strong> Systemet har automatiskt bed√∂mt kreditv√§rdighet och aff√§rsm√∂jlighet baserat p√• riskklassificering, prisinformation, amorteringsber√§kningar, hush√•llsaffordabilitet och kreditpolicyer</li>
        <li><strong>Riskklassificering √§r tillg√§nglig:</strong> Riskklassificering har h√§mtats fr√•n "Risk engine" datastore via "Fetch risk classification" service task och √§r tillg√§nglig f√∂r vidare bearbetning</li>
        <li><strong>Hush√•llsaffordabilitet √§r ber√§knad:</strong> F√∂r varje hush√•ll har systemet ber√§knat hush√•llsaffordabilitet via "Calculate household affordabilty" service task (med data fr√•n "Stacc Affordability" datastore) och bed√∂mt hush√•llet via "Evaluate household" business rule task</li>
        <li><strong>Stakeholder-bed√∂mning √§r slutf√∂rd:</strong> F√∂r varje stakeholder har systemet bed√∂mt stakeholder via "Evaluate stakeholders" business rule task, inklusive eventuell uppdaterad kreditinformation fr√•n "Personal credit information source" datastore</li>
        <li><strong>Kreditpolicybed√∂mning √§r slutf√∂rd:</strong> Systemet har bed√∂mt ans√∂kan mot kreditpolicyer via "Evaluate application" och "Evaluate credit policies" business rule tasks</li>
        <li><strong>Processen avslutas normalt:</strong> N√§r kreditevaluering √§r slutf√∂rd, avslutas processen normalt och anropande processen forts√§tter med n√§sta steg baserat p√• evalueringsresultatet</li>
      </ul>
      
      <h3>Kontextspecifika output-resultat</h3>
      <ul>
        <li><strong>Manual Credit Evaluation:</strong> Kreditevaluering returneras till Manual Credit Evaluation-processen via "Activity_1gzlxx4" call activity. Resultatet anv√§nds f√∂r att komplettera manuell kreditevaluering och kan p√•verka slutgiltigt beslut i manuell process.</li>
        <li><strong>Mortgage Commitment - F√∂rsta utv√§rdering:</strong> Kreditevaluering returneras till Mortgage Commitment-processen via "credit-evaluation-1" call activity. Resultatet anv√§nds f√∂r att avg√∂ra om mortgage commitment kan godk√§nnas eller om ytterligare utv√§rdering beh√∂vs.</li>
        <li><strong>Mortgage Commitment - Andra utv√§rdering:</strong> Uppdaterad kreditevaluering returneras till Mortgage Commitment-processen via "credit-evaluation-2" call activity. Resultatet anv√§nds f√∂r att avg√∂ra om mortgage commitment kan godk√§nnas baserat p√• uppdaterad objektinformation.</li>
        <li><strong>Object Control:</strong> Uppdaterad kreditevaluering returneras till Object Control-processen via "credit-evaluation-2" call activity. Resultatet anv√§nds f√∂r att avg√∂ra om √§ndringar kr√§ver omv√§rdering eller om processen kan forts√§tta.</li>
        <li><strong>Mortgage - Huvudprocessen:</strong> Kreditevaluering returneras till Mortgage-processen via "credit-evaluation" call activity. Resultatet anv√§nds f√∂r att avg√∂ra om ans√∂kan kan godk√§nnas automatiskt eller om manuell kreditevaluering kr√§vs via "Manual credit evaluation" call activity.</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Omfattning</summary>
        <div class="section-content">
      <p>Automatic Credit Evaluation-processen omfattar f√∂ljande huvudsteg och aktiviteter:</p>
      
      <h3>1. Produktval och priss√§ttning</h3>
      <ul>
        <li><strong>Select product (business rule task):</strong> Systemet v√§ljer produkt baserat p√• ans√∂kningsdata via aff√§rsregler</li>
        <li><strong>Fetch price (service task):</strong> Systemet h√§mtar prisinformation fr√•n "Pricing engine" datastore. Information sparas i datastoren f√∂r vidare anv√§ndning</li>
        <li><strong>Determine amortisation (business rule task):</strong> Systemet ber√§knar amortering baserat p√• produktval, prisinformation och ans√∂kningsdata via aff√§rsregler</li>
      </ul>

      <h3>2. Stakeholder-bearbetning (multi-instance loop)</h3>
      <ul>
        <li><strong>For each stakeholder (subprocess):</strong> Systemet bearbetar varje stakeholder i ans√∂kan:
          <ul>
            <li><strong>Needs updated Credit information (gateway):</strong> En beslutspunkt avg√∂r om uppdaterad kreditinformation beh√∂vs f√∂r stakeholder:
              <ul>
                <li><strong>Yes:</strong> Processen g√•r till "Fetch credit information" service task</li>
                <li><strong>No:</strong> Processen forts√§tter direkt till n√§sta steg</li>
              </ul>
            </li>
            <li><strong>Fetch credit information (service task):</strong> Om uppdaterad information beh√∂vs, h√§mtar systemet kreditinformation fr√•n "Personal credit information source" datastore. Information sparas i datastoren f√∂r vidare anv√§ndning</li>
          </ul>
        </li>
      </ul>

      <h3>3. Hush√•llsbearbetning (multi-instance loop)</h3>
      <ul>
        <li><strong>For each household (subprocess):</strong> Systemet bearbetar varje hush√•ll i ans√∂kan:
          <ul>
            <li><strong>Calculate household affordabilty (service task):</strong> Systemet ber√§knar hush√•llsaffordabilitet baserat p√• inkomst, utgifter, befintliga skulder och ekonomiska f√∂rpliktelser. Data h√§mtas fr√•n "Stacc Affordability" datastore och sparas i datastoren f√∂r vidare anv√§ndning</li>
            <li><strong>Evaluate household (business rule task):</strong> Systemet bed√∂mer hush√•llsaffordabilitet mot l√•ne- och policykriterier via aff√§rsregler f√∂r att avg√∂ra om hush√•llet uppfyller krav</li>
            <li><strong>Evaluate stakeholders (business rule task):</strong> Systemet bed√∂mer stakeholders i hush√•llet via aff√§rsregler</li>
          </ul>
        </li>
      </ul>

      <h3>4. Riskklassificering och bed√∂mning</h3>
      <ul>
        <li><strong>Fetch risk classification (service task):</strong> Systemet h√§mtar riskklassificering fr√•n "Risk engine" datastore. Riskklassificering baseras p√• kreditscore, ekonomiska data och ans√∂kningskarakt√§ristika. Information sparas i datastoren f√∂r vidare anv√§ndning</li>
        <li><strong>Evaluate application (business rule task):</strong> Systemet bed√∂mer ans√∂kan baserat p√• riskklassificering, hush√•llsaffordabilitet och stakeholder-bed√∂mningar via aff√§rsregler</li>
        <li><strong>Evaluate credit policies (business rule task):</strong> Systemet bed√∂mer ans√∂kan mot alla kreditpolicyer och l√•nekriterier via aff√§rsregler f√∂r att avg√∂ra om ans√∂kan kan godk√§nnas automatiskt eller kr√§ver manuell granskning</li>
      </ul>

      <h3>5. Avslut</h3>
      <ul>
        <li><strong>Processen avslutas normalt:</strong> N√§r kreditevaluering √§r slutf√∂rd, avslutas processen normalt och anropande processen forts√§tter med n√§sta steg baserat p√• evalueringsresultatet</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Avgr√§nsning</summary>
        <div class="section-content">
<ul>
        <li>Manuell kreditevaluering sker i "Manual Credit Evaluation"-processen, inte i denna subprocess</li>
        <li>Kreditbeslut (godk√§nnande/avslag) sker i "Credit Decision"-processen, inte i denna subprocess</li>
        <li>Denna subprocess fokuserar enbart p√• automatisk kreditevaluering, inte p√• manuell granskning eller slutgiltiga beslut</li>
        <li>Objektinformation h√§mtas i "Object Information"-processen, inte i denna subprocess</li>
        <li>Dokumentationshantering sker i andra subprocesser, inte i denna subprocess</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Beroenden</summary>
        <div class="section-content">
<ul>
        <li><strong>Pricing engine (datastore):</strong> F√∂r att h√§mta prisinformation via "Fetch price" service task</li>
        <li><strong>Risk engine (datastore):</strong> F√∂r att h√§mta riskklassificering via "Fetch risk classification" service task</li>
        <li><strong>Personal credit information source (datastore):</strong> F√∂r att h√§mta uppdaterad kreditinformation f√∂r stakeholders via "Fetch credit information" service task</li>
        <li><strong>Stacc Affordability (datastore):</strong> F√∂r att ber√§kna hush√•llsaffordabilitet via "Calculate household affordabilty" service task</li>
        <li><strong>Aff√§rsregelmotor (DMN):</strong> F√∂r att bed√∂ma produktval, amortering, hush√•llsaffordabilitet, stakeholder-bed√∂mning, ans√∂kan och kreditpolicyer via business rule tasks</li>
        <li><strong>Application-processen:</strong> F√∂r att tillhandah√•lla komplett ans√∂kningsinformation inklusive objekt, hush√•ll och stakeholders</li>
        <li><strong>Object Information-processen:</strong> F√∂r att tillhandah√•lla uppdaterad objektinformation n√§r processen anropas fr√•n Mortgage Commitment eller Object Control</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>BPMN - Process</summary>
        <div class="section-content">
      <p><a href="#/bpmn/mortgage-se-credit-evaluation.bpmn">Visa BPMN-processen f√∂r Automatic Credit Evaluation</a></p>
      
      <h3>Processfl√∂de - Steg f√∂r steg</h3>
      <ol>
        <li><strong>Start:</strong> Processen startar n√§r Automatic Credit Evaluation anropas fr√•n anropande processen (t.ex. Mortgage, Mortgage Commitment, Object Control, Manual Credit Evaluation) via call activity</li>
        <li><strong>Select product (business rule task):</strong> Systemet v√§ljer produkt baserat p√• ans√∂kningsdata via aff√§rsregler</li>
        <li><strong>Fetch price (service task):</strong> Systemet h√§mtar prisinformation fr√•n "Pricing engine" datastore</li>
        <li><strong>Determine amortisation (business rule task):</strong> Systemet ber√§knar amortering baserat p√• produktval, prisinformation och ans√∂kningsdata via aff√§rsregler</li>
        <li><strong>For each stakeholder (subprocess - multi-instance loop):</strong> Systemet bearbetar varje stakeholder:
          <ul>
            <li><strong>Needs updated Credit information (gateway):</strong> Avg√∂r om uppdaterad kreditinformation beh√∂vs:
              <ul>
                <li><strong>Yes:</strong> Processen g√•r till "Fetch credit information" service task som h√§mtar information fr√•n "Personal credit information source" datastore</li>
                <li><strong>No:</strong> Processen forts√§tter direkt till n√§sta steg</li>
              </ul>
            </li>
          </ul>
        </li>
        <li><strong>For each household (subprocess - multi-instance loop):</strong> Systemet bearbetar varje hush√•ll:
          <ul>
            <li><strong>Calculate household affordabilty (service task):</strong> Systemet ber√§knar hush√•llsaffordabilitet baserat p√• inkomst, utgifter, befintliga skulder och ekonomiska f√∂rpliktelser. Data h√§mtas fr√•n "Stacc Affordability" datastore</li>
            <li><strong>Evaluate household (business rule task):</strong> Systemet bed√∂mer hush√•llsaffordabilitet mot l√•ne- och policykriterier via aff√§rsregler</li>
            <li><strong>Evaluate stakeholders (business rule task):</strong> Systemet bed√∂mer stakeholders i hush√•llet via aff√§rsregler</li>
          </ul>
        </li>
        <li><strong>Fetch risk classification (service task):</strong> Systemet h√§mtar riskklassificering fr√•n "Risk engine" datastore</li>
        <li><strong>Evaluate application (business rule task):</strong> Systemet bed√∂mer ans√∂kan baserat p√• riskklassificering, hush√•llsaffordabilitet och stakeholder-bed√∂mningar via aff√§rsregler</li>
        <li><strong>Evaluate credit policies (business rule task):</strong> Systemet bed√∂mer ans√∂kan mot alla kreditpolicyer och l√•nekriterier via aff√§rsregler</li>
        <li><strong>Avslut:</strong> N√§r kreditevaluering √§r slutf√∂rd, avslutas processen normalt och anropande processen forts√§tter med n√§sta steg baserat p√• evalueringsresultatet</li>
      </ol>
      
      <h3>Anropningsst√§llen</h3>
      <p>Denna process anropas fr√•n f√∂ljande st√§llen:</p>
      <ul>
        <li><strong>Manual Credit Evaluation:</strong> Anropas fr√•n "mortgage-se-manual-credit-evaluation.bpmn" via "Activity_1gzlxx4" call activity med called_element "credit-evaluation". Efter manuell kreditevaluering n√§r automatisk kreditevaluering beh√∂vs som del av den manuella processen.</li>
        <li><strong>Mortgage Commitment - F√∂rsta utv√§rdering:</strong> Anropas fr√•n "mortgage-se-mortgage-commitment.bpmn" via "credit-evaluation-1" call activity. N√§r automatisk kreditevaluering beh√∂vs f√∂r f√∂rsta g√•ngen i mortgage commitment-processen.</li>
        <li><strong>Mortgage Commitment - Andra utv√§rdering:</strong> Anropas fr√•n "mortgage-se-mortgage-commitment.bpmn" via "credit-evaluation-2" call activity. N√§r automatisk kreditevaluering beh√∂vs igen efter att objektinformation har uppdaterats.</li>
        <li><strong>Object Control:</strong> Anropas fr√•n "mortgage-se-object-control.bpmn" via "credit-evaluation-2" call activity med called_element "credit-evaluation". N√§r automatisk kreditevaluering beh√∂vs efter att objektkontroll har genomf√∂rts och objektinformation har uppdaterats.</li>
        <li><strong>Mortgage - Huvudprocessen:</strong> Anropas fr√•n "mortgage.bpmn" via "credit-evaluation" call activity. N√§r automatisk kreditevaluering beh√∂vs f√∂r f√∂rsta g√•ngen i huvudprocessen efter att Application-processen √§r slutf√∂rd.</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Testgenerering</summary>
        <div class="section-content">
<p class="muted">Information f√∂r att generera automatiserade tester. Delar kan auto-genereras fr√•n processbeskrivningen, men kompletteras manuellt med implementation-specifik information (routes, locators, testdata).</p>

      <h3>Testscenarier</h3>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Namn</th>
            <th>Typ</th>
            <th>Persona</th>
            <th>Risk Level</th>
            <th>Assertion Type</th>
            <th>Outcome</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          
      <tr>
        <td><strong>S1</strong></td>
        <td>Lyckad kreditevaluering ‚Äì enkel ans√∂kan</td>
        <td>Happy</td>
        <td>system</td>
        <td>P0</td>
        <td>functional</td>
        <td><strong>Given:</strong> Automatic Credit Evaluation-processen startar. Ans√∂kan har 1 stakeholder, 1 hush√•ll. Kreditinformation beh√∂vs inte. Testdata: application-standard-credit-evaluation. <strong>When:</strong> "Select product" business rule task (select-product) v√§ljer produkt. "Fetch price" service task (fetch-price) h√§mtar priss√§ttning fr√•n Pricing engine. "Determine amortisation" business rule task (determine-amortisation) ber√§knar amortering. "For each stakeholder" multi-instance (loop-stakeholder): "Needs updated Credit information?" gateway (needs-updated-credit-information) = No. "For each household" multi-instance (loop-household): "Calculate household affordability" service task (calculate-household-affordability) ber√§knar affordability. "Fetch risk classification" service task (fetch-risk-classification) h√§mtar riskklassificering. "Evaluate application" business rule task (evaluate-application) utv√§rderar ans√∂kan. "Evaluate credit policies" business rule task (evaluate-credit-policies) utf√∂r policyutv√§rdering. <strong>Then:</strong> Alla steg lyckas. Processen avslutas normalt (process-end-event). Resultat returneras till anropande processen.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S2</strong></td>
        <td>Multi-stakeholder och multi-household ‚Äì komplex ans√∂kan</td>
        <td>Happy</td>
        <td>system</td>
        <td>P0</td>
        <td>functional</td>
        <td><strong>Given:</strong> Automatic Credit Evaluation-processen startar. Ans√∂kan har 3 stakeholders, 2 hush√•ll. 2 stakeholders beh√∂ver kreditinformation. Testdata: application-multiple-households. <strong>When:</strong> Produktval, priss√§ttning och amortering ber√§knas. "For each stakeholder" multi-instance bearbetar 3 stakeholders parallellt. F√∂r 2 stakeholders: "Needs updated Credit information?" gateway = Yes ‚Üí "Fetch credit information" service task (fetch-credit-information) h√§mtar fr√•n Personal credit information source. F√∂r 1 stakeholder: gateway = No. "For each household" multi-instance bearbetar 2 hush√•ll parallellt. Riskklassificering, ans√∂kningsutv√§rdering och policyutv√§rdering genomf√∂rs. <strong>Then:</strong> Alla stakeholders och hush√•ll bearbetas korrekt. Processen avslutas normalt (process-end-event).</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S3</strong></td>
        <td>Stakeholder beh√∂ver kreditinformation</td>
        <td>Happy</td>
        <td>system</td>
        <td>P1</td>
        <td>functional</td>
        <td><strong>Given:</strong> "For each stakeholder" multi-instance bearbetar stakeholders. En stakeholder beh√∂ver uppdaterad kreditinformation. Testdata: application-missing-credit-info. <strong>When:</strong> "Needs updated Credit information?" gateway (needs-updated-credit-information) = Yes. "Fetch credit information" service task (fetch-credit-information) h√§mtar fr√•n Personal credit information source data store. Gateway_1r0yv3x samlar fl√∂den. <strong>Then:</strong> Kreditinformation h√§mtas och sparas. Processen forts√§tter till n√§sta steg.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S4</strong></td>
        <td>Stakeholder beh√∂ver inte kreditinformation</td>
        <td>Happy</td>
        <td>system</td>
        <td>P1</td>
        <td>functional</td>
        <td><strong>Given:</strong> "For each stakeholder" multi-instance bearbetar stakeholders. En stakeholder beh√∂ver inte uppdaterad kreditinformation. Testdata: application-standard-credit-evaluation. <strong>When:</strong> "Needs updated Credit information?" gateway (needs-updated-credit-information) = No. Fl√∂det g√•r direkt till Gateway_1r0yv3x. <strong>Then:</strong> "Fetch credit information" service task hoppas √∂ver. Processen forts√§tter till n√§sta steg.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S5</strong></td>
        <td>Fetch price timeout ‚Äì retry lyckas</td>
        <td>Edge</td>
        <td>system</td>
        <td>P1</td>
        <td>functional</td>
        <td><strong>Given:</strong> Automatic Credit Evaluation-processen startar. Pricing engine svarar l√•ngsamt. Testdata: credit-evaluation-price-timeout. <strong>When:</strong> "Fetch price" service task (fetch-price) timeout (30 sekunder). Retry-logik aktiveras (max 2 f√∂rs√∂k, exponential backoff). <strong>Then:</strong> Efter retry lyckas h√§mtning. Priss√§ttningsdata sparas till Pricing engine data store. Processen forts√§tter.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S6</strong></td>
        <td>Fetch credit information timeout ‚Äì retry lyckas</td>
        <td>Edge</td>
        <td>system</td>
        <td>P1</td>
        <td>functional</td>
        <td><strong>Given:</strong> "For each stakeholder" multi-instance bearbetar stakeholders. En stakeholder beh√∂ver kreditinformation. Personal credit information source svarar l√•ngsamt. Testdata: credit-evaluation-credit-info-timeout. <strong>When:</strong> "Fetch credit information" service task (fetch-credit-information) timeout (30 sekunder). Retry-logik aktiveras (max 2 f√∂rs√∂k). <strong>Then:</strong> Efter retry lyckas h√§mtning. Kreditinformation sparas till Personal credit information source data store. Processen forts√§tter.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S7</strong></td>
        <td>Calculate household affordability timeout ‚Äì retry lyckas</td>
        <td>Edge</td>
        <td>system</td>
        <td>P1</td>
        <td>functional</td>
        <td><strong>Given:</strong> "For each household" multi-instance bearbetar hush√•ll. KALP-systemet (Stacc Affordability) svarar l√•ngsamt. Testdata: credit-evaluation-affordability-timeout. <strong>When:</strong> "Calculate household affordability" service task (calculate-household-affordability) timeout (60 sekunder). Retry-logik aktiveras (max 2 f√∂rs√∂k, exponential backoff). <strong>Then:</strong> Efter retry lyckas ber√§kning. Affordability-metrics sparas till Stacc Affordability data store. Processen forts√§tter.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S8</strong></td>
        <td>Fetch risk classification timeout ‚Äì retry lyckas</td>
        <td>Edge</td>
        <td>system</td>
        <td>P1</td>
        <td>functional</td>
        <td><strong>Given:</strong> Alla stakeholders och hush√•ll √§r bearbetade. Risk engine svarar l√•ngsamt. Testdata: credit-evaluation-risk-timeout. <strong>When:</strong> "Fetch risk classification" service task (fetch-risk-classification) timeout (30 sekunder). Retry-logik aktiveras (max 2 f√∂rs√∂k, exponential backoff). <strong>Then:</strong> Efter retry lyckas h√§mtning. Riskklassificering sparas till Risk engine data store. Processen forts√§tter med ans√∂kningsutv√§rdering.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S9</strong></td>
        <td>Service timeout ‚Äì alla retry misslyckas</td>
        <td>Error</td>
        <td>system</td>
        <td>P2</td>
        <td>functional</td>
        <td><strong>Given:</strong> Automatic Credit Evaluation-processen startar. Extern tj√§nst svarar inte. Testdata: credit-evaluation-service-failure. <strong>When:</strong> Service task (t.ex. fetch-price, fetch-credit-information, calculate-household-affordability, fetch-risk-classification) timeout. Retry-logik aktiveras (max 2 f√∂rs√∂k). Alla f√∂rs√∂k misslyckas. <strong>Then:</strong> Systemet returnerar error code (400, 500, 503). Processen hanterar felet och signalerar till anropande processen.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S10</strong></td>
        <td>H√∂g risk ‚Äì kr√§ver manuell bed√∂mning</td>
        <td>Edge</td>
        <td>system</td>
        <td>P1</td>
        <td>functional</td>
        <td><strong>Given:</strong> Alla steg genomf√∂rs framg√•ngsrikt. Ans√∂kan har h√∂g risk. Testdata: application-high-risk-credit-evaluation. <strong>When:</strong> "Fetch risk classification" service task returnerar h√∂g risk. "Evaluate application" business rule task identifierar h√∂g risk. "Evaluate credit policies" business rule task (evaluate-credit-policies) identifierar att manuell bed√∂mning kr√§vs. <strong>Then:</strong> Evalueringsresultat indikerar att manuell bed√∂mning kr√§vs. Processen avslutas normalt (process-end-event). Resultat returneras till anropande processen f√∂r manuell granskning.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S11</strong></td>
        <td>Saknad data ‚Äì data saknas f√∂r utv√§rdering</td>
        <td>Error</td>
        <td>system</td>
        <td>P2</td>
        <td>functional</td>
        <td><strong>Given:</strong> Automatic Credit Evaluation-processen startar. N√∂dv√§ndig data saknas (t.ex. ans√∂kningsdata, kunddata). Testdata: credit-evaluation-missing-data. <strong>When:</strong> Business rule task eller service task f√∂rs√∂ker anv√§nda saknad data. <strong>Then:</strong> Systemet returnerar error code 400 (Ogiltig input-data). Processen hanterar felet och signalerar till anropande processen.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
        </tbody>
      </table>

      <h3>Testdata-referenser</h3>
      <p class="muted">Testdata-profilerna som anv√§nds i scenarion. Definiera faktiska testdata i separat testdata-katalog.</p>
      <ul>
      <li><strong>application-standard-credit-evaluation</strong>: Standard ans√∂kan med god kreditv√§rdighet: riskklassificering l√•g, hush√•llsaffordabilitet god, stakeholders godk√§nda, kreditpolicyer uppfyllda. F√∂rv√§ntat resultat: godk√§nd.</li>
      <li><strong>application-high-risk-credit-evaluation</strong>: Ans√∂kan med h√∂g risk: riskklassificering h√∂g, hush√•llsaffordabilitet l√•g, stakeholders med d√•lig kreditv√§rdighet. F√∂rv√§ntat resultat: avvisad eller kr√§ver manuell bed√∂mning.</li>
      <li><strong>application-missing-credit-info</strong>: Ans√∂kan d√§r uppdaterad kreditinformation beh√∂vs f√∂r en stakeholder. Systemet h√§mtar information fr√•n "Personal credit information source" datastore.</li>
      <li><strong>application-multiple-households</strong>: Ans√∂kan med flera hush√•ll och stakeholders. Varje hush√•ll och stakeholder bed√∂ms individuellt via multi-instance loops.</li>
      </ul>

      <h3>Implementation Mapping</h3>
      <p class="muted">Mappning mellan BPMN-aktiviteter och faktisk implementation (routes, endpoints, locators).</p>
      <table>
        <thead>
          <tr>
            <th>BPMN Aktivitet</th>
            <th>Type</th>
            <th>Route/Endpoint</th>
            <th>Method</th>
            <th>Base URL</th>
            <th>Kommentar</th>
          </tr>
        </thead>
        <tbody>
      <tr>
        <td>start-event (Start event)</td>
        <td>Event</td>
        <td>/api/process/credit-evaluation/start</td>
        <td>POST</td>
        <td>${BASE_URL}</td>
        <td>Startar Credit Evaluation-processen n√§r anropas fr√•n Mortgage commitment eller Offer-processen</td>
      </tr>
      <tr>
        <td>select-product (Business Rule Task)</td>
        <td>Business Rule Task</td>
        <td>/api/dmn/select-product</td>
        <td>POST</td>
        <td>${BASE_URL}</td>
        <td>V√§ljer produkt baserat p√• ans√∂kningsdata via DMN. Timeout: 10 sekunder</td>
      </tr>
      <tr>
        <td>fetch-price (Service Task)</td>
        <td>Service Task</td>
        <td>/api/pricing/price</td>
        <td>POST</td>
        <td>${BASE_URL}</td>
        <td>H√§mtar pris fr√•n "Pricing engine" datastore. Timeout: 30 sekunder. Retry: 2 f√∂rs√∂k</td>
      </tr>
      <tr>
        <td>determine-amortisation (Business Rule Task)</td>
        <td>Business Rule Task</td>
        <td>/api/dmn/determine-amortisation</td>
        <td>POST</td>
        <td>${BASE_URL}</td>
        <td>Best√§mmer amortering via DMN. Timeout: 10 sekunder</td>
      </tr>
      <tr>
        <td>loop-household (Subprocess - Multi-instance)</td>
        <td>Subprocess</td>
        <td>-</td>
        <td>-</td>
        <td>-</td>
        <td>Multi-instance subprocess som k√∂rs f√∂r varje hush√•ll. Inneh√•ller: Calculate household affordability, Evaluate household</td>
      </tr>
      <tr>
        <td>calculate-household-affordability (Service Task)</td>
        <td>Service Task</td>
        <td>/api/stacc/affordability</td>
        <td>POST</td>
        <td>${BASE_URL}</td>
        <td>Ber√§knar hush√•llsaffordabilitet via Stacc Affordability API. Timeout: 60 sekunder. Retry: 2 f√∂rs√∂k</td>
      </tr>
      <tr>
        <td>evaluate-household (Business Rule Task)</td>
        <td>Business Rule Task</td>
        <td>/api/dmn/evaluate-household</td>
        <td>POST</td>
        <td>${BASE_URL}</td>
        <td>Utv√§rderar hush√•ll mot aff√§rsregler via DMN. Timeout: 10 sekunder</td>
      </tr>
      <tr>
        <td>loop-stakeholder (Subprocess - Multi-instance)</td>
        <td>Subprocess</td>
        <td>-</td>
        <td>-</td>
        <td>-</td>
        <td>Multi-instance subprocess som k√∂rs f√∂r varje stakeholder. Inneh√•ller: Needs updated Credit information?, Fetch credit information, Evaluate stakeholders</td>
      </tr>
      <tr>
        <td>needs-updated-credit-information (Gateway)</td>
        <td>Gateway</td>
        <td>/api/process/credit-evaluation/check-credit-info</td>
        <td>POST</td>
        <td>${BASE_URL}</td>
        <td>Kontrollerar om uppdaterad kreditinformation beh√∂vs f√∂r stakeholder</td>
      </tr>
      <tr>
        <td>fetch-credit-information (Service Task)</td>
        <td>Service Task</td>
        <td>/api/credit/personal-information</td>
        <td>GET</td>
        <td>${BASE_URL}</td>
        <td>H√§mtar kreditinformation fr√•n "Personal credit information source" datastore. Timeout: 30 sekunder</td>
      </tr>
      <tr>
        <td>evaluate-stakeholders (Business Rule Task)</td>
        <td>Business Rule Task</td>
        <td>/api/dmn/evaluate-stakeholders</td>
        <td>POST</td>
        <td>${BASE_URL}</td>
        <td>Utv√§rderar stakeholders mot aff√§rsregler via DMN. Timeout: 10 sekunder</td>
      </tr>
      <tr>
        <td>fetch-risk-classification (Service Task)</td>
        <td>Service Task</td>
        <td>/api/risk/classification</td>
        <td>POST</td>
        <td>${BASE_URL}</td>
        <td>H√§mtar riskklassificering fr√•n "Risk engine" datastore. Timeout: 30 sekunder. Retry: 2 f√∂rs√∂k</td>
      </tr>
      <tr>
        <td>evaluate-application (Business Rule Task)</td>
        <td>Business Rule Task</td>
        <td>/api/dmn/evaluate-application</td>
        <td>POST</td>
        <td>${BASE_URL}</td>
        <td>Utv√§rderar ans√∂kan mot aff√§rsregler via DMN. Timeout: 10 sekunder</td>
      </tr>
      <tr>
        <td>evaluate-credit-policies (Business Rule Task)</td>
        <td>Business Rule Task</td>
        <td>/api/dmn/evaluate-credit-policies</td>
        <td>POST</td>
        <td>${BASE_URL}</td>
        <td>Utv√§rderar ans√∂kan mot kreditpolicyer via DMN. Timeout: 10 sekunder</td>
      </tr>
      <tr>
        <td>process-end-event (End event)</td>
        <td>Event</td>
        <td>/api/process/credit-evaluation/complete</td>
        <td>POST</td>
        <td>${BASE_URL}</td>
        <td>Avslutar Credit Evaluation-processen normalt med evalueringsresultat</td>
      </tr>
      <tr>
        <td>Credit Evaluation (call activity)</td>
        <td>Call Activity</td>
        <td>/application/credit-evaluation</td>
        <td>GET</td>
        <td>${BASE_URL}</td>
        <td>UI-entry point f√∂r Credit Evaluation-processen. Anropas fr√•n Mortgage commitment eller Offer-processen</td>
      </tr>
        </tbody>
      </table>
      
      <h4>Datastores</h4>
      <ul>
        <li><strong>pricing_engine</strong>: Databas-tabell eller extern datak√§lla som lagrar prisinformation fr√•n Pricing engine</li>
        <li><strong>risk_engine</strong>: Databas-tabell eller extern datak√§lla som lagrar riskklassificering fr√•n Risk engine</li>
        <li><strong>personal_credit_information_source</strong>: Databas-tabell eller extern datak√§lla som lagrar kreditinformation f√∂r stakeholders</li>
        <li><strong>credit_evaluation_results</strong>: Databas-tabell som lagrar evalueringsresultat (riskklassificering, affordability, policy-evaluering)</li>
      </ul>
        </div>
      </details>
    </section>
    <section class="doc-section">
      <details>
        <summary>Effekt</summary>
        <div class="section-content">
<p class="muted">F√∂rv√§ntad aff√§rseffekt som uppn√•s med feature goalet.</p>
      
      <h3>Automatiserad kreditevaluering</h3>
      <p>Genom automatisk kreditevaluering baserat p√• riskklassificering, prisinformation, amorteringsber√§kningar, hush√•llsaffordabilitet och kreditpolicyer kan systemet snabbt bed√∂ma om ans√∂kan kan godk√§nnas automatiskt eller kr√§ver manuell granskning. F√∂r ans√∂kningar som automatiskt godk√§nns kan processen forts√§tta direkt, vilket kan minska handl√§ggningstid med upp till 60-70% j√§mf√∂rt med manuell process. Endast ans√∂kningar som kr√§ver manuell bed√∂mning dirigeras till handl√§ggare.</p>
      
      <h3>Konsistent evalueringsprocess</h3>
      <p>Genom att anv√§nda samma automatiska kreditevaluering f√∂r alla ans√∂kningar (oavsett var processen anropas fr√•n) s√§kerst√§lls konsistent evalueringsprocess. Detta kan minska risken f√∂r inkonsistenta bed√∂mningar med upp till 40-50% och f√∂rb√§ttra kvaliteten p√• beslutsunderlaget.</p>
      
      <h3>√Öteranv√§ndbar process</h3>
      <p>Genom att Automatic Credit Evaluation √§r en √•teranv√§ndbar call activity som kan anropas fr√•n flera st√§llen (t.ex. Mortgage, Mortgage Commitment, Object Control, Manual Credit Evaluation) elimineras duplicerad logik och s√§kerst√§lls konsistent evalueringsprocess. Detta kan minska underh√•llskostnader med upp till 30-40% och f√∂rb√§ttra systemets √∂vergripande kvalitet.</p>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>User stories</summary>
        <div class="section-content">
<p class="muted">Relevanta och realistiska user stories som kan kopplas till feature goalet.</p>
      
      <h3>Systemperspektiv</h3>
      <ul>
        <li><strong>Som system</strong> vill jag automatiskt v√§lja produkt baserat p√• ans√∂kningsdata via "Select product" business rule task <strong>s√• att</strong> r√§tt produkt v√§ljs f√∂r ans√∂kan. <em>Acceptanskriterier: Systemet ska automatiskt v√§lja produkt baserat p√• ans√∂kningsdata och aff√§rsregler, och visa tydligt vilken produkt som valts.</em></li>
        <li><strong>Som system</strong> vill jag automatiskt h√§mta prisinformation fr√•n "Pricing engine" via "Fetch price" service task <strong>s√• att</strong> priss√§ttning √§r korrekt och tillg√§nglig. <em>Acceptanskriterier: Systemet ska automatiskt h√§mta prisinformation fr√•n "Pricing engine" datastore och spara data f√∂r vidare anv√§ndning.</em></li>
        <li><strong>Som system</strong> vill jag automatiskt ber√§kna amortering via "Determine amortisation" business rule task <strong>s√• att</strong> amorteringsber√§kning g√∂rs korrekt. <em>Acceptanskriterier: Systemet ska automatiskt ber√§kna amortering baserat p√• produktval, prisinformation och ans√∂kningsdata.</em></li>
        <li><strong>Som system</strong> vill jag automatiskt bearbeta alla stakeholders via "For each stakeholder" multi-instance subprocess <strong>s√• att</strong> alla stakeholders bearbetas korrekt. <em>Acceptanskriterier: Systemet ska automatiskt bearbeta alla stakeholders i ans√∂kan, avg√∂ra om uppdaterad kreditinformation beh√∂vs via "Needs updated Credit information" gateway, och h√§mta kreditinformation om n√∂dv√§ndigt.</em></li>
        <li><strong>Som system</strong> vill jag automatiskt bearbeta alla hush√•ll via "For each household" multi-instance subprocess <strong>s√• att</strong> alla hush√•ll bearbetas korrekt. <em>Acceptanskriterier: Systemet ska automatiskt bearbeta alla hush√•ll i ans√∂kan, ber√§kna affordability via "Calculate household affordabilty" service task, och utv√§rdera hush√•ll och stakeholders mot aff√§rsregler.</em></li>
        <li><strong>Som system</strong> vill jag automatiskt h√§mta riskklassificering fr√•n "Risk engine" via "Fetch risk classification" service task <strong>s√• att</strong> riskklassificering √§r korrekt och tillg√§nglig. <em>Acceptanskriterier: Systemet ska automatiskt h√§mta riskklassificering fr√•n "Risk engine" datastore och spara data f√∂r vidare anv√§ndning.</em></li>
        <li><strong>Som system</strong> vill jag automatiskt bed√∂ma ans√∂kan via "Evaluate application" business rule task <strong>s√• att</strong> ans√∂kan bed√∂ms korrekt baserat p√• riskklassificering och hush√•llsaffordabilitet. <em>Acceptanskriterier: Systemet ska automatiskt bed√∂ma ans√∂kan baserat p√• riskklassificering, hush√•llsaffordabilitet och stakeholder-bed√∂mningar.</em></li>
        <li><strong>Som system</strong> vill jag automatiskt utv√§rdera ans√∂kan mot kreditpolicyer via "Evaluate credit policies" business rule task <strong>s√• att</strong> policyutv√§rdering g√∂rs korrekt. <em>Acceptanskriterier: Systemet ska automatiskt utv√§rdera ans√∂kan mot alla kreditpolicyer och l√•nekriterier, och avg√∂ra om ans√∂kan kan godk√§nnas automatiskt eller kr√§ver manuell granskning.</em></li>
      </ul>
      
      <h3>Handl√§ggarperspektiv</h3>
      <ul>
        <li><strong>Som handl√§ggare</strong> vill jag att systemet automatiskt bed√∂mer kreditv√§rdighet och aff√§rsm√∂jlighet <strong>s√• att</strong> jag endast beh√∂ver granska ans√∂kningar som kr√§ver manuell bed√∂mning, vilket sparar tid. <em>Acceptanskriterier: Systemet ska automatiskt bed√∂ma ans√∂kan via alla steg i processen, och endast ans√∂kningar som kr√§ver manuell bed√∂mning ska dirigeras till handl√§ggare.</em></li>
        <li><strong>Som handl√§ggare</strong> vill jag att systemet automatiskt bearbetar alla stakeholders och hush√•ll <strong>s√• att</strong> jag inte beh√∂ver manuellt bearbeta varje stakeholder och hush√•ll. <em>Acceptanskriterier: Systemet ska automatiskt bearbeta alla stakeholders och hush√•ll i ans√∂kan, och visa tydligt vilka stakeholders och hush√•ll som har bearbetats och vilka resultat som har uppn√•tts.</em></li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Acceptanskriterier</summary>
        <div class="section-content">
<p class="muted">Relevanta och realistiska acceptanskriterier som kan kopplas till feature goalet.</p>
      
      <h3>Produktval och priss√§ttning</h3>
      <ul>
        <li>"Select product" business rule task ska korrekt v√§lja produkt baserat p√• ans√∂kningsdata via aff√§rsregler</li>
        <li>"Fetch price" service task ska automatiskt h√§mta prisinformation fr√•n "Pricing engine" datastore. Information ska sparas i datastoren f√∂r vidare anv√§ndning</li>
        <li>"Determine amortisation" business rule task ska korrekt ber√§kna amortering baserat p√• produktval, prisinformation och ans√∂kningsdata via aff√§rsregler</li>
        <li><strong>Tekniska krav:</strong>
          <ul>
            <li>Timeout f√∂r "Select product" (DMN): 10 sekunder</li>
            <li>Timeout f√∂r "Fetch price": 30 sekunder, Retry: 2 f√∂rs√∂k med exponential backoff (5s, 10s)</li>
            <li>Timeout f√∂r "Determine amortisation" (DMN): 10 sekunder</li>
            <li>Error codes: 400 (Ogiltig input-data), 500 (Serverfel), 503 (Pricing engine otillg√§ngligt)</li>
          </ul>
        </li>
      </ul>
      
      <h3>Stakeholder-bearbetning</h3>
      <ul>
        <li>"For each stakeholder" subprocess ska korrekt bearbeta varje stakeholder i ans√∂kan via multi-instance loop</li>
        <li>"Needs updated Credit information" gateway ska korrekt avg√∂ra om uppdaterad kreditinformation beh√∂vs f√∂r stakeholder. Om "Yes", ska processen g√• till "Fetch credit information" service task. Om "No", ska processen forts√§tta direkt till n√§sta steg</li>
        <li>"Fetch credit information" service task ska automatiskt h√§mta kreditinformation fr√•n "Personal credit information source" datastore n√§r det beh√∂vs. Information ska sparas i datastoren f√∂r vidare anv√§ndning</li>
      </ul>
      
      <h3>Hush√•llsbearbetning</h3>
      <ul>
        <li>"For each household" subprocess ska korrekt bearbeta varje hush√•ll i ans√∂kan via multi-instance loop</li>
        <li>"Calculate household affordabilty" service task ska automatiskt ber√§kna hush√•llsaffordabilitet baserat p√• inkomst, utgifter, befintliga skulder och ekonomiska f√∂rpliktelser. Data ska h√§mtas fr√•n "Stacc Affordability" datastore och sparas i datastoren f√∂r vidare anv√§ndning</li>
        <li>"Evaluate household" business rule task ska korrekt bed√∂ma hush√•llsaffordabilitet mot l√•ne- och policykriterier via aff√§rsregler</li>
        <li>"Evaluate stakeholders" business rule task ska korrekt bed√∂ma stakeholders i hush√•llet via aff√§rsregler</li>
        <li><strong>Tekniska krav:</strong>
          <ul>
            <li>Timeout f√∂r "Calculate household affordability" (Stacc API): 60 sekunder, Retry: 2 f√∂rs√∂k med exponential backoff (10s, 20s)</li>
            <li>Timeout f√∂r "Evaluate household" (DMN): 10 sekunder</li>
            <li>Timeout f√∂r "Evaluate stakeholders" (DMN): 10 sekunder</li>
            <li>Error codes: 400 (Ogiltig hush√•llsdata), 500 (Serverfel), 503 (Stacc Affordability otillg√§ngligt)</li>
          </ul>
        </li>
      </ul>
      
      <h3>Riskklassificering och bed√∂mning</h3>
      <ul>
        <li>"Fetch risk classification" service task ska automatiskt h√§mta riskklassificering fr√•n "Risk engine" datastore. Riskklassificering ska baseras p√• kreditscore, ekonomiska data och ans√∂kningskarakt√§ristika. Information ska sparas i datastoren f√∂r vidare anv√§ndning</li>
        <li>"Evaluate application" business rule task ska korrekt bed√∂ma ans√∂kan baserat p√• riskklassificering, hush√•llsaffordabilitet och stakeholder-bed√∂mningar via aff√§rsregler</li>
        <li>"Evaluate credit policies" business rule task ska korrekt bed√∂ma ans√∂kan mot alla kreditpolicyer och l√•nekriterier via aff√§rsregler f√∂r att avg√∂ra om ans√∂kan kan godk√§nnas automatiskt eller kr√§ver manuell granskning</li>
        <li><strong>Tekniska krav:</strong>
          <ul>
            <li>Timeout f√∂r "Fetch risk classification": 30 sekunder, Retry: 2 f√∂rs√∂k med exponential backoff (5s, 10s)</li>
            <li>Timeout f√∂r "Evaluate application" (DMN): 10 sekunder</li>
            <li>Timeout f√∂r "Evaluate credit policies" (DMN): 10 sekunder</li>
            <li>Error codes: 400 (Ogiltig ans√∂kningsdata), 500 (Serverfel), 503 (Risk engine otillg√§ngligt)</li>
            <li>Alla evalueringsresultat m√•ste sparas i datastore innan processen avslutas</li>
          </ul>
        </li>
      </ul>
      
      <h3>Integration med anropande processer</h3>
      <ul>
        <li>Credit Evaluation-processen ska kunna anropas fr√•n flera st√§llen (Mortgage, Mortgage Commitment, Object Control, Manual Credit Evaluation) via call activities</li>
        <li>N√§r Credit Evaluation-processen avslutas normalt, ska evalueringsresultat returneras till anropande processen f√∂r vidare bearbetning</li>
        <li><strong>Tekniska krav:</strong>
          <ul>
            <li>Skalbarhet: Processen ska kunna hantera minst 20 parallella evalueringsinstanser</li>
            <li>Prestanda: Genomsnittlig bearbetningstid per evaluering: < 2 minuter (exklusive anv√§ndarinteraktion, endast systemtasks)</li>
            <li>S√§kerhet: Alla API-anrop m√•ste autentiseras och auktoriseras</li>
            <li>Compliance: Alla data m√•ste f√∂lja GDPR-krav (dataminimering, r√§tt att radera)</li>
            <li>Error handling: Om externa tj√§nster misslyckas, logga fel och f√∂rs√∂k igen (max 2 f√∂rs√∂k) innan processen avbryts eller forts√§tter med partiell data</li>
          </ul>
        </li>
      </ul>
      </ul>
      
      <h3>Processfl√∂de och avslut</h3>
      <ul>
        <li>N√§r kreditevaluering √§r slutf√∂rd, ska processen avslutas normalt och anropande processen forts√§tta med n√§sta steg baserat p√• evalueringsresultatet</li>
        <li>Alla processvariabler ska skickas med n√§r Automatic Credit Evaluation anropas fr√•n anropande processen f√∂r att s√§kerst√§lla fullst√§ndig kontext</li>
        <li>Evalueringsresultatet ska korrekt sparas och vara tillg√§ngligt f√∂r anropande processen</li>
      </ul>
      
      <h3>Felhantering</h3>
      <ul>
        <li>Om externa tj√§nster ("Pricing engine", "Risk engine", "Personal credit information source" eller "Stacc Affordability") inte √§r tillg√§ngliga, ska processen hantera felet p√• ett tydligt s√§tt (t.ex. via error event eller retry-mekanismer) och signalera till anropande processen</li>
        <li>Om evalueringen misslyckas, ska processen hantera felet p√• ett tydligt s√§tt och signalera till anropande processen</li>
      </ul>
        </div>
      </details>
    </section>
      </body>
</html>

