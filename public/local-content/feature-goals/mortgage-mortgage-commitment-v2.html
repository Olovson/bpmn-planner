<!DOCTYPE html>
<html lang="sv">
<head>
  <meta name="x-generation-source" content="local-fallback" />
  <meta name="x-feature-goal-template-version" content="v2" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mortgage commitment</title>
  <style>
    :root {
      --primary: #1d4ed8;
      --text-strong: #0f172a;
      --text-muted: #64748b;
      --border: #e2e8f0;
      --accent: #e0e7ff;
      --bg-light: #f8f9fa;
    }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      margin: 0;
      padding: 24px;
      background: #ffffff;
      color: var(--text-strong);
      line-height: 1.6;
      max-width: 1200px;
      margin: 0 auto;
    }
    h1 {
      font-size: 2rem;
      margin: 0 0 32px;
      border-bottom: 2px solid var(--border);
      padding-bottom: 12px;
      color: var(--text-strong);
    }
    h2 {
      color: var(--primary);
      margin: 0;
      font-size: 1.5rem;
    }
    h3 {
      color: var(--text-strong);
      margin: 32px 0 12px;
      font-size: 1.2rem;
    }
    p { margin: 0 0 12px; }
    ul {
      padding-left: 24px;
      margin: 0 0 16px;
    }
    li { margin-bottom: 8px; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
      background: white;
      border: 1px solid var(--border);
      border-radius: 6px;
      overflow: hidden;
    }
    table th,
    table td {
      border-bottom: 1px solid var(--border);
      padding: 12px;
      text-align: left;
    }
    table th {
      background: var(--accent);
      color: var(--primary);
      font-weight: 600;
    }
    table tr:last-child td {
      border-bottom: none;
    }
    .muted {
      color: var(--text-muted);
      font-size: 0.9rem;
      font-style: italic;
    }
    .card {
      background: var(--bg-light);
      padding: 20px;
      border-radius: 8px;
      margin: 16px 0;
      border-left: 4px solid var(--primary);
    }
    .doc-section {
      margin-bottom: 16px;
      background: white;
      border: 1px solid var(--border);
      border-radius: 8px;
      overflow: hidden;
    }
    .doc-section details {
      margin: 0;
    }
    .doc-section details summary {
      cursor: pointer;
      font-weight: 600;
      color: var(--primary);
      padding: 16px 20px;
      background: var(--bg-light);
      border-bottom: 1px solid var(--border);
      user-select: none;
      font-size: 1.5rem;
      list-style: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .doc-section details summary::-webkit-details-marker {
      display: none;
    }
    .doc-section details summary::before {
      content: '‚ñ∂';
      display: inline-block;
      transition: transform 0.2s;
      font-size: 0.8rem;
      color: var(--primary);
    }
    .doc-section details[open] summary::before {
      transform: rotate(90deg);
    }
    .doc-section details summary:hover {
      background: var(--accent);
    }
    .doc-section details .section-content {
      padding: 20px;
    }
    .doc-section details[open] summary {
      border-bottom: 1px solid var(--border);
    }
    .doc-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--accent);
      color: var(--primary);
      padding: 2px 10px;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-bottom: 8px;
    }
    .local-version-badge {
      background: #e0f2fe;
      color: #0369a1;
      padding: 8px 16px;
      margin: 16px 0;
      border-radius: 6px;
      border-left: 4px solid #0284c7;
      font-size: 0.9rem;
      font-weight: 500;
    }
    .llm-fallback-banner {
      padding: 8px 12px;
      margin-bottom: 16px;
      border-radius: 6px;
      background-color: #fefce8;
      color: #854d0e;
      border: 1px solid #fef9c3;
      font-size: 0.85rem;
    }
    .llm-fallback-badge {
      display: inline-block;
      padding: 4px 8px;
      margin-bottom: 12px;
      border-radius: 4px;
      background-color: #fff3cd;
      color: #856404;
      border: 1px solid #ffeeba;
      font-size: 0.9rem;
      font-weight: 600;
    }
    .llm-fallback-details {
      font-size: 0.8rem;
      color: #4b5563;
      margin-bottom: 16px;
      white-space: pre-wrap;
    }
    .llm-fallback-local-note {
      font-size: 0.8rem;
      color: #2563eb;
      margin-bottom: 16px;
    }
    details {
      margin: 16px 0;
    }
    details summary {
      cursor: pointer;
      font-weight: 600;
      color: var(--primary);
      padding: 12px;
      background: var(--bg-light);
      border: 1px solid var(--border);
      border-radius: 6px;
      user-select: none;
    }
    details summary:hover {
      background: var(--accent);
    }
    details[open] summary {
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
    }
    details .collapsible-content {
      padding: 16px;
      border: 1px solid var(--border);
      border-top: none;
      border-radius: 0 0 6px 6px;
      margin-top: 0;
    }
    img {
      max-width: 100%;
      height: auto;
      border: 1px solid var(--border);
      border-radius: 4px;
      margin: 12px 0;
    }
    a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
    }
    a:hover { text-decoration: underline; }
</style>
</head>
<body>
  <div class="local-version-badge" style="background: #e0f2fe; color: #0369a1; padding: 8px 16px; margin: 16px; border-radius: 6px; border-left: 4px solid #0284c7; font-size: 0.9rem; font-weight: 500;">
      üìÑ Lokal version ‚Äì F√∂rb√§ttrat inneh√•ll
    </div>
  
    
      


    
    <section class="doc-section">
      <details open>
        <summary>Beskrivning av FGoal</summary>
        <div class="section-content">
      <p>Mortgage commitment √§r en process d√§r systemet hanterar k√∂p-engagemang (proof-of-finance) f√∂r kunder som vill k√∂pa fastighet. Processen anropas fr√•n Mortgage huvudprocessen n√§r det √§r k√∂p (is-purchase-yes) och ans√∂kningsutv√§rdering √§r klar. Processen skapar ett engagemang som kunden kan anv√§nda f√∂r att visa att de har finansiering i ordning vid budgivning.</p>
      <p>Processen startar med initial automatisk kreditevaluering via "Automatic Credit Evaluation" call activity. Om engagemanget godk√§nns, signaliserar systemet att engagemanget √§r redo via "Mortgage commitment ready" message event. Kunden fattar sedan beslut om engagemang via "Decide on mortgage commitment" user task och kan v√§lja att l√§gga till l√•nevillkor eller forts√§tta. Om objekt inte √§r utv√§rderat, samlas objektinformation via "Object information" call activity. Om l√•nevillkor √§ndras, genomf√∂rs omv√§rdering via "Automatic Credit Evaluation" call activity. Processen loopar tills kunden vinner budgivning eller engagemanget l√∂per ut.</p>
        </div>
      </details>
    </section>
<section class="doc-section">
      <details>
        <summary>Processteg - Input</summary>
        <div class="section-content">
      <p>Mortgage Commitment-processen startar n√§r:</p>
      <ul>
        <li><strong>Ans√∂kningsutv√§rdering √§r klar:</strong> Huvudprocessen (Mortgage) har slutf√∂rt ans√∂kningsutv√§rdering och √§r redo f√∂r k√∂p-engagemang</li>
        <li><strong>Det √§r k√∂p:</strong> "Is purchase?" gateway i huvudprocessen avg√∂r att det √§r k√∂p (is-purchase-yes), vilket indikerar att kunden vill k√∂pa fastighet och beh√∂ver proof-of-finance</li>
        <li><strong>Processkontext:</strong> Mortgage Commitment anropas fr√•n Mortgage huvudprocessen via "mortgage-commitment" call activity n√§r is-purchase-yes. Alla processvariabler skickas med f√∂r att s√§kerst√§lla att all n√∂dv√§ndig information √§r tillg√§nglig</li>
        <li><strong>Ans√∂kningsdata √§r tillg√§nglig:</strong> All n√∂dv√§ndig information f√∂r k√∂p-engagemang √§r samlad och tillg√§nglig, inklusive ans√∂kningsdata, kreditinformation, och objektinformation</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Processteg - Output</summary>
        <div class="section-content">
      <p>N√§r Mortgage Commitment-processen √§r slutf√∂rd har f√∂ljande resultat uppn√•tts:</p>
      <ul>
        <li><strong>Engagemanget √§r skapat:</strong> Ett k√∂p-engagemang (proof-of-finance) har skapats som kunden kan anv√§nda f√∂r att visa att de har finansiering i ordning vid budgivning</li>
        <li><strong>Kreditevaluering √§r slutf√∂rd:</strong> Initial kreditevaluering har genomf√∂rts via "Automatic Credit Evaluation" call activity. Om l√•nevillkor √§ndras, har omv√§rdering genomf√∂rts via "Automatic Credit Evaluation" call activity</li>
        <li><strong>Objektinformation √§r samlad och godk√§nd:</strong> Om objekt inte √§r utv√§rderat, har objektinformation samlats via "Object information" call activity och objektet √§r godk√§nt via "Object rejected?" gateway</li>
        <li><strong>L√•nevillkor √§r fastst√§llda:</strong> Om kunden l√§gger till l√•nevillkor, har villkoren utv√§rderats och godk√§nts via "Is terms approved?" gateway</li>
        <li><strong>Processen avslutas normalt:</strong> Om kunden vinner budgivning via "Won bidding round?" gateway "Yes", avslutas processen normalt och huvudprocessen forts√§tter med n√§sta steg</li>
        <li><strong>Felhantering:</strong> Om engagemanget avvisas initialt via "Is mortgage commitment approved?" gateway "No", avslutas processen med "Automatically rejected" error event som triggar boundary event i huvudprocessen. Om engagemanget l√∂per ut via timer event, avslutas processen med "Mortgage commitment expired" error event</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Omfattning</summary>
        <div class="section-content">
      <p>Mortgage Commitment-processen omfattar f√∂ljande huvudsteg och aktiviteter:</p>
      
      <h3>1. Initial kreditevaluering</h3>
      <ul>
        <li><strong>Automatic Credit Evaluation (call activity):</strong> Systemet genomf√∂r initial automatisk kreditevaluering f√∂r k√∂p-engagemang via "Automatic Credit Evaluation" call activity</li>
        <li><strong>Is mortgage commitment approved? (gateway):</strong> En beslutspunkt avg√∂r om engagemanget √§r godk√§nt baserat p√• resultatet fr√•n initial kreditevaluering:
          <ul>
            <li><strong>Yes:</strong> Processen forts√§tter till "Mortgage commitment ready" message event</li>
            <li><strong>No:</strong> Processen avslutas med "Automatically rejected" error event</li>
          </ul>
        </li>
        <li><strong>Mortgage commitment ready (message event):</strong> N√§r engagemanget √§r godk√§nt, signaliserar systemet att engagemanget √§r redo f√∂r beslutsfattande via "Mortgage commitment ready" message event</li>
      </ul>

      <h3>2. Beslutsfattande om engagemang</h3>
      <ul>
        <li><strong>Decide on mortgage commitment (user task):</strong> Kunden fattar beslut om engagemang via "Decide on mortgage commitment" user task. Kunden kan v√§lja att acceptera engagemanget eller l√§gga till l√•nevillkor</li>
        <li><strong>Upload documentation (boundary event):</strong> Under "Decide on mortgage commitment" user task kan "Upload documentation" boundary event triggas f√∂r att beg√§ra dokumentation. Detta triggar "Documentation assessment" call activity</li>
        <li><strong>Documentation assessment (call activity):</strong> Om dokumentation beg√§rs, bed√∂ms uppladdade dokument via "Documentation assessment" call activity</li>
        <li><strong>Credit re-evaluation required (boundary event):</strong> Under "Documentation assessment" call activity kan "Credit re-evaluation required" boundary event triggas f√∂r att beg√§ra omv√§rdering. Detta loopar tillbaka till initial kreditevaluering</li>
        <li><strong>Mortgage commitment decision? (gateway):</strong> En beslutspunkt avg√∂r om kunden vill l√§gga till l√•nevillkor eller forts√§tta:
          <ul>
            <li><strong>Add loan terms:</strong> Processen loopar tillbaka till initial kreditevaluering f√∂r att hantera nya villkor</li>
            <li><strong>Won bidding round / Interested in object:</strong> Processen forts√§tter till objektutv√§rdering</li>
          </ul>
        </li>
        <li><strong>Timer event:</strong> P√• "Decide on mortgage commitment" user task kan timer event triggas om engagemanget l√∂per ut. Detta avslutar processen med "Mortgage commitment expired" error event</li>
      </ul>

      <h3>3. Objektutv√§rdering</h3>
      <ul>
        <li><strong>Is object evaluated? (gateway):</strong> En beslutspunkt avg√∂r om objekt √§r utv√§rderat:
          <ul>
            <li><strong>Yes:</strong> Processen hoppar √∂ver objektinformation och g√•r direkt till "Object rejected?" gateway</li>
            <li><strong>No:</strong> Processen g√•r till "Object information" call activity f√∂r att samla objektinformation</li>
          </ul>
        </li>
        <li><strong>Object information (call activity):</strong> Om objekt inte √§r utv√§rderat, samlas objektinformation via "Object information" call activity. Information som samlas inkluderar storlek, typ, plats, max l√•nebelopp, energiklass, etc.</li>
        <li><strong>Object rejected? (gateway):</strong> En beslutspunkt avg√∂r om objekt √§r godk√§nt:
          <ul>
            <li><strong>Yes:</strong> Processen loopar tillbaka till beslutsfattande om engagemang</li>
            <li><strong>No:</strong> Processen forts√§tter till "Has terms changed?" gateway</li>
          </ul>
        </li>
      </ul>

      <h3>4. √Ñndringar av l√•nevillkor och omv√§rdering</h3>
      <ul>
        <li><strong>Has terms changed? (gateway):</strong> En beslutspunkt avg√∂r om l√•nevillkor har √§ndrats:
          <ul>
            <li><strong>Yes:</strong> Processen g√•r till "Automatic Credit Evaluation" call activity f√∂r omv√§rdering</li>
            <li><strong>No:</strong> Processen hoppar √∂ver omv√§rdering och g√•r direkt till "Is terms approved?" gateway</li>
          </ul>
        </li>
        <li><strong>Automatic Credit Evaluation (call activity, omv√§rdering):</strong> Om l√•nevillkor har √§ndrats, genomf√∂rs omv√§rdering via "Automatic Credit Evaluation" call activity</li>
        <li><strong>Is terms approved? (gateway):</strong> En beslutspunkt avg√∂r om √§ndrade villkor √§r godk√§nda:
          <ul>
            <li><strong>Yes:</strong> Processen forts√§tter till "Won bidding round?" gateway</li>
            <li><strong>No:</strong> Processen loopar tillbaka till beslutsfattande om engagemang</li>
          </ul>
        </li>
      </ul>

      <h3>5. Budgivning och avslut</h3>
      <ul>
        <li><strong>Won bidding round? (gateway):</strong> En beslutspunkt avg√∂r om kunden vunnit budgivning:
          <ul>
            <li><strong>Yes:</strong> Processen avslutas normalt och huvudprocessen forts√§tter med n√§sta steg</li>
            <li><strong>No:</strong> Processen loopar tillbaka till beslutsfattande om engagemang f√∂r att hantera nya objekt eller √§ndringar</li>
          </ul>
        </li>
      </ul>

      <h3>6. Loop-mekanismer</h3>
      <ul>
        <li><strong>L√§gg till l√•nevillkor:</strong> Om kunden v√§ljer att l√§gga till l√•nevillkor via "Mortgage commitment decision?" gateway "Add loan terms", loopar processen tillbaka till initial kreditevaluering f√∂r att hantera nya villkor</li>
        <li><strong>Objekt avvisat:</strong> Om "Object rejected?" gateway returnerar "Yes", loopar processen tillbaka till beslutsfattande om engagemang</li>
        <li><strong>Villkor inte godk√§nda:</strong> Om "Is terms approved?" gateway returnerar "No", loopar processen tillbaka till beslutsfattande om engagemang</li>
        <li><strong>Kund f√∂rlorar budgivning:</strong> Om "Won bidding round?" gateway returnerar "No", loopar processen tillbaka till beslutsfattande om engagemang f√∂r att hantera nya objekt eller √§ndringar</li>
        <li><strong>Omv√§rdering kr√§vs:</strong> Om "Credit re-evaluation required" boundary event triggas, loopar processen tillbaka till initial kreditevaluering</li>
      </ul>

      <h3>7. Felhantering</h3>
      <ul>
        <li><strong>Automatically rejected (error event):</strong> Om "Is mortgage commitment approved?" gateway returnerar "No", avslutas processen med "Automatically rejected" error event. Detta triggar boundary event i huvudprocessen som avbryter hela ans√∂kningsprocessen</li>
        <li><strong>Mortgage commitment expired (error event):</strong> Om timer event triggas p√• "Decide on mortgage commitment" user task, avslutas processen med "Mortgage commitment expired" error event. Detta triggar boundary event i huvudprocessen</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Avgr√§nsning</summary>
        <div class="section-content">
<ul>
        <li>Refinansiering eller andra typer av l√•n ing√•r inte - processen hanterar endast k√∂p</li>
        <li>"Direct to purchase" hoppas √∂ver - processen anv√§nds inte f√∂r direktk√∂p</li>
        <li>√Ñndringar av ekonomiinformation (inkomst etc.) st√∂ds inte - kr√§ver ny ans√∂kan</li>
        <li>Application-processen ing√•r inte - den sker tidigare i huvudprocessen</li>
        <li>Credit evaluation (huvudprocess) ing√•r inte - den sker efter Mortgage Commitment</li>
        <li>KYC-processen ing√•r inte - den sker senare i huvudprocessen</li>
        <li>Offer-processen ing√•r inte - den sker senare i huvudprocessen</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Beroenden</summary>
        <div class="section-content">
<ul>
        <li><strong>Mortgage huvudprocess:</strong> Mortgage Commitment anropas fr√•n mortgage.bpmn i huvudfl√∂det (entry-18 branch) n√§r is-purchase-yes</li>
        <li><strong>Application evaluation:</strong> Application evaluation m√•ste vara slutf√∂rd innan Mortgage Commitment startar</li>
        <li><strong>Is purchase gateway:</strong> Avg√∂r om det √§r k√∂p - endast k√∂p triggar Mortgage Commitment</li>
        <li><strong>Credit evaluation (subprocess):</strong> Automatisk kreditevaluering f√∂r k√∂p-engagemang (anropas tv√• g√•nger: initial och vid √§ndrade villkor)</li>
        <li><strong>Documentation assessment (subprocess):</strong> Bed√∂mning av dokumentation f√∂r k√∂p-engagemang</li>
        <li><strong>Object information (subprocess):</strong> Samling av objektinformation (storlek, typ, plats, max l√•nebelopp, energiklass)</li>
        <li><strong>Stakeholder/Customer:</strong> Fattar beslut om engagemang, laddar upp dokumentation, bekr√§ftar objekt, och bekr√§ftar vinst i budgivning</li>
        <li><strong>Credit evaluation (huvudprocess):</strong> Efter Mortgage Commitment g√•r processen vidare till Credit evaluation i huvudprocessen</li>
        <li><strong>Felhantering:</strong> Om engagemanget avvisas eller l√∂per ut, triggas error events</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>BPMN - Process</summary>
        <div class="section-content">
      <p><a href="#/bpmn/mortgage-se-mortgage-commitment.bpmn">Visa BPMN-processen f√∂r Mortgage Commitment</a></p>
      
      <h3>Processfl√∂de - Steg f√∂r steg</h3>
      <ol>
        <li><strong>Start:</strong> Processen startar n√§r Mortgage huvudprocessen anropar "mortgage-commitment" call activity n√§r det √§r k√∂p (is-purchase-yes). Alla processvariabler skickas med</li>
        <li><strong>Automatic Credit Evaluation (call activity):</strong> Systemet genomf√∂r initial automatisk kreditevaluering f√∂r k√∂p-engagemang via "Automatic Credit Evaluation" call activity</li>
        <li><strong>Is mortgage commitment approved? (gateway):</strong> En beslutspunkt avg√∂r om engagemanget √§r godk√§nt:
          <ul>
            <li><strong>Yes:</strong> Processen forts√§tter till "Mortgage commitment ready" message event</li>
            <li><strong>No:</strong> Processen avslutas med "Automatically rejected" error event</li>
          </ul>
        </li>
        <li><strong>Mortgage commitment ready (message event):</strong> N√§r engagemanget √§r godk√§nt, signaliserar systemet att engagemanget √§r redo f√∂r beslutsfattande</li>
        <li><strong>Decide on mortgage commitment (user task):</strong> Kunden fattar beslut om engagemang. Under denna task kan "Upload documentation" boundary event triggas f√∂r att beg√§ra dokumentation, vilket triggar "Documentation assessment" call activity. Timer event kan ocks√• triggas om engagemanget l√∂per ut</li>
        <li><strong>Mortgage commitment decision? (gateway):</strong> En beslutspunkt avg√∂r om kunden vill l√§gga till l√•nevillkor eller forts√§tta:
          <ul>
            <li><strong>Add loan terms:</strong> Processen loopar tillbaka till initial kreditevaluering f√∂r att hantera nya villkor</li>
            <li><strong>Won bidding round / Interested in object:</strong> Processen forts√§tter till objektutv√§rdering</li>
          </ul>
        </li>
        <li><strong>Is object evaluated? (gateway):</strong> En beslutspunkt avg√∂r om objekt √§r utv√§rderat:
          <ul>
            <li><strong>Yes:</strong> Processen hoppar √∂ver objektinformation</li>
            <li><strong>No:</strong> Processen g√•r till "Object information" call activity</li>
          </ul>
        </li>
        <li><strong>Object information (call activity, om n√∂dv√§ndig):</strong> Om objekt inte √§r utv√§rderat, samlas objektinformation (storlek, typ, plats, max l√•nebelopp, energiklass, etc.)</li>
        <li><strong>Object rejected? (gateway):</strong> En beslutspunkt avg√∂r om objekt √§r godk√§nt:
          <ul>
            <li><strong>Yes:</strong> Processen loopar tillbaka till beslutsfattande om engagemang</li>
            <li><strong>No:</strong> Processen forts√§tter till "Has terms changed?" gateway</li>
          </ul>
        </li>
        <li><strong>Has terms changed? (gateway):</strong> En beslutspunkt avg√∂r om l√•nevillkor har √§ndrats:
          <ul>
            <li><strong>Yes:</strong> Processen g√•r till "Automatic Credit Evaluation" call activity f√∂r omv√§rdering</li>
            <li><strong>No:</strong> Processen hoppar √∂ver omv√§rdering</li>
          </ul>
        </li>
        <li><strong>Automatic Credit Evaluation (call activity, omv√§rdering, om beh√∂vs):</strong> Om l√•nevillkor har √§ndrats, genomf√∂rs omv√§rdering</li>
        <li><strong>Is terms approved? (gateway):</strong> En beslutspunkt avg√∂r om √§ndrade villkor √§r godk√§nda:
          <ul>
            <li><strong>Yes:</strong> Processen forts√§tter till "Won bidding round?" gateway</li>
            <li><strong>No:</strong> Processen loopar tillbaka till beslutsfattande om engagemang</li>
          </ul>
        </li>
        <li><strong>Won bidding round? (gateway):</strong> En beslutspunkt avg√∂r om kunden vunnit budgivning:
          <ul>
            <li><strong>Yes:</strong> Processen avslutas normalt</li>
            <li><strong>No:</strong> Processen loopar tillbaka till beslutsfattande om engagemang</li>
          </ul>
        </li>
        <li><strong>Avslut:</strong> N√§r kunden vinner budgivning, avslutas processen normalt och huvudprocessen forts√§tter med n√§sta steg</li>
      </ol>
      
      <h3>Viktiga beslutspunkter</h3>
      <ul>
        <li><strong>Is mortgage commitment approved? (gateway):</strong> Avg√∂r om engagemanget √§r godk√§nt baserat p√• initial kreditevaluering. Om "No", avslutas processen med error event</li>
        <li><strong>Mortgage commitment decision? (gateway):</strong> Avg√∂r om kunden vill l√§gga till l√•nevillkor eller forts√§tta. Om "Add loan terms", loopar processen tillbaka</li>
        <li><strong>Is object evaluated? (gateway):</strong> Avg√∂r om objekt √§r utv√§rderat. Om "No", samlas objektinformation</li>
        <li><strong>Object rejected? (gateway):</strong> Avg√∂r om objekt √§r godk√§nt. Om "Yes", loopar processen tillbaka</li>
        <li><strong>Has terms changed? (gateway):</strong> Avg√∂r om l√•nevillkor har √§ndrats. Om "Yes", kr√§vs omv√§rdering</li>
        <li><strong>Is terms approved? (gateway):</strong> Avg√∂r om √§ndrade villkor √§r godk√§nda. Om "No", loopar processen tillbaka</li>
        <li><strong>Won bidding round? (gateway):</strong> Avg√∂r om kunden vunnit budgivning. Om "No", loopar processen tillbaka</li>
      </ul>
      
      <h3>Loop-mekanismer</h3>
      <ul>
        <li><strong>L√§gg till l√•nevillkor:</strong> Om kunden v√§ljer att l√§gga till l√•nevillkor, loopar processen tillbaka till initial kreditevaluering</li>
        <li><strong>Objekt avvisat:</strong> Om objekt avvisas, loopar processen tillbaka till beslutsfattande om engagemang</li>
        <li><strong>Villkor inte godk√§nda:</strong> Om √§ndrade villkor inte godk√§nns, loopar processen tillbaka till beslutsfattande om engagemang</li>
        <li><strong>Kund f√∂rlorar budgivning:</strong> Om kunden f√∂rlorar budgivning, loopar processen tillbaka till beslutsfattande om engagemang</li>
        <li><strong>Omv√§rdering kr√§vs:</strong> Om omv√§rdering kr√§vs via boundary event, loopar processen tillbaka till initial kreditevaluering</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Testgenerering</summary>
        <div class="section-content">
<p class="muted">Information f√∂r att generera automatiserade tester. Delar kan auto-genereras fr√•n processbeskrivningen, men kompletteras manuellt med implementation-specifik information (routes, locators, testdata).</p>

      <h3>Testscenarier</h3>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Namn</th>
            <th>Typ</th>
            <th>Persona</th>
            <th>Risk Level</th>
            <th>Assertion Type</th>
            <th>Outcome</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          
      <tr>
        <td><strong>S1</strong></td>
        <td>Normalfl√∂de ‚Äì engagemang godk√§nt, kund vinner budgivning</td>
        <td>Happy</td>
        <td>customer</td>
        <td>P0</td>
        <td>functional</td>
        <td>Initial kreditevaluering godk√§nns. Kund fattar beslut om engagemang (accepterar). Objektv√§rdering genomf√∂rs. Dokumentation laddas upp och bed√∂ms. Avancerad underwriting genomf√∂rs. Kund bekr√§ftar objekt och vinst i budgivning. Proof-of-finance skapas. Processen avslutas och g√•r vidare till Credit evaluation i huvudprocessen.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S2</strong></td>
        <td>√Ñndringar av l√•nevillkor ‚Äì omv√§rdering kr√§vs</td>
        <td>Edge</td>
        <td>customer</td>
        <td>P1</td>
        <td>functional</td>
        <td>Kund beg√§r √§ndringar av l√•nevillkor (t.ex. h√∂gre l√•nebelopp, annan l√∂ptid). Ytterligare kreditevaluering anropas. Omv√§rdering godk√§nns. Processen forts√§tter med uppdaterade villkor.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S3</strong></td>
        <td>Engagemang avvisat initialt</td>
        <td>Error</td>
        <td>system</td>
        <td>P0</td>
        <td>functional</td>
        <td>Initial kreditevaluering avvisar engagemanget. "mortgage-commitment-rejected" error triggas. Processen avslutas med "Automatically rejected" end event.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S4</strong></td>
        <td>Engagemang l√∂per ut ‚Äì timeout</td>
        <td>Error</td>
        <td>system</td>
        <td>P0</td>
        <td>functional</td>
        <td>Engagemanget skapas men kund svarar inte inom timeout-period. "mortgage-commitment-timeout" error triggas. Processen avslutas med "Mortgage commitment expired" end event.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S5</strong></td>
        <td>Kund f√∂rlorar budgivning ‚Äì engagemang avvisat</td>
        <td>Edge</td>
        <td>customer</td>
        <td>P1</td>
        <td>functional</td>
        <td>Engagemanget √§r godk√§nt, men kund f√∂rlorar budgivning. Kund avvisar engagemanget. Processen avslutas med "Engagement declined" end event.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
        </tbody>
      </table>

      <h3>UI Flow per Scenario</h3>
      <p class="muted">Detaljerade steg f√∂r varje scenario. Expandera f√∂r att se UI Flow.</p>
      
      <details style="margin: 12px 0; padding: 12px; border: 1px solid var(--border); border-radius: 6px;">
        <summary style="cursor: pointer; font-weight: 600; color: var(--primary);">
          <strong>S1: Normalfl√∂de ‚Äì komplett process</strong> (Klicka f√∂r att expandera)
        </summary>
        <table style="margin-top: 12px;">
          <thead>
            <tr>
              <th>Steg</th>
              <th>Page ID</th>
              <th>Action</th>
              <th>Locator ID</th>
              <th>Data Profile</th>
              <th>Kommentar</th>
            </tr>
          </thead>
          <tbody>
            
        <tr>
          <td>1</td>
          <td>decide-on-mortgage-commitment</td>
          <td>navigate</td>
          <td>-</td>
          <td>-</td>
          <td>Navigera till decide on mortgage commitment</td>
        </tr>
      
        <tr>
          <td>2</td>
          <td>decide-on-mortgage-commitment</td>
          <td>fill</td>
          <td>[TODO: L√§gg till locator f√∂r f√∂rsta f√§ltet]</td>
          <td>[TODO: Definiera testdata]</td>
          <td>Fyll i information f√∂r decide on mortgage commitment</td>
        </tr>
      
        <tr>
          <td>3</td>
          <td>decide-on-mortgage-commitment</td>
          <td>click</td>
          <td>[TODO: L√§gg till locator f√∂r submit-knapp]</td>
          <td>-</td>
          <td>Skicka/Submit</td>
        </tr>
      
        <tr>
          <td>4</td>
          <td>decide-on-mortgage-commitment-confirmation</td>
          <td>verify</td>
          <td>[TODO: L√§gg till locator f√∂r bekr√§ftelsemeddelande]</td>
          <td>-</td>
          <td>Verifiera bekr√§ftelse</td>
        </tr>
      
          </tbody>
        </table>
      </details>
    
      <details style="margin: 12px 0; padding: 12px; border: 1px solid var(--border); border-radius: 6px;">
        <summary style="cursor: pointer; font-weight: 600; color: var(--primary);">
          <strong>S2: Om engagemanget avvisas initialt, triggas "mort...</strong> (Klicka f√∂r att expandera)
        </summary>
        <table style="margin-top: 12px;">
          <thead>
            <tr>
              <th>Steg</th>
              <th>Page ID</th>
              <th>Action</th>
              <th>Locator ID</th>
              <th>Data Profile</th>
              <th>Kommentar</th>
            </tr>
          </thead>
          <tbody>
            
        <tr>
          <td>1</td>
          <td>decide-on-mortgage-commitment</td>
          <td>navigate</td>
          <td>-</td>
          <td>-</td>
          <td>Navigera till decide on mortgage commitment</td>
        </tr>
      
        <tr>
          <td>2</td>
          <td>decide-on-mortgage-commitment</td>
          <td>fill</td>
          <td>[TODO: L√§gg till locator f√∂r f√§lt]</td>
          <td>[TODO: Definiera testdata som orsakar fel]</td>
          <td>Fyll i information som orsakar fel</td>
        </tr>
      
        <tr>
          <td>3</td>
          <td>decide-on-mortgage-commitment</td>
          <td>verify</td>
          <td>[TODO: L√§gg till locator f√∂r felmeddelande]</td>
          <td>-</td>
          <td>Verifiera att felmeddelande visas</td>
        </tr>
      
          </tbody>
        </table>
      </details>
    
      <details style="margin: 12px 0; padding: 12px; border: 1px solid var(--border); border-radius: 6px;">
        <summary style="cursor: pointer; font-weight: 600; color: var(--primary);">
          <strong>S3: Om engagemanget l√∂per ut, triggas "mortgage-com...</strong> (Klicka f√∂r att expandera)
        </summary>
        <table style="margin-top: 12px;">
          <thead>
            <tr>
              <th>Steg</th>
              <th>Page ID</th>
              <th>Action</th>
              <th>Locator ID</th>
              <th>Data Profile</th>
              <th>Kommentar</th>
            </tr>
          </thead>
          <tbody>
            
        <tr>
          <td>1</td>
          <td>decide-on-mortgage-commitment</td>
          <td>navigate</td>
          <td>-</td>
          <td>-</td>
          <td>Navigera till decide on mortgage commitment</td>
        </tr>
      
        <tr>
          <td>2</td>
          <td>decide-on-mortgage-commitment</td>
          <td>fill</td>
          <td>[TODO: L√§gg till locator f√∂r f√§lt]</td>
          <td>[TODO: Definiera testdata som orsakar fel]</td>
          <td>Fyll i information som orsakar fel</td>
        </tr>
      
        <tr>
          <td>3</td>
          <td>decide-on-mortgage-commitment</td>
          <td>verify</td>
          <td>[TODO: L√§gg till locator f√∂r felmeddelande]</td>
          <td>-</td>
          <td>Verifiera att felmeddelande visas</td>
        </tr>
      
          </tbody>
        </table>
      </details>
    

      <h3>Testdata-referenser</h3>
      <p class="muted">Testdata-profilerna som anv√§nds i scenarion. Definiera faktiska testdata i separat testdata-katalog.</p>
      <ul>
        
      <li><strong>[TODO: data-profile-id]</strong>: [TODO: Definiera testdata f√∂r denna process]</li>
    
      </ul>

      <h3>Implementation Mapping</h3>
      <p class="muted">Mappning mellan BPMN-aktiviteter och faktisk implementation (routes, endpoints, locators).</p>
      <table>
        <thead>
          <tr>
            <th>BPMN Aktivitet</th>
            <th>Type</th>
            <th>Route/Endpoint</th>
            <th>Method</th>
            <th>Base URL</th>
            <th>Kommentar</th>
          </tr>
        </thead>
        <tbody>
          
      <tr>
        <td>Credit evaluation 1 (call activity)</td>
        <td>Both</td>
        <td>[TODO: L√§gg till route, t.ex. /credit-evaluation-1-(call-activity)]</td>
        <td>-</td>
        <td>[TODO: L√§gg till base URL f√∂r milj√∂n]</td>
        <td>Initial automatisk kreditevaluering f√∂r k√∂p-engagemang</td>
      </tr>
    
      <tr>
        <td>Is mortgage commitment approved gateway</td>
        <td>Both</td>
        <td>[TODO: L√§gg till route, t.ex. /is-mortgage-commitment-approved-gateway]</td>
        <td>-</td>
        <td>[TODO: L√§gg till base URL f√∂r milj√∂n]</td>
        <td>Avg√∂r om engagemanget √§r godk√§nt - om nej, avvisas automatiskt</td>
      </tr>
    
      <tr>
        <td>Mortgage commitment ready</td>
        <td>Both</td>
        <td>[TODO: L√§gg till route, t.ex. /mortgage-commitment-ready]</td>
        <td>-</td>
        <td>[TODO: L√§gg till base URL f√∂r milj√∂n]</td>
        <td>Signaliserar att engagemanget √§r redo f√∂r beslutsfattande</td>
      </tr>
    
      <tr>
        <td>Decide on mortgage commitment</td>
        <td>UI</td>
        <td>[TODO: L√§gg till route, t.ex. /decide-on-mortgage-commitment]</td>
        <td>-</td>
        <td>[TODO: L√§gg till base URL f√∂r milj√∂n]</td>
        <td>User task (Stakeholder lane) d√§r kunden fattar beslut om engagemang</td>
      </tr>
    
      <tr>
        <td>Mortgage commitment decision gateway</td>
        <td>Both</td>
        <td>[TODO: L√§gg till route, t.ex. /mortgage-commitment-decision-gateway]</td>
        <td>-</td>
        <td>[TODO: L√§gg till base URL f√∂r milj√∂n]</td>
        <td>Avg√∂r om kunden vill l√§gga till l√•nevillkor eller forts√§tta</td>
      </tr>
    
      <tr>
        <td>Upload documentation boundary event</td>
        <td>Both</td>
        <td>[TODO: L√§gg till route, t.ex. /upload-documentation-boundary-event]</td>
        <td>-</td>
        <td>[TODO: L√§gg till base URL f√∂r milj√∂n]</td>
        <td>P√• Decide on mortgage commitment, kan beg√§ra dokumentation och trigga Documen...</td>
      </tr>
    
      <tr>
        <td>Documentation assessment (call activity)</td>
        <td>Both</td>
        <td>[TODO: L√§gg till route, t.ex. /documentation-assessment-(call-activity)]</td>
        <td>-</td>
        <td>[TODO: L√§gg till base URL f√∂r milj√∂n]</td>
        <td>Bed√∂mning av uppladdade dokument</td>
      </tr>
    
      <tr>
        <td>Credit reevaluation required boundary event</td>
        <td>Both</td>
        <td>[TODO: L√§gg till route, t.ex. /credit-reevaluation-required-boundary-event]</td>
        <td>-</td>
        <td>[TODO: L√§gg till base URL f√∂r milj√∂n]</td>
        <td>P√• Documentation assessment, kan trigga omv√§rdering och loopa tillbaka</td>
      </tr>
    
      <tr>
        <td>Is object evaluated gateway</td>
        <td>Both</td>
        <td>[TODO: L√§gg till route, t.ex. /is-object-evaluated-gateway]</td>
        <td>-</td>
        <td>[TODO: L√§gg till base URL f√∂r milj√∂n]</td>
        <td>Avg√∂r om objekt √§r utv√§rderat - om nej, samlas objektinformation</td>
      </tr>
    
      <tr>
        <td>Object information (call activity)</td>
        <td>Both</td>
        <td>[TODO: L√§gg till route, t.ex. /object-information-(call-activity)]</td>
        <td>-</td>
        <td>[TODO: L√§gg till base URL f√∂r milj√∂n]</td>
        <td>Samling av objektinformation (storlek, typ, plats, max l√•nebelopp, energiklass)</td>
      </tr>
    
      <tr>
        <td>Is object approved gateway</td>
        <td>Both</td>
        <td>[TODO: L√§gg till route, t.ex. /is-object-approved-gateway]</td>
        <td>-</td>
        <td>[TODO: L√§gg till base URL f√∂r milj√∂n]</td>
        <td>Avg√∂r om objekt √§r godk√§nt</td>
      </tr>
    
      <tr>
        <td>Has terms changed gateway</td>
        <td>Both</td>
        <td>[TODO: L√§gg till route, t.ex. /has-terms-changed-gateway]</td>
        <td>-</td>
        <td>[TODO: L√§gg till base URL f√∂r milj√∂n]</td>
        <td>Avg√∂r om l√•nevillkor har √§ndrats - om ja, kr√§vs omv√§rdering</td>
      </tr>
    
      <tr>
        <td>Credit evaluation 2 (call activity)</td>
        <td>Both</td>
        <td>[TODO: L√§gg till route, t.ex. /credit-evaluation-2-(call-activity)]</td>
        <td>-</td>
        <td>[TODO: L√§gg till base URL f√∂r milj√∂n]</td>
        <td>Omv√§rdering vid √§ndrade villkor</td>
      </tr>
    
      <tr>
        <td>Is terms approved gateway</td>
        <td>Both</td>
        <td>[TODO: L√§gg till route, t.ex. /is-terms-approved-gateway]</td>
        <td>-</td>
        <td>[TODO: L√§gg till base URL f√∂r milj√∂n]</td>
        <td>Avg√∂r om √§ndrade villkor √§r godk√§nda</td>
      </tr>
    
      <tr>
        <td>Won bidding round gateway</td>
        <td>Both</td>
        <td>[TODO: L√§gg till route, t.ex. /won-bidding-round-gateway]</td>
        <td>-</td>
        <td>[TODO: L√§gg till base URL f√∂r milj√∂n]</td>
        <td>Avg√∂r om kunden vunnit budgivning - om ja, avslutas processen, om nej, loopar...</td>
      </tr>
    
      <tr>
        <td>Timer event</td>
        <td>Both</td>
        <td>[TODO: L√§gg till route, t.ex. /timer-event]</td>
        <td>-</td>
        <td>[TODO: L√§gg till base URL f√∂r milj√∂n]</td>
        <td>P√• Decide on mortgage commitment, kan trigga timeout om engagemanget l√∂per ut</td>
      </tr>
    
        </tbody>
      </table>
        </div>
      </details>
    </section>
    <section class="doc-section">
      <details>
        <summary>Effekt</summary>
        <div class="section-content">
<p class="muted">F√∂rv√§ntad aff√§rseffekt som uppn√•s med feature goalet.</p>
      
      <h3>Snabbare proof-of-finance f√∂r k√∂pkunder</h3>
      <p>Genom automatisk kreditevaluering via "Automatic Credit Evaluation" call activity kan systemet snabbt bed√∂ma om en kund √§r kvalificerad f√∂r ett k√∂p-engagemang. F√∂r kunder med god kreditprofil kan engagemanget skapas och signaleras via "Mortgage commitment ready" message event inom minuter ist√§llet f√∂r dagar, vilket ger kunden m√∂jlighet att delta i budgivning direkt. Detta kan minska tiden fr√•n ans√∂kan till proof-of-finance med upp till 70-80% f√∂r kvalificerade kunder j√§mf√∂rt med manuell process.</p>
      
      <h3>Flexibel hantering av objekt och villkor</h3>
      <p>Processens loop-mekanismer m√∂jligg√∂r att kunder kan hantera flera objekt och √§ndra l√•nevillkor utan att beh√∂va starta en ny ans√∂kan. N√§r kunden v√§ljer "Add loan terms" via "Mortgage commitment decision?" gateway, loopar processen tillbaka f√∂r omv√§rdering via "Automatic Credit Evaluation" call activity. Om objekt avvisas via "Object rejected?" gateway, kan kunden enkelt forts√§tta med ett annat objekt. Denna flexibilitet kan √∂ka kundn√∂jdheten med upp till 30-40% och minska antalet avbrutna ans√∂kningar med upp till 25-35%.</p>
      
      <h3>Automatiserad dokumentationshantering</h3>
      <p>N√§r kunden laddar upp dokumentation via "Upload documentation" boundary event p√• "Decide on mortgage commitment" user task, bed√∂ms dokumenten automatiskt via "Documentation assessment" call activity. Om omv√§rdering kr√§vs, triggas "Credit re-evaluation required" boundary event automatiskt. Detta eliminerar behovet av manuell dokumenthantering och kan minska handl√§ggningstid med upp till 50-60% f√∂r ans√∂kningar som kr√§ver dokumentation.</p>
      
      <h3>Proaktiv timeout-hantering</h3>
      <p>Timer event p√• "Decide on mortgage commitment" user task s√§kerst√§ller att engagemang som inte anv√§nds automatiskt avslutas via "Mortgage commitment expired" error event. Detta f√∂rhindrar att inaktiva engagemang blockerar systemresurser och kan minska antalet "zombie"-engagemang med upp till 90-95%.</p>
      
      <h3>F√∂rb√§ttrad kundupplevelse vid budgivning</h3>
      <p>Genom att kunder kan f√• proof-of-finance snabbt och enkelt uppdatera villkor och objekt via "Won bidding round?" gateway, kan de delta mer aktivt i budgivning. N√§r kunden vinner budgivning via "Won bidding round?" gateway "Yes", avslutas processen normalt och huvudprocessen forts√§tter direkt. Detta kan √∂ka antalet framg√•ngsrika budgivningar med upp till 20-30% och f√∂rb√§ttra kundens chans att vinna √∂nskat objekt.</p>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>User stories</summary>
        <div class="section-content">
<p class="muted">Relevanta och realistiska user stories som kan kopplas till feature goalet.</p>
      
      <h3>Kundperspektiv</h3>
      <ul>
        <li><strong>Som k√∂pare</strong> vill jag f√• proof-of-finance snabbt via automatisk kreditevaluering ("Automatic Credit Evaluation" call activity) <strong>s√• att</strong> jag kan delta i budgivning direkt utan att v√§nta dagar p√• manuell granskning. <em>Acceptanskriterier: Systemet ska kunna skapa engagemang inom minuter f√∂r kvalificerade kunder, och "Mortgage commitment ready" message event ska triggas automatiskt n√§r engagemanget √§r redo.</em></li>
        <li><strong>Som k√∂pare</strong> vill jag kunna l√§gga till l√•nevillkor via "Mortgage commitment decision?" gateway "Add loan terms" <strong>s√• att</strong> jag kan justera mitt engagemang n√§r jag hittar ett objekt som kr√§ver h√∂gre l√•nebelopp eller annan l√∂ptid. <em>Acceptanskriterier: Systemet ska automatiskt loopa tillbaka till kreditevaluering n√§r villkor √§ndras, och "Has terms changed?" gateway ska korrekt identifiera √§ndringar.</em></li>
        <li><strong>Som k√∂pare</strong> vill jag kunna hantera flera objekt via "Object rejected?" gateway och "Won bidding round?" gateway <strong>s√• att</strong> jag kan forts√§tta s√∂ka om ett objekt avvisas eller om jag f√∂rlorar budgivning. <em>Acceptanskriterier: Processen ska loopa tillbaka till "Decide on mortgage commitment" user task n√§r objekt avvisas eller budgivning f√∂rloras, utan att kunden beh√∂ver starta en ny ans√∂kan.</em></li>
        <li><strong>Som k√∂pare</strong> vill jag kunna ladda upp dokumentation via "Upload documentation" boundary event p√• "Decide on mortgage commitment" user task <strong>s√• att</strong> jag kan komplettera min ans√∂kan utan att avbryta processen. <em>Acceptanskriterier: Boundary event ska triggas n√§r dokumentation beg√§rs, och "Documentation assessment" call activity ska automatiskt bed√∂ma uppladdade dokument.</em></li>
      </ul>
      
      <h3>Systemperspektiv</h3>
      <ul>
        <li><strong>Som system</strong> vill jag automatiskt avvisa engagemang som inte uppfyller kreditkrav via "Is mortgage commitment approved?" gateway "No" <strong>s√• att</strong> endast kvalificerade kunder f√•r proof-of-finance och resurser inte sl√∂sas p√• hoppl√∂sa ans√∂kningar. <em>Acceptanskriterier: "Automatically rejected" error event ska triggas automatiskt n√§r kreditevaluering avvisar engagemanget, och boundary event i huvudprocessen ska korrekt hantera avvisningen.</em></li>
        <li><strong>Som system</strong> vill jag automatiskt avsluta engagemang som l√∂per ut via timer event p√• "Decide on mortgage commitment" user task <strong>s√• att</strong> inaktiva engagemang inte blockerar systemresurser. <em>Acceptanskriterier: Timer event ska triggas n√§r timeout-perioden har passerat, och "Mortgage commitment expired" error event ska korrekt signalera till huvudprocessen.</em></li>
        <li><strong>Som system</strong> vill jag automatiskt samla objektinformation via "Object information" call activity n√§r objekt inte √§r utv√§rderat <strong>s√• att</strong> objektet kan bed√∂mas korrekt innan engagemanget bekr√§ftas. <em>Acceptanskriterier: "Is object evaluated?" gateway ska korrekt identifiera om objektinformation beh√∂vs, och "Object information" call activity ska samla all n√∂dv√§ndig information (storlek, typ, plats, max l√•nebelopp, energiklass).</em></li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Acceptanskriterier</summary>
        <div class="section-content">
<p class="muted">Relevanta och realistiska acceptanskriterier som kan kopplas till feature goalet.</p>
      
      <h3>Initial kreditevaluering och godk√§nnande</h3>
      <ul>
        <li>Systemet ska automatiskt genomf√∂ra initial kreditevaluering via "Automatic Credit Evaluation" call activity (credit-evaluation-1) n√§r Mortgage Commitment-processen startar</li>
        <li>"Is mortgage commitment approved?" gateway ska korrekt avg√∂ra om engagemanget √§r godk√§nt baserat p√• resultatet fr√•n initial kreditevaluering</li>
        <li>Om engagemanget godk√§nns via "Is mortgage commitment approved?" gateway "Yes", ska "Mortgage commitment ready" message event triggas automatiskt</li>
        <li>Om engagemanget avvisas via "Is mortgage commitment approved?" gateway "No", ska "Automatically rejected" error event (Event_0tae8fa) triggas, vilket signalerar till huvudprocessen att engagemanget har avvisats</li>
      </ul>
      
      <h3>Beslutsfattande om engagemang</h3>
      <ul>
        <li>Kunden ska kunna fatta beslut om engagemang via "Decide on mortgage commitment" user task i subprocessen (Activity_1xrvxr3)</li>
        <li>"Mortgage commitment decision?" gateway ska korrekt avg√∂ra om kunden vill l√§gga till l√•nevillkor ("Add loan terms") eller forts√§tta ("Won bidding round / Interested in object")</li>
        <li>Om kunden v√§ljer "Add loan terms", ska processen automatiskt loopa tillbaka till initial kreditevaluering via Gateway_17kvnul och Gateway_1hxgyw1</li>
        <li>"Upload documentation" boundary event (Event_0o7mt0k) ska kunna triggas p√• "Decide on mortgage commitment" user task f√∂r att beg√§ra dokumentation, vilket triggar "Documentation assessment" call activity</li>
        <li>Om "Credit re-evaluation required" boundary event (Event_1t9r73x) triggas p√• subprocessen, ska processen automatiskt loopa tillbaka till initial kreditevaluering</li>
        <li>Timer event (Event_0z4ifsl) p√• subprocessen ska triggas om engagemanget l√∂per ut, vilket avslutar processen med "Mortgage commitment expired" error event (Event_0rkod04)</li>
      </ul>
      
      <h3>Objektutv√§rdering</h3>
      <ul>
        <li>"Is object evaluated?" gateway ska korrekt avg√∂ra om objekt √§r utv√§rderat. Om "Yes", ska processen hoppa √∂ver objektinformation och g√• direkt till "Object rejected?" gateway via Gateway_14ve2uc</li>
        <li>Om objekt inte √§r utv√§rderat ("Is object evaluated?" gateway "No"), ska "Object information" call activity automatiskt samla objektinformation (storlek, typ, plats, max l√•nebelopp, energiklass, etc.)</li>
        <li>"Object rejected?" gateway ska korrekt avg√∂ra om objekt √§r godk√§nt. Om "Yes", ska processen loopa tillbaka till beslutsfattande om engagemang via Gateway_0p2vba1 och Gateway_0upjuan</li>
        <li>Om objekt √§r godk√§nt ("Object rejected?" gateway "No"), ska processen forts√§tta till "Has terms changed?" gateway</li>
      </ul>
      
      <h3>√Ñndringar av l√•nevillkor och omv√§rdering</h3>
      <ul>
        <li>"Has terms changed?" gateway ska korrekt identifiera om l√•nevillkor har √§ndrats. Om "Yes", ska "Automatic Credit Evaluation" call activity (credit-evaluation-2) automatiskt genomf√∂ra omv√§rdering</li>
        <li>Om l√•nevillkor inte har √§ndrats ("Has terms changed?" gateway "No"), ska processen hoppa √∂ver omv√§rdering och g√• direkt till "Is terms approved?" gateway via Gateway_0bsnrjk</li>
        <li>"Is terms approved?" gateway ska korrekt avg√∂ra om √§ndrade villkor √§r godk√§nda. Om "Yes", ska processen forts√§tta till "Won bidding round?" gateway</li>
        <li>Om √§ndrade villkor inte godk√§nns ("Is terms approved?" gateway "No"), ska processen automatiskt loopa tillbaka till beslutsfattande om engagemang via Gateway_11954vc och Gateway_0p2vba1</li>
      </ul>
      
      <h3>Budgivning och avslut</h3>
      <ul>
        <li>"Won bidding round?" gateway ska korrekt avg√∂ra om kunden vunnit budgivning. Om "Yes", ska processen avslutas normalt via Event_0az10av och huvudprocessen forts√§tter med n√§sta steg</li>
        <li>Om kunden f√∂rlorar budgivning ("Won bidding round?" gateway "No"), ska processen automatiskt loopa tillbaka till beslutsfattande om engagemang via Gateway_11954vc och Gateway_0p2vba1</li>
      </ul>
      
      <h3>Felhantering</h3>
      <ul>
        <li>Om engagemanget avvisas initialt via "Is mortgage commitment approved?" gateway "No", ska "Automatically rejected" error event (Event_0tae8fa) triggas med error code "mortgage-commitment-rejected", vilket signalerar till huvudprocessen att engagemanget har avvisats</li>
        <li>Om engagemanget l√∂per ut via timer event (Event_0z4ifsl), ska "Mortgage commitment expired" error event (Event_0rkod04) triggas med error code "mortgage-commitment-timeout", vilket signalerar till huvudprocessen att engagemanget har l√∂pt ut</li>
        <li>Alla error events ska korrekt trigga motsvarande boundary events i huvudprocessen (Mortgage) f√∂r att s√§kerst√§lla att hela ans√∂kningsprocessen avbryts n√§r engagemanget avvisas eller l√∂per ut</li>
      </ul>
      
      <h3>Processvariabler och data</h3>
      <ul>
        <li>Alla processvariabler ska skickas med n√§r Mortgage Commitment anropas fr√•n huvudprocessen (camunda:in variables="all") f√∂r att s√§kerst√§lla fullst√§ndig kontext</li>
        <li>Resultat fr√•n "Automatic Credit Evaluation" call activities (b√•de credit-evaluation-1 och credit-evaluation-2) ska korrekt sparas och anv√§ndas i efterf√∂ljande gateways</li>
        <li>Objektinformation som samlas via "Object information" call activity ska korrekt sparas och anv√§ndas i "Object rejected?" gateway</li>
        <li>Kundens beslut fr√•n "Decide on mortgage commitment" user task ska korrekt sparas och anv√§ndas i "Mortgage commitment decision?" gateway</li>
      </ul>

      <h3>Tekniska krav</h3>
      <ul>
        <li><strong>Timeout:</strong> User tasks ska ha timeout p√• 30 dagar f√∂r kundaktiviteter. Call activities och service tasks ska ha timeout p√• 60 sekunder</li>
        <li><strong>Retry:</strong> Call activities och service tasks ska ha automatisk retry med exponential backoff (max 3 f√∂rs√∂k) vid tekniska fel</li>
        <li><strong>Error codes:</strong> Systemet ska returnera specifika error codes: COMMITMENT_REJECTED, COMMITMENT_EXPIRED, COMMITMENT_TIMEOUT, COMMITMENT_SERVICE_ERROR</li>
        <li><strong>Logging:</strong> Alla engagemangsbeslut, eskaleringar och timeout ska loggas med engagemangs-ID, anv√§ndar-ID, tidsst√§mplar och resultat f√∂r sp√•rbarhet</li>
      </ul>

      <h3>UI/UX-krav</h3>
      <ul>
        <li><strong>Kund-vyer:</strong> "Decide on mortgage commitment" user task ska visa tydlig, strukturerad information om engagemanget</li>
        <li><strong>Statusindikatorer:</strong> Systemet ska visa tydlig status f√∂r varje steg i processen med visuella indikatorer</li>
      </ul>

      <h3>Skalbarhet och prestanda</h3>
      <ul>
        <li><strong>Parallellisering:</strong> Systemet ska kunna hantera flera engagemang parallellt</li>
        <li><strong>Load balancing:</strong> Service tasks ska kunna hantera minst 30 engagemang per minut</li>
      </ul>

      <h3>S√§kerhet och compliance</h3>
      <ul>
        <li><strong>Dataskydd:</strong> All k√§nslig engagemangsinformation ska krypteras i vila och under √∂verf√∂ring (TLS 1.3)</li>
        <li><strong>GDPR-efterlevnad:</strong> Alla engagemang ska inneh√•lla sp√•rbarhet f√∂r n√§r beslutet fattades och resultatet</li>
        <li><strong>Audit trail:</strong> Alla engagemangsbeslut ska loggas f√∂r fullst√§ndig sp√•rbarhet</li>
      </ul>
        </div>
      </details>
    </section>
      </body>
</html>
