<!DOCTYPE html>
<html lang="sv">
<head>
  <meta name="x-generation-source" content="local-fallback" />
  <meta name="x-feature-goal-template-version" content="v2" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Application</title>
  <style>
    :root {
      --primary: #1d4ed8;
      --text-strong: #0f172a;
      --text-muted: #64748b;
      --border: #e2e8f0;
      --accent: #e0e7ff;
      --bg-light: #f8f9fa;
    }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      margin: 0;
      padding: 24px;
      background: #ffffff;
      color: var(--text-strong);
      line-height: 1.6;
      max-width: 1200px;
      margin: 0 auto;
    }
    h1 {
      font-size: 2rem;
      margin: 0 0 32px;
      border-bottom: 2px solid var(--border);
      padding-bottom: 12px;
      color: var(--text-strong);
    }
    h2 {
      color: var(--primary);
      margin: 0;
      font-size: 1.5rem;
    }
    h3 {
      color: var(--text-strong);
      margin: 32px 0 12px;
      font-size: 1.2rem;
    }
    p { margin: 0 0 12px; }
    ul {
      padding-left: 24px;
      margin: 0 0 16px;
    }
    li { margin-bottom: 8px; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
      background: white;
      border: 1px solid var(--border);
      border-radius: 6px;
      overflow: hidden;
    }
    table th,
    table td {
      border-bottom: 1px solid var(--border);
      padding: 12px;
      text-align: left;
    }
    table th {
      background: var(--accent);
      color: var(--primary);
      font-weight: 600;
    }
    table tr:last-child td {
      border-bottom: none;
    }
    .muted {
      color: var(--text-muted);
      font-size: 0.9rem;
      font-style: italic;
    }
    .card {
      background: var(--bg-light);
      padding: 20px;
      border-radius: 8px;
      margin: 16px 0;
      border-left: 4px solid var(--primary);
    }
    .doc-section {
      margin-bottom: 16px;
      background: white;
      border: 1px solid var(--border);
      border-radius: 8px;
      overflow: hidden;
    }
    .doc-section details {
      margin: 0;
    }
    .doc-section details summary {
      cursor: pointer;
      font-weight: 600;
      color: var(--primary);
      padding: 16px 20px;
      background: var(--bg-light);
      border-bottom: 1px solid var(--border);
      user-select: none;
      font-size: 1.5rem;
      list-style: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .doc-section details summary::-webkit-details-marker {
      display: none;
    }
    .doc-section details summary::before {
      content: '‚ñ∂';
      display: inline-block;
      transition: transform 0.2s;
      font-size: 0.8rem;
      color: var(--primary);
    }
    .doc-section details[open] summary::before {
      transform: rotate(90deg);
    }
    .doc-section details summary:hover {
      background: var(--accent);
    }
    .doc-section details .section-content {
      padding: 20px;
    }
    .doc-section details[open] summary {
      border-bottom: 1px solid var(--border);
    }
    .doc-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--accent);
      color: var(--primary);
      padding: 2px 10px;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-bottom: 8px;
    }
    .local-version-badge {
      background: #e0f2fe;
      color: #0369a1;
      padding: 8px 16px;
      margin: 16px 0;
      border-radius: 6px;
      border-left: 4px solid #0284c7;
      font-size: 0.9rem;
      font-weight: 500;
    }
    .llm-fallback-banner {
      padding: 8px 12px;
      margin-bottom: 16px;
      border-radius: 6px;
      background-color: #fefce8;
      color: #854d0e;
      border: 1px solid #fef9c3;
      font-size: 0.85rem;
    }
    .llm-fallback-badge {
      display: inline-block;
      padding: 4px 8px;
      margin-bottom: 12px;
      border-radius: 4px;
      background-color: #fff3cd;
      color: #856404;
      border: 1px solid #ffeeba;
      font-size: 0.9rem;
      font-weight: 600;
    }
    .llm-fallback-details {
      font-size: 0.8rem;
      color: #4b5563;
      margin-bottom: 16px;
      white-space: pre-wrap;
    }
    .llm-fallback-local-note {
      font-size: 0.8rem;
      color: #2563eb;
      margin-bottom: 16px;
    }
    details {
      margin: 16px 0;
    }
    details summary {
      cursor: pointer;
      font-weight: 600;
      color: var(--primary);
      padding: 12px;
      background: var(--bg-light);
      border: 1px solid var(--border);
      border-radius: 6px;
      user-select: none;
    }
    details summary:hover {
      background: var(--accent);
    }
    details[open] summary {
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
    }
    details .collapsible-content {
      padding: 16px;
      border: 1px solid var(--border);
      border-top: none;
      border-radius: 0 0 6px 6px;
      margin-top: 0;
    }
    img {
      max-width: 100%;
      height: auto;
      border: 1px solid var(--border);
      border-radius: 4px;
      margin: 12px 0;
    }
    a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
    }
    a:hover { text-decoration: underline; }
</style>
</head>
<body>
  <div class="local-version-badge" style="background: #e0f2fe; color: #0369a1; padding: 8px 16px; margin: 16px; border-radius: 6px; border-left: 4px solid #0284c7; font-size: 0.9rem; font-weight: 500;">
      üìÑ Lokal version ‚Äì F√∂rb√§ttrat inneh√•ll
    </div>

    <section class="doc-section">
      <details open>
        <summary>Beskrivning av FGoal</summary>
        <div class="section-content">
<p>Application √§r en omfattande kundaktivitet d√§r kunden samlar in och validerar all n√∂dv√§ndig information f√∂r en bol√•neans√∂kan. Processen startar automatiskt med intern datainsamling d√§r systemet h√§mtar befintlig kunddata och g√∂r en initial pre-screening. D√§refter forts√§tter processen med att kunden parallellt fyller i information om hush√•llsekonomi (inkomster, utgifter, tillg√•ngar, l√•neuppgifter) och stakeholders (personlig information f√∂r alla involverade parter samt fastighetsinformation). N√§r all data √§r insamlad och validerad mot aff√§rsregler, bekr√§ftar kunden ans√∂kan innan den g√•r vidare till automatisk kreditevaluering.</p>
      <p>Detta √§r prim√§rt en kundaktivitet d√§r kunden interagerar med systemet via kundportalen f√∂r att fylla i och bekr√§fta information. Systemet st√∂djer processen genom automatisk datainsamling, validering mot aff√§rsregler, och ber√§kning av maximalt l√•nebelopp baserat p√• hush√•llsaffordability.</p>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Processteg - Input</summary>
        <div class="section-content">
<p>Application-processen startar n√§r en kund initierar en bol√•neans√∂kan i Mortgage huvudprocessen. F√∂ljande information √§r tillg√§nglig vid start:</p>
      <ul>
        <li><strong>Grundl√§ggande ans√∂kningsdata:</strong> Ans√∂knings-ID, kund-ID, ans√∂kningstyp (k√∂p, flytt, oml√•ning), √∂nskat belopp, l√∂ptid, och fastighetstyp</li>
        <li><strong>Kundinformation:</strong> Identifierad kund med grundl√§ggande uppgifter fr√•n k√§rnsystemet</li>
        <li><strong>Processkontext:</strong> Application anropas automatiskt fr√•n Mortgage huvudprocessen som f√∂rsta steg i kreditprocessen</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Processteg - Output</summary>
        <div class="section-content">
<p>N√§r Application-processen √§r slutf√∂rd har f√∂ljande resultat uppn√•tts:</p>
      <ul>
        <li><strong>Komplett ans√∂kningsdata:</strong> All n√∂dv√§ndig information √§r insamlad och validerad, inklusive:
          <ul>
            <li>Intern data f√∂r alla identifierade parter (pre-screen genomf√∂rd)</li>
            <li>Hush√•llsekonomi (inkomster, utgifter, tillg√•ngar, l√•neuppgifter)</li>
            <li>Stakeholder-information f√∂r alla involverade parter (personlig information, kreditupplysning, bed√∂mning)</li>
            <li>Objekt/fastighetsinformation (fastighetstyp, v√§rdering, s√§kerhetsregistrering, bed√∂mning)</li>
          </ul>
        </li>
        <li><strong>KALP-ber√§kning:</strong> Systemet har ber√§knat maximalt l√•nebelopp baserat p√• hush√•llsaffordability (KALP = Kvar Att Leva P√•)</li>
        <li><strong>Ans√∂kan bekr√§ftad:</strong> Kunden har bekr√§ftat att all information √§r korrekt via "Confirm application"-steget (eller steget har hoppats √∂ver om det inte kr√§vs)</li>
        <li><strong>Kreditinformation h√§mtad:</strong> Systemet har h√§mtat kreditinformation fr√•n externa k√§llor (t.ex. UC3) f√∂r alla stakeholders</li>
        <li><strong>Processen avslutas:</strong> Ans√∂kan g√•r vidare till kreditevaluering i Mortgage huvudprocessen</li>
      </ul>
      <p><strong>Felhantering:</strong> Om n√•got steg misslyckas, kan processen avslutas med f√∂ljande fel:</p>
      <ul>
        <li><strong>Pre-screen rejected:</strong> En eller flera parter uppfyller inte grundl√§ggande krav (t.ex. √•lder, anst√§llningsstatus, kreditv√§rdighet)</li>
        <li><strong>Stakeholder rejected:</strong> En stakeholder (t.ex. medl√•ntagare) avvisas baserat p√• bed√∂mning</li>
        <li><strong>Object rejected:</strong> Fastigheten/bostadsr√§tten avvisas baserat p√• bed√∂mning (t.ex. f√∂r h√∂g LTV, d√•lig bel√§genhet)</li>
        <li><strong>Application rejected:</strong> KALP-ber√§kningen visar att maximalt l√•nebelopp √§r under tr√∂skelv√§rde eller under ans√∂kt belopp (beroende p√• ans√∂kningstyp)</li>
        <li><strong>Timeout:</strong> Kunden har inte bekr√§ftat ans√∂kan inom tidsgr√§nsen</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Omfattning</summary>
        <div class="section-content">
<p>Application-processen omfattar f√∂ljande huvudsteg och aktiviteter:</p>
      
      <h3>1. Intern datainsamling</h3>
      <ul>
        <li><strong>Internal data gathering:</strong> H√§mtar befintlig kunddata fr√•n interna system (part, engagemang, kreditinformation) och g√∂r pre-screening via DMN-beslutsregel. Processen k√∂rs automatiskt f√∂r varje identifierad part (multi-instance), vilket inneb√§r att om ans√∂kan inneh√•ller flera parter (t.ex. huvudans√∂kande och medl√•ntagare), genomf√∂rs datainsamling och pre-screening f√∂r varje part separat.</li>
      </ul>

      <h3>2. Objektinformation</h3>
      <ul>
        <li><strong>Object:</strong> Samlar in grundl√§ggande information om fastigheten/bostadsr√§tten som ans√∂kan g√§ller. Detta sker innan stakeholders-processen startar.</li>
      </ul>

      <h3>3. Parallell datainsamling</h3>
      <p>Efter att intern data och objektinformation √§r insamlad, startar tv√• parallella fl√∂den:</p>
      <ul>
        <li><strong>Household:</strong> Samlar in hush√•llsekonomi, personlig ekonomi, k√§lla till eget kapital och l√•neuppgifter. Detta √§r en kundaktivitet d√§r kunden fyller i ekonomisk information. Processen k√∂rs som multi-instance, vilket inneb√§r att den kan k√∂ras f√∂r flera hush√•ll om det beh√∂vs.</li>
        <li><strong>Stakeholders (subprocess "Per household"):</strong> Samlar in information om alla involverade parter (stakeholders). Denna subprocess k√∂rs ocks√• som multi-instance - en g√•ng per hush√•ll. Inne i subprocessen genomf√∂rs tv√• steg sekventiellt f√∂r varje stakeholder:
          <ul>
            <li><strong>Household (call activity):</strong> F√∂rst samlas hush√•llsekonomi in f√∂r den specifika stakeholder:n (detta √§r en separat Household-process som k√∂rs inuti stakeholders-subprocessen)</li>
            <li><strong>Stakeholder (call activity):</strong> Sedan registreras personlig information, samtycke till kreditupplysning ges, systemet h√§mtar och utv√§rderar personlig information automatiskt, och stakeholder bed√∂ms via DMN-beslutsregel</li>
            <li><strong>Object (call activity):</strong> Slutligen hanteras fastighetsinformation (fastighetstyp, v√§rdering, s√§kerhetsregistrering) och fastighet/bostadsr√§tt utv√§rderas via DMN</li>
          </ul>
        </li>
      </ul>

      <h3>4. KALP-ber√§kning och bekr√§ftelse</h3>
      <ul>
        <li><strong>Skip step? (beslutspunkt):</strong> Efter att Household och Stakeholders √§r klara, avg√∂rs om bekr√§ftelsesteget ska hoppas √∂ver eller inte. Om bekr√§ftelse hoppas √∂ver, ber√§knas KALP direkt och processen g√•r vidare till kreditupplysning utan kundens bekr√§ftelse. Om bekr√§ftelse inte hoppas √∂ver, g√•r processen direkt vidare till bekr√§ftelsesteget.</li>
        <li><strong>KALP (automatisk ber√§kning):</strong> Om bekr√§ftelsesteget ska hoppas √∂ver, ber√§knar systemet automatiskt maximalt l√•nebelopp baserat p√• hush√•llsaffordability (KALP = Kvar Att Leva P√•). Detta √§r en automatisk ber√§kning som tar h√§nsyn till inkomster, utgifter, befintliga l√•n och andra ekonomiska faktorer f√∂r att avg√∂ra hur mycket kunden kan l√•na.</li>
        <li><strong>Screen KALP (aff√§rsregelutv√§rdering):</strong> Efter KALP-ber√§kningen utv√§rderas resultatet automatiskt mot aff√§rsregler via DMN-beslutsregel. Beroende p√• ans√∂kningstyp (k√∂p, flytt, oml√•ning) och om maximalt l√•nebelopp √§r under tr√∂skelv√§rde eller under ans√∂kt belopp, kan ans√∂kan avvisas automatiskt. Reglerna varierar beroende p√• ans√∂kningstyp:
          <ul>
            <li><strong>F√∂r k√∂p:</strong> Om maximalt l√•nebelopp √§r under tr√∂skelv√§rde ‚Üí avvisa. Om maximalt l√•nebelopp √§r under ans√∂kt belopp ‚Üí s√§tt ans√∂kt belopp till maximalt belopp. Om maximalt l√•nebelopp √§r √∂ver ans√∂kt belopp ‚Üí inga √§ndringar.</li>
            <li><strong>F√∂r flytt/oml√•ning:</strong> Om maximalt l√•nebelopp √§r under ans√∂kt belopp ‚Üí avvisa.</li>
          </ul>
        </li>
        <li><strong>KALP OK? (beslutspunkt):</strong> Avg√∂r om KALP-ber√§kningen och screening √§r godk√§nd. Om ja, g√•r processen vidare till bekr√§ftelse (om bekr√§ftelse inte hoppades √∂ver) eller direkt till kreditupplysning (om bekr√§ftelse hoppades √∂ver). Om nej, avvisas ans√∂kan automatiskt.</li>
        <li><strong>Confirm application (kundaktivitet):</strong> Kunden bekr√§ftar att all information √§r korrekt innan ans√∂kan g√•r vidare. Kunden ser en sammanfattning av all insamlad information (intern data, hush√•ll, stakeholders, objekt) och bekr√§ftar att allt √§r korrekt. Detta steg har en timeout - om kunden inte bekr√§ftar inom tidsgr√§nsen, avslutas processen med timeout-fel.</li>
      </ul>

      <h3>5. Kreditupplysning</h3>
      <ul>
        <li><strong>Sammanf√∂r fl√∂den (beslutspunkt):</strong> Efter att antingen bekr√§ftelse √§r klar (om bekr√§ftelse inte hoppades √∂ver) eller direktfl√∂det √§r klart (om bekr√§ftelse hoppades √∂ver), samlas b√•da fl√∂den ihop innan kreditupplysning startar. Detta s√§kerst√§ller att kreditupplysning bara startar n√§r antingen bekr√§ftelse √§r klar eller bekr√§ftelse har hoppats √∂ver.</li>
        <li><strong>Fetch credit information (automatisk h√§mtning):</strong> Efter att fl√∂den har samlats ihop, h√§mtar systemet automatiskt kreditinformation fr√•n externa k√§llor (t.ex. UC3) f√∂r alla stakeholders. Detta k√∂rs som multi-instance - en g√•ng per stakeholder. Kreditinformationen lagras i datastore "Personal credit information source" f√∂r anv√§ndning i senare steg i kreditprocessen.</li>
      </ul>

      <h3>Felhantering</h3>
      <ul>
        <li><strong>Pre-screen rejected:</strong> Om en eller flera parter avvisas vid pre-screening (fr√•n Internal data gathering), triggas ett error event som avslutar processen</li>
        <li><strong>Stakeholder rejected:</strong> Om en stakeholder avvisas (fr√•n Stakeholder call activity), triggas ett error event som avslutar processen</li>
        <li><strong>Object rejected:</strong> Om fastigheten/bostadsr√§tten avvisas (fr√•n Object call activity), triggas ett error event som avslutar processen</li>
        <li><strong>Application rejected:</strong> Om KALP-ber√§kningen eller screening visar att ans√∂kan ska avvisas, avslutas processen med error event</li>
        <li><strong>Timeout:</strong> Om kunden inte bekr√§ftar ans√∂kan inom tidsgr√§nsen, avslutas processen med timeout-fel</li>
      </ul>

      <h3>Tekniska krav</h3>
      <ul>
        <li><strong>Timeout:</strong> User tasks ska ha timeout p√• 30 dagar f√∂r kundaktiviteter. Service tasks och business rule tasks ska ha timeout p√• 60 sekunder</li>
        <li><strong>Retry:</strong> Service tasks och business rule tasks ska ha automatisk retry med exponential backoff (max 3 f√∂rs√∂k) vid tekniska fel</li>
        <li><strong>Error codes:</strong> Systemet ska returnera specifika error codes: APPLICATION_PRE_SCREEN_REJECTED, APPLICATION_STAKEHOLDER_REJECTED, APPLICATION_OBJECT_REJECTED, APPLICATION_REJECTED, APPLICATION_TIMEOUT</li>
        <li><strong>Logging:</strong> Alla ans√∂kningssteg, multi-instance bearbetningar och fel ska loggas med ans√∂knings-ID, tidsst√§mplar och resultat f√∂r sp√•rbarhet</li>
      </ul>

      <h3>UI/UX-krav</h3>
      <ul>
        <li><strong>Kund-vyer:</strong> User tasks ska visa tydlig, strukturerad information med separata sektioner f√∂r varje steg (pre-screen, household, stakeholder, object, confirmation)</li>
        <li><strong>Multi-instance progress:</strong> Systemet ska visa progress f√∂r multi-instance bearbetningar (t.ex. "Bearbetar hush√•ll 2 av 3", "Bearbetar stakeholder 1 av 2")</li>
        <li><strong>Statusindikatorer:</strong> Systemet ska visa tydlig status f√∂r varje steg i processen med visuella indikatorer</li>
        <li><strong>Parallellisering:</strong> Systemet ska till√•ta kunden att fylla i hush√•llsekonomi och stakeholder-information samtidigt</li>
      </ul>

      <h3>Skalbarhet och prestanda</h3>
      <ul>
        <li><strong>Parallellisering:</strong> Multi-instance subprocesses ska kunna k√∂ras parallellt f√∂r att f√∂rb√§ttra prestanda</li>
        <li><strong>Load balancing:</strong> Service tasks och business rule tasks ska kunna hantera minst 50 ans√∂kningar per minut</li>
        <li><strong>Caching:</strong> Systemet ska implementera caching f√∂r pre-screen och screening-resultat</li>
      </ul>

      <h3>S√§kerhet och compliance</h3>
      <ul>
        <li><strong>Dataskydd:</strong> All k√§nslig ans√∂kningsinformation ska krypteras i vila och under √∂verf√∂ring (TLS 1.3). √Ötkomst till ans√∂kningsdata ska loggas f√∂r audit trail</li>
        <li><strong>GDPR-efterlevnad:</strong> Alla ans√∂kningar ska inneh√•lla sp√•rbarhet f√∂r n√§r ans√∂kan skickades, vilka steg som genomf√∂rdes och resultatet, f√∂r att uppfylla GDPR-krav</li>
        <li><strong>Audit trail:</strong> Alla ans√∂kningssteg, multi-instance bearbetningar och fel ska loggas med ans√∂knings-ID, tidsst√§mplar och resultat f√∂r fullst√§ndig sp√•rbarhet</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Avgr√§nsning</summary>
        <div class="section-content">
<ul>
        <li>Kreditevaluering ing√•r inte - den sker i huvudprocessen efter Application</li>
        <li>KYC-processen ing√•r inte - den sker i huvudprocessen efter Application</li>
        <li>Kreditbeslut ing√•r inte - det sker i huvudprocessen efter Application</li>
        <li>Dokumentgenerering ing√•r inte - den sker senare i huvudprocessen</li>
        <li>Signering och utbetalning ing√•r inte - de sker senare i huvudprocessen</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Beroenden</summary>
        <div class="section-content">
<p>Application-processen √§r beroende av f√∂ljande system, processer och regler:</p>
      
      <h3>Processer</h3>
      <ul>
        <li><strong>Mortgage huvudprocess:</strong> Application anropas fr√•n Mortgage huvudprocessen som f√∂rsta steg i kreditprocessen. N√§r Application √§r slutf√∂rd, forts√§tter huvudprocessen med kreditevaluering</li>
        <li><strong>Internal data gathering (subprocess):</strong> H√§mtar data fr√•n interna system (part, engagemang, kreditinformation) och g√∂r pre-screening via DMN-beslutsregel. K√∂rs automatiskt f√∂r varje identifierad part</li>
        <li><strong>Household (subprocess):</strong> Samlar in hush√•llsekonomi, personlig ekonomi, k√§lla till eget kapital och l√•neuppgifter. Detta √§r en kundaktivitet som k√∂rs parallellt med Stakeholders-processen</li>
        <li><strong>Stakeholders (subprocess "Per household"):</strong> Hanterar information om alla involverade parter och deras fastigheter. Inneh√•ller Household, Stakeholder och Object call activities som k√∂rs sekventiellt f√∂r varje stakeholder</li>
        <li><strong>Stakeholder (subprocess):</strong> Registrerar personlig information, hanterar samtycke till kreditupplysning, h√§mtar och utv√§rderar personlig information, och bed√∂mer stakeholder via DMN</li>
        <li><strong>Object (subprocess):</strong> Hanterar fastighetsinformation (fastighetstyp, v√§rdering, s√§kerhetsregistrering) och utv√§rderar fastighet/bostadsr√§tt via DMN</li>
      </ul>

      <h3>Aff√§rsregler (DMN)</h3>
      <ul>
        <li><strong>Pre-screen Party:</strong> Bed√∂mer om en part uppfyller grundl√§ggande krav f√∂r att forts√§tta med ans√∂kan (t.ex. √•lder, anst√§llningsstatus, kreditv√§rdighet). Anv√§nds i Internal data gathering</li>
        <li><strong>Assess Stakeholder:</strong> Bed√∂mer borrower capacity f√∂r en stakeholder baserat p√• √•rsinkomst, DTI-ratio (debt-to-income), och kredithistorik. Anv√§nds i Stakeholder-processen</li>
        <li><strong>Evaluate Fastighet:</strong> Bed√∂mer om en fastighet (hus) uppfyller krav baserat p√• fastighetsv√§rde, skick, LTV (loan-to-value), och bel√§genhet. Anv√§nds i Object-processen f√∂r fastigheter</li>
        <li><strong>Evaluate Bostadsr√§tt:</strong> Bed√∂mer om en bostadsr√§tt uppfyller krav baserat p√• l√§genhetsv√§rde, f√∂reningsskuld, och LTV. Anv√§nds i Object-processen f√∂r bostadsr√§tter</li>
      </ul>

      <h3>System och tj√§nster</h3>
      <ul>
        <li><strong>Interna system:</strong>
          <ul>
            <li><strong>Partsystem:</strong> F√∂r att h√§mta grundl√§ggande kundinformation</li>
            <li><strong>Engagemangssystem:</strong> F√∂r att h√§mta befintliga engagemang och l√•neuppgifter</li>
            <li><strong>KALP-system:</strong> F√∂r att ber√§kna maximalt l√•nebelopp baserat p√• hush√•llsaffordability</li>
          </ul>
        </li>
        <li><strong>Externa system:</strong>
          <ul>
            <li><strong>Kreditupplysningstj√§nster (t.ex. UC3):</strong> F√∂r att h√§mta kreditinformation f√∂r alla stakeholders</li>
          </ul>
        </li>
        <li><strong>Kundportal:</strong> F√∂r att kunden ska kunna fylla i information (hush√•llsekonomi, stakeholder-information, objekt-information) och bekr√§fta ans√∂kan</li>
      </ul>

      <h3>Data</h3>
      <ul>
        <li><strong>KALP (data store):</strong> Lagrar resultatet av KALP-ber√§kningen (maximalt l√•nebelopp)</li>
        <li><strong>Personal credit information source (data store):</strong> Lagrar kreditinformation som h√§mtats fr√•n externa k√§llor</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>BPMN - Process</summary>
        <div class="section-content">
<p><a href="#/bpmn/mortgage-se-application.bpmn">Visa BPMN-processen f√∂r Application</a></p>
      
      <h3>Processfl√∂de</h3>
      <p>Application-processen f√∂ljer f√∂ljande fl√∂de:</p>
      <ol>
        <li><strong>Start:</strong> Processen startar n√§r Application anropas fr√•n Mortgage huvudprocessen</li>
        <li><strong>Intern datainsamling:</strong> Systemet h√§mtar automatiskt befintlig kunddata fr√•n interna system och g√∂r pre-screening f√∂r varje identifierad part (multi-instance). Om n√•gon part avvisas vid pre-screening, avslutas processen med "Party rejected"-fel</li>
        <li><strong>Objektinformation:</strong> Grundl√§ggande information om fastigheten/bostadsr√§tten samlas in. Om objektet avvisas, avslutas processen med "Object rejected"-fel</li>
        <li><strong>Parallell datainsamling:</strong> Tv√• fl√∂den startar parallellt:
          <ul>
            <li><strong>Household:</strong> Kunden fyller i hush√•llsekonomi (k√∂rs som multi-instance om det finns flera hush√•ll)</li>
            <li><strong>Stakeholders (subprocess "Per household"):</strong> F√∂r varje hush√•ll (multi-instance) genomf√∂rs sekventiellt:
              <ol>
                <li>Household (call activity) - hush√•llsekonomi f√∂r den specifika stakeholder:n</li>
                <li>Stakeholder (call activity) - personlig information och bed√∂mning</li>
                <li>Object (call activity) - fastighetsinformation och bed√∂mning</li>
              </ol>
              Om n√•gon stakeholder eller objekt avvisas, avslutas processen med respektive fel
            </li>
          </ul>
        </li>
        <li><strong>Bekr√§ftelse eller hoppa √∂ver:</strong> Efter att b√•da parallella fl√∂den √§r klara, avg√∂rs om bekr√§ftelsesteget ska hoppas √∂ver:
          <ul>
            <li><strong>Om ja (hoppa √∂ver):</strong> Systemet ber√§knar KALP (maximalt l√•nebelopp), screenar resultatet mot aff√§rsregler, och om godk√§nt g√•r direkt vidare till kreditupplysning</li>
            <li><strong>Om nej (inte hoppa √∂ver):</strong> Processen g√•r direkt vidare till bekr√§ftelsesteget</li>
          </ul>
        </li>
        <li><strong>KALP-ber√§kning och screening:</strong> Om bekr√§ftelse hoppades √∂ver, ber√§knas maximalt l√•nebelopp och screenas. Om screening visar att ans√∂kan ska avvisas (t.ex. maximalt belopp under tr√∂skelv√§rde eller under ans√∂kt belopp f√∂r vissa ans√∂kningstyper), avslutas processen med "Application rejected"-fel</li>
        <li><strong>Bekr√§ftelse:</strong> Kunden bekr√§ftar att all information √§r korrekt. Detta steg har en timeout - om kunden inte bekr√§ftar inom tidsgr√§nsen, avslutas processen med "Timeout"-fel</li>
        <li><strong>Kreditupplysning:</strong> Systemet h√§mtar kreditinformation fr√•n externa k√§llor (t.ex. UC3) f√∂r alla stakeholders (multi-instance)</li>
        <li><strong>Slut:</strong> Processen avslutas och ans√∂kan g√•r vidare till kreditevaluering i Mortgage huvudprocessen</li>
      </ol>
      
      <h3>Viktiga beslutspunkter</h3>
      <ul>
        <li><strong>"Skip step?" gateway:</strong> Avg√∂r om bekr√§ftelsesteget ska hoppas √∂ver eller inte. Om bekr√§ftelse hoppas √∂ver, ber√§knas KALP direkt och processen g√•r vidare till kreditupplysning utan kundens bekr√§ftelse</li>
        <li><strong>"KALP OK?" gateway:</strong> Avg√∂r om KALP-ber√§kningen och screening √§r godk√§nd. Om nej, avvisas ans√∂kan automatiskt. Om ja, g√•r processen vidare till bekr√§ftelse (om bekr√§ftelse inte hoppades √∂ver) eller direkt till kreditupplysning</li>
        <li><strong>"Sammanf√∂r fl√∂den" gateway:</strong> Samlar ihop fl√∂den fr√•n b√•de bekr√§ftelsesteget (om det inte hoppades √∂ver) och direktfl√∂det (om bekr√§ftelse hoppades √∂ver), innan kreditupplysning startar. Detta s√§kerst√§ller att kreditupplysning bara startar n√§r antingen bekr√§ftelse √§r klar eller bekr√§ftelse har hoppats √∂ver</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Testgenerering</summary>
        <div class="section-content">
<p class="muted">Information f√∂r att generera automatiserade tester. Delar kan auto-genereras fr√•n processbeskrivningen, men kompletteras manuellt med implementation-specifik information (routes, locators, testdata).</p>

      <h3>Testscenarier</h3>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Namn</th>
            <th>Typ</th>
            <th>Persona</th>
            <th>Risk Level</th>
            <th>Assertion Type</th>
            <th>Outcome</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          
      <tr>
        <td><strong>S1</strong></td>
        <td>Normalfl√∂de ‚Äì komplett ans√∂kan med en person</td>
        <td>Happy</td>
        <td>customer</td>
        <td>P0</td>
        <td>functional</td>
        <td><strong>Given:</strong> En person ans√∂ker om bol√•n f√∂r k√∂p. Alla krav uppfylls (pre-screening godk√§nd, fastighet godk√§nd). Testdata: customer-standard. <strong>When:</strong> Processen k√∂rs genom alla steg: pre-screening ‚Üí objekt ‚Üí hush√•ll/stakeholders ‚Üí KALP-ber√§kning ‚Üí bekr√§ftelse ‚Üí kreditupplysning. <strong>Then:</strong> Alla DMN-beslut returnerar APPROVED. KALP-ber√§kning √§r h√∂gre √§n ans√∂kt belopp. Kunden bekr√§ftar ans√∂kan. Kreditinformation h√§mtas. Processen avslutas normalt (Event_0j4buhs). Ans√∂kan √§r klar f√∂r kreditevaluering.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S2</strong></td>
        <td>Normalfl√∂de ‚Äì ans√∂kan med flera personer och hush√•ll</td>
        <td>Happy</td>
        <td>customer</td>
        <td>P0</td>
        <td>functional</td>
        <td><strong>Given:</strong> Flera personer ans√∂ker tillsammans med separata hush√•ll. Alla personer √§r godk√§nda. Testdata: customer-multi-household. <strong>When:</strong> Tv√• parallella fl√∂den startar: (1) Household f√∂r alla hush√•ll parallellt, (2) Per household subprocess med sekventiell k√∂rning (Household ‚Üí Stakeholder ‚Üí Object) per hush√•ll. <strong>Then:</strong> Parallella fl√∂den k√∂rs korrekt. Varje hush√•ll bearbetas i r√§tt ordning. Alla hush√•ll och personer √§r bearbetade. Processen forts√§tter n√§r b√•da fl√∂den √§r klara.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S3</strong></td>
        <td>Pre-screen avvisad ‚Äì kund uppfyller inte grundl√§ggande krav</td>
        <td>Error</td>
        <td>customer</td>
        <td>P0</td>
        <td>functional</td>
        <td><strong>Given:</strong> Person uppfyller INTE grundl√§ggande krav (t.ex. f√∂r ung, l√•g kreditscore, eller saknar anst√§llning). Testdata: customer-rejected. <strong>When:</strong> Pre-screen Party DMN utv√§rderas. <strong>Then:</strong> DMN returnerar REJECTED. Boundary event Event_03349px triggas. Error_1vtortg (pre-screen-rejected) signaleras. Processen avslutas (Event_1uj7wwd). Tydligt felmeddelande visas som f√∂rklarar vilket krav som inte uppfylldes.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S4</strong></td>
        <td>Stakeholder avvisad ‚Äì medl√•ntagare uppfyller inte krav</td>
        <td>Error</td>
        <td>customer</td>
        <td>P1</td>
        <td>functional</td>
        <td><strong>Given:</strong> Flera personer ans√∂ker tillsammans. Medl√•ntagare uppfyller INTE kraven (t.ex. f√∂r h√∂g skulds√§ttning, l√•g inkomst). Testdata: customer-multi-stakeholder, stakeholder-rejected. <strong>When:</strong> Assess Stakeholder DMN utv√§rderas f√∂r medl√•ntagaren. <strong>Then:</strong> DMN returnerar REJECTED. Boundary event Event_1dhapnx triggas. Error_0xx0ma1 (stakeholder-rejected) signaleras. Processen avslutas (Event_1uk9ycv). Tydligt felmeddelande visas. Huvuds√∂kande kan inte forts√§tta ensam.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S5</strong></td>
        <td>Object avvisad ‚Äì fastighet uppfyller inte krav</td>
        <td>Error</td>
        <td>customer</td>
        <td>P1</td>
        <td>functional</td>
        <td><strong>Given:</strong> Fastighet uppfyller INTE bankens krav (t.ex. f√∂r h√∂g bel√•ningsgrad, d√•lig bel√§genhet, eller d√•ligt skick). Testdata: customer-standard, property-rejected. <strong>When:</strong> Evaluate Fastighet/Bostadsr√§tt DMN utv√§rderas. <strong>Then:</strong> DMN returnerar REJECTED. Boundary event Event_152muhg triggas. Error_1pe398g (object-rejected) signaleras. Processen avslutas (Event_07jlrhu). Tydligt felmeddelande visas som f√∂rklarar problemet.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S6</strong></td>
        <td>Bekr√§ftelse hoppas √∂ver ‚Äì direkt till kreditupplysning</td>
        <td>Happy</td>
        <td>system</td>
        <td>P0</td>
        <td>functional</td>
        <td><strong>Given:</strong> √Öterkommande kund med god kredithistorik. Bekr√§ftelse kan hoppas √∂ver enligt aff√§rsregler. Testdata: customer-returning. <strong>When:</strong> Gateway skip-confirm-application = Yes. KALP ber√§knas och screenas. <strong>Then:</strong> KALP √§r godk√§nd. Confirm application hoppas √∂ver. Processen g√•r direkt till kreditupplysning utan kundens bekr√§ftelse.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S7</strong></td>
        <td>KALP-ber√§kning godk√§nd ‚Äì maximalt belopp √∂ver ans√∂kt belopp</td>
        <td>Happy</td>
        <td>system</td>
        <td>P0</td>
        <td>functional</td>
        <td><strong>Given:</strong> Kunden har god ekonomi. Bekr√§ftelse hoppas INTE √∂ver. Testdata: customer-standard. <strong>When:</strong> KALP ber√§knas. Screen KALP DMN utv√§rderas. <strong>Then:</strong> Maximalt belopp √§r h√∂gre √§n ans√∂kt belopp. Screen KALP returnerar APPROVED. Gateway_0fhav15 (KALP OK) = Yes. Kunden kan bekr√§fta ans√∂kan. Processen forts√§tter.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S8</strong></td>
        <td>Application avvisad ‚Äì flytt/oml√•ning, maximalt belopp under ans√∂kt belopp</td>
        <td>Error</td>
        <td>customer</td>
        <td>P0</td>
        <td>functional</td>
        <td><strong>Given:</strong> Flytt/oml√•ning. Maximalt belopp < ans√∂kt belopp. F√∂r flytt/oml√•ning avvisas ans√∂kan om maximalt < ans√∂kt (till skillnad fr√•n k√∂p d√§r beloppet justeras). Testdata: application-move-refinance, kalp-below-applied. <strong>When:</strong> Screen KALP DMN utv√§rderas f√∂r flytt/oml√•ning. <strong>Then:</strong> Screen KALP returnerar REJECTED. Gateway_0fhav15 (KALP OK) = No. Error_08o6vkh (application-rejected) signaleras. Processen avslutas. Tydligt felmeddelande: "Maximalt l√•nebelopp √§r under ans√∂kt belopp. F√∂r flytt/oml√•ning m√•ste du kunna l√•na det ans√∂kta beloppet."</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S9</strong></td>
        <td>Application avvisad ‚Äì k√∂p, maximalt belopp under tr√∂skelv√§rde</td>
        <td>Error</td>
        <td>customer</td>
        <td>P0</td>
        <td>functional</td>
        <td><strong>Given:</strong> K√∂pans√∂kan. Maximalt belopp < tr√∂skelv√§rde f√∂r k√∂p. Testdata: application-purchase, kalp-below-threshold. <strong>When:</strong> Screen KALP DMN utv√§rderas f√∂r k√∂p. <strong>Then:</strong> Screen KALP returnerar REJECTED (regel: om maximalt < tr√∂skelv√§rde ‚Üí avvisa). Gateway_0fhav15 (KALP OK) = No. Error_08o6vkh (application-rejected) signaleras. Processen avslutas. Tydligt felmeddelande: "Maximalt l√•nebelopp √§r under v√•rt minimumbelopp f√∂r k√∂pans√∂kningar."</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S10</strong></td>
        <td>K√∂pans√∂kan ‚Äì ans√∂kt belopp justeras automatiskt ned√•t</td>
        <td>Happy</td>
        <td>customer</td>
        <td>P1</td>
        <td>functional</td>
        <td><strong>Given:</strong> K√∂pans√∂kan. Maximalt belopp < ans√∂kt belopp. F√∂r k√∂p kan beloppet justeras ned√•t (till skillnad fr√•n flytt/oml√•ning). Testdata: application-purchase, kalp-below-applied. <strong>When:</strong> Screen KALP DMN utv√§rderas f√∂r k√∂p. <strong>Then:</strong> Screen KALP returnerar APPROVED med justering. Ans√∂kt belopp justeras automatiskt till maximalt belopp. Gateway_0fhav15 (KALP OK) = Yes. Kunden informeras om justeringen. Processen forts√§tter.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S11</strong></td>
        <td>Timeout ‚Äì kunden bekr√§ftar inte ans√∂kan i tid</td>
        <td>Error</td>
        <td>customer</td>
        <td>P1</td>
        <td>functional</td>
        <td><strong>Given:</strong> Confirm application user task √§r aktiv. Timeout = 30 dagar (P30D). Kunden bekr√§ftar INTE ans√∂kan. Testdata: timeout-scenario. <strong>When:</strong> 30 dagar passerar utan bekr√§ftelse. <strong>Then:</strong> Boundary event Event_0ao6cvb (timer) triggas. Error_1bicfvu (application-timeout) signaleras. Processen avslutas (Event_111g1im). Tydligt meddelande: "Ans√∂kan avslutad: Du har inte bekr√§ftat ans√∂kan inom tidsgr√§nsen (30 dagar)." Kunden kan starta ny ans√∂kan.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S12</strong></td>
        <td>Kreditupplysning ‚Äì h√§mtas f√∂r alla personer i ans√∂kan</td>
        <td>Happy</td>
        <td>system</td>
        <td>P1</td>
        <td>functional</td>
        <td><strong>Given:</strong> Ans√∂kan med flera personer har bekr√§ftats eller bekr√§ftelse har hoppats √∂ver. Testdata: customer-multi-stakeholder. <strong>When:</strong> Fetch credit information k√∂rs (multi-instance per stakeholder). <strong>Then:</strong> Kreditinformation h√§mtas fr√•n externa k√§llor (t.ex. UC3) f√∂r varje person parallellt. Information sparas i "Personal credit information source" datastore. Processen avslutas normalt (Event_0j4buhs). Ans√∂kan √§r klar f√∂r kreditevaluering.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S13</strong></td>
        <td>Pre-screen avvisad ‚Äì en av flera personer uppfyller inte krav</td>
        <td>Error</td>
        <td>system</td>
        <td>P1</td>
        <td>functional</td>
        <td><strong>Given:</strong> Flera personer ans√∂ker tillsammans. En person uppfyller INTE grundl√§ggande krav. Testdata: customer-multi-stakeholder, stakeholder-rejected-pre-screen. <strong>When:</strong> Pre-screen Party DMN utv√§rderas f√∂r alla personer parallellt. <strong>Then:</strong> DMN returnerar REJECTED f√∂r en person. Boundary event Event_03349px triggas n√§r f√∂rsta part avvisas. Error_1vtortg (pre-screen-rejected) signaleras. Processen avslutas omedelbart (Event_1uj7wwd), √§ven om andra personer √§r godk√§nda. Tydligt felmeddelande visas.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S14</strong></td>
        <td>Flera hush√•ll ‚Äì information samlas in i r√§tt ordning</td>
        <td>Edge</td>
        <td>system</td>
        <td>P1</td>
        <td>functional</td>
        <td><strong>Given:</strong> Flera personer med separata hush√•ll. Varje hush√•ll har egen ekonomi och fastighet. Testdata: customer-multi-household. <strong>When:</strong> Per household subprocess k√∂rs (multi-instance per hush√•ll). F√∂r varje hush√•ll k√∂rs sekventiellt: Household ‚Üí Stakeholder ‚Üí Object. <strong>Then:</strong> Sekvensen √§r korrekt per hush√•ll. Varje hush√•ll bearbetas individuellt. Alla hush√•ll √§r bearbetade i r√§tt ordning. Processen forts√§tter n√§r alla hush√•ll √§r klara.</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
      <tr>
        <td><strong>S15</strong></td>
        <td>Kreditupplysning misslyckas ‚Äì extern tj√§nst svarar inte</td>
        <td>Error</td>
        <td>system</td>
        <td>P1</td>
        <td>functional</td>
        <td><strong>Given:</strong> Ans√∂kan har bekr√§ftats. Extern tj√§nst (t.ex. UC3) √§r otillg√§nglig eller svarar inte inom timeout. Testdata: external-service-unavailable. <strong>When:</strong> Fetch credit information k√∂rs (multi-instance per stakeholder). <strong>Then:</strong> F√∂r vissa personer lyckas h√§mtningen, f√∂r andra misslyckas den. Systemet hanterar felet: retry-mekanism ELLER tydligt felmeddelande. Partiell information kan sparas om vissa personer lyckas. Tydligt felmeddelande: "Kreditupplysning kunde inte h√§mtas f√∂r [person]. V√§nligen f√∂rs√∂k igen senare."</td>
        <td>‚úÖ Planerad</td>
      </tr>
    
        </tbody>
      </table>

      <h3>UI Flow per Scenario</h3>
      <p class="muted">Detaljerade steg f√∂r varje scenario. Expandera f√∂r att se UI Flow.</p>
      
      <details style="margin: 12px 0; padding: 12px; border: 1px solid var(--border); border-radius: 6px;">
        <summary style="cursor: pointer; font-weight: 600; color: var(--primary);">
          <strong>S1: Normalfl√∂de ‚Äì komplett ans√∂kan med en stakeholder</strong> (Klicka f√∂r att expandera)
        </summary>
        <table style="margin-top: 12px;">
          <thead>
            <tr>
              <th>Steg</th>
              <th>Page ID</th>
              <th>Action</th>
              <th>Locator ID</th>
              <th>Data Profile</th>
              <th>Kommentar</th>
            </tr>
          </thead>
          <tbody>
            
        <tr>
          <td>1</td>
          <td>application-start</td>
          <td>navigate</td>
          <td>nav-application</td>
          <td>customer-standard</td>
          <td>Navigera till Application-processen fr√•n Mortgage huvudprocess</td>
        </tr>
      
        <tr>
          <td>2</td>
          <td>internal-data-gathering</td>
          <td>navigate</td>
          <td>nav-internal-data</td>
          <td>customer-standard</td>
          <td>Internal data gathering startar automatiskt (multi-instance per part). V√§nta p√• att systemet h√§mtar data fr√•n interna system.</td>
        </tr>
      
        <tr>
          <td>3</td>
          <td>internal-data-gathering</td>
          <td>verify</td>
          <td>pre-screen-result-approved</td>
          <td>customer-standard</td>
          <td>Verifiera att Pre-screen Party DMN returnerar "APPROVED"</td>
        </tr>
      
        <tr>
          <td>4</td>
          <td>household</td>
          <td>navigate</td>
          <td>nav-household</td>
          <td>customer-standard</td>
          <td>Navigera till Household-formul√§r (k√∂rs parallellt med Stakeholders)</td>
        </tr>
      
        <tr>
          <td>5</td>
          <td>household</td>
          <td>fill</td>
          <td>input-household-economy</td>
          <td>customer-standard</td>
          <td>Fyll i hush√•llsekonomi (inkomster, utgifter, tillg√•ngar)</td>
        </tr>
      
        <tr>
          <td>6</td>
          <td>household</td>
          <td>fill</td>
          <td>input-personal-economy</td>
          <td>customer-standard</td>
          <td>Fyll i personlig ekonomi (l√∂ner, andra inkomster)</td>
        </tr>
      
        <tr>
          <td>7</td>
          <td>household</td>
          <td>fill</td>
          <td>input-equity-source</td>
          <td>customer-standard</td>
          <td>Fyll i k√§lla till eget kapital</td>
        </tr>
      
        <tr>
          <td>8</td>
          <td>household</td>
          <td>fill</td>
          <td>input-loan-details</td>
          <td>customer-standard</td>
          <td>Fyll i l√•neuppgifter (befintliga l√•n, krediter)</td>
        </tr>
      
        <tr>
          <td>9</td>
          <td>household</td>
          <td>click</td>
          <td>btn-submit-household</td>
          <td>customer-standard</td>
          <td>Skicka in Household-data</td>
        </tr>
      
        <tr>
          <td>10</td>
          <td>stakeholders</td>
          <td>navigate</td>
          <td>nav-stakeholders</td>
          <td>customer-standard</td>
          <td>Navigera till Stakeholders (k√∂rs parallellt med Household)</td>
        </tr>
      
        <tr>
          <td>11</td>
          <td>stakeholder</td>
          <td>navigate</td>
          <td>nav-stakeholder</td>
          <td>customer-standard</td>
          <td>Navigera till Stakeholder-formul√§r (f√∂rsta stakeholder = huvudans√∂kande)</td>
        </tr>
      
        <tr>
          <td>12</td>
          <td>stakeholder</td>
          <td>fill</td>
          <td>input-personal-info</td>
          <td>customer-standard</td>
          <td>Fyll i personlig information (namn, personnummer, kontaktuppgifter)</td>
        </tr>
      
        <tr>
          <td>13</td>
          <td>stakeholder</td>
          <td>click</td>
          <td>checkbox-credit-consent</td>
          <td>customer-standard</td>
          <td>Ge samtycke till kreditupplysning</td>
        </tr>
      
        <tr>
          <td>14</td>
          <td>stakeholder</td>
          <td>click</td>
          <td>btn-submit-stakeholder</td>
          <td>customer-standard</td>
          <td>Skicka in Stakeholder-data. Systemet h√§mtar och utv√§rderar personlig information automatiskt.</td>
        </tr>
      
        <tr>
          <td>15</td>
          <td>stakeholder</td>
          <td>verify</td>
          <td>assess-stakeholder-approved</td>
          <td>customer-standard</td>
          <td>Verifiera att Assess Stakeholder DMN returnerar "APPROVED"</td>
        </tr>
      
        <tr>
          <td>16</td>
          <td>object</td>
          <td>navigate</td>
          <td>nav-object</td>
          <td>customer-standard</td>
          <td>Navigera till Object-formul√§r (k√∂rs sekventiellt efter Stakeholder)</td>
        </tr>
      
        <tr>
          <td>17</td>
          <td>object</td>
          <td>select</td>
          <td>select-property-type</td>
          <td>customer-standard</td>
          <td>V√§lj fastighetstyp (Fastighet eller Bostadsr√§tt)</td>
        </tr>
      
        <tr>
          <td>18</td>
          <td>object</td>
          <td>fill</td>
          <td>input-property-valuation</td>
          <td>customer-standard</td>
          <td>Fyll i fastighetsv√§rdering</td>
        </tr>
      
        <tr>
          <td>19</td>
          <td>object</td>
          <td>click</td>
          <td>btn-submit-object</td>
          <td>customer-standard</td>
          <td>Skicka in Object-data. Systemet utv√§rderar fastighet/bostadsr√§tt via DMN.</td>
        </tr>
      
        <tr>
          <td>20</td>
          <td>object</td>
          <td>verify</td>
          <td>evaluate-property-approved</td>
          <td>customer-standard</td>
          <td>Verifiera att Evaluate Fastighet/Bostadsr√§tt DMN returnerar "APPROVED"</td>
        </tr>
      
        <tr>
          <td>21</td>
          <td>confirm-application</td>
          <td>navigate</td>
          <td>nav-confirm-application</td>
          <td>customer-standard</td>
          <td>N√§r b√•de Household och Stakeholders √§r klara, navigera till Confirm application</td>
        </tr>
      
        <tr>
          <td>22</td>
          <td>confirm-application</td>
          <td>verify</td>
          <td>summary-all-data</td>
          <td>customer-standard</td>
          <td>Verifiera att sammanfattning visar all insamlad data (intern data, hush√•ll, stakeholder, objekt)</td>
        </tr>
      
        <tr>
          <td>23</td>
          <td>confirm-application</td>
          <td>click</td>
          <td>btn-confirm-application</td>
          <td>customer-standard</td>
          <td>Bekr√§fta ans√∂kan</td>
        </tr>
      
        <tr>
          <td>24</td>
          <td>application-completed</td>
          <td>verify</td>
          <td>success-message</td>
          <td>customer-standard</td>
          <td>Verifiera att ans√∂kan √§r bekr√§ftad och processen avslutas. Ans√∂kan g√•r vidare till kreditevaluering.</td>
        </tr>
      
          </tbody>
        </table>
      </details>
    
      <details style="margin: 12px 0; padding: 12px; border: 1px solid var(--border); border-radius: 6px;">
        <summary style="cursor: pointer; font-weight: 600; color: var(--primary);">
          <strong>S2: Normalfl√∂de ‚Äì ans√∂kan med flera stakeholders</strong> (Klicka f√∂r att expandera)
        </summary>
        <table style="margin-top: 12px;">
          <thead>
            <tr>
              <th>Steg</th>
              <th>Page ID</th>
              <th>Action</th>
              <th>Locator ID</th>
              <th>Data Profile</th>
              <th>Kommentar</th>
            </tr>
          </thead>
          <tbody>
            
        <tr>
          <td>1-3</td>
          <td>application-start, internal-data-gathering</td>
          <td>navigate, verify</td>
          <td>nav-application, pre-screen-result-approved</td>
          <td>customer-multi-stakeholder</td>
          <td>Samma som S1 steg 1-3: Starta process, internal data gathering, pre-screen godk√§nd</td>
        </tr>
      
        <tr>
          <td>4-9</td>
          <td>household</td>
          <td>navigate, fill, click</td>
          <td>nav-household, input-household-economy, btn-submit-household</td>
          <td>customer-multi-stakeholder</td>
          <td>Samma som S1 steg 4-9: Fyll i hush√•llsekonomi</td>
        </tr>
      
        <tr>
          <td>10</td>
          <td>stakeholders</td>
          <td>navigate</td>
          <td>nav-stakeholders</td>
          <td>customer-multi-stakeholder</td>
          <td>Navigera till Stakeholders</td>
        </tr>
      
        <tr>
          <td>11-15</td>
          <td>stakeholder</td>
          <td>navigate, fill, click, verify</td>
          <td>nav-stakeholder, input-personal-info, btn-submit-stakeholder, assess-stakeholder-approved</td>
          <td>customer-multi-stakeholder</td>
          <td>F√∂rsta stakeholder (huvudans√∂kande) - samma som S1 steg 11-15</td>
        </tr>
      
        <tr>
          <td>16-20</td>
          <td>object</td>
          <td>navigate, select, fill, click, verify</td>
          <td>nav-object, select-property-type, input-property-valuation, btn-submit-object, evaluate-property-approved</td>
          <td>customer-multi-stakeholder</td>
          <td>F√∂rsta objektet - samma som S1 steg 16-20</td>
        </tr>
      
        <tr>
          <td>21</td>
          <td>stakeholders</td>
          <td>click</td>
          <td>btn-add-stakeholder</td>
          <td>customer-multi-stakeholder</td>
          <td>L√§gg till ytterligare stakeholder (sambo/medl√•ntagare)</td>
        </tr>
      
        <tr>
          <td>22-26</td>
          <td>stakeholder</td>
          <td>navigate, fill, click, verify</td>
          <td>nav-stakeholder, input-personal-info, btn-submit-stakeholder, assess-stakeholder-approved</td>
          <td>customer-multi-stakeholder</td>
          <td>Andra stakeholder (sambo/medl√•ntagare) - fyll i och verifiera godk√§nd</td>
        </tr>
      
        <tr>
          <td>27-31</td>
          <td>object</td>
          <td>navigate, select, fill, click, verify</td>
          <td>nav-object, select-property-type, input-property-valuation, btn-submit-object, evaluate-property-approved</td>
          <td>customer-multi-stakeholder</td>
          <td>Andra objektet (f√∂r andra stakeholder) - fyll i och verifiera godk√§nd</td>
        </tr>
      
        <tr>
          <td>32-34</td>
          <td>confirm-application</td>
          <td>navigate, verify, click</td>
          <td>nav-confirm-application, summary-all-data, btn-confirm-application</td>
          <td>customer-multi-stakeholder</td>
          <td>Bekr√§fta ans√∂kan med flera stakeholders - samma som S1 steg 21-23</td>
        </tr>
      
          </tbody>
        </table>
      </details>
    
      <details style="margin: 12px 0; padding: 12px; border: 1px solid var(--border); border-radius: 6px;">
        <summary style="cursor: pointer; font-weight: 600; color: var(--primary);">
          <strong>S3: Pre-screen rejected</strong> (Klicka f√∂r att expandera)
        </summary>
        <table style="margin-top: 12px;">
          <thead>
            <tr>
              <th>Steg</th>
              <th>Page ID</th>
              <th>Action</th>
              <th>Locator ID</th>
              <th>Data Profile</th>
              <th>Kommentar</th>
            </tr>
          </thead>
          <tbody>
            
        <tr>
          <td>1-2</td>
          <td>application-start, internal-data-gathering</td>
          <td>navigate</td>
          <td>nav-application, nav-internal-data</td>
          <td>customer-rejected</td>
          <td>Starta process, internal data gathering startar automatiskt</td>
        </tr>
      
        <tr>
          <td>3</td>
          <td>internal-data-gathering</td>
          <td>verify</td>
          <td>pre-screen-result-rejected</td>
          <td>customer-rejected</td>
          <td>Verifiera att Pre-screen Party DMN returnerar "REJECTED" (t.ex. f√∂r l√•g kreditv√§rdighet, √•lder, anst√§llningsstatus)</td>
        </tr>
      
        <tr>
          <td>4</td>
          <td>pre-screening-rejected</td>
          <td>verify</td>
          <td>error-message-pre-screen</td>
          <td>customer-rejected</td>
          <td>Verifiera att error event "Pre-screening rejected" triggas och processen avslutas</td>
        </tr>
      
        <tr>
          <td>5</td>
          <td>pre-screening-rejected</td>
          <td>verify</td>
          <td>rejection-reason</td>
          <td>customer-rejected</td>
          <td>Verifiera att anledning till avslag visas f√∂r kunden</td>
        </tr>
      
          </tbody>
        </table>
      </details>
    
      <details style="margin: 12px 0; padding: 12px; border: 1px solid var(--border); border-radius: 6px;">
        <summary style="cursor: pointer; font-weight: 600; color: var(--primary);">
          <strong>S4: Stakeholder rejected</strong> (Klicka f√∂r att expandera)
        </summary>
        <table style="margin-top: 12px;">
          <thead>
            <tr>
              <th>Steg</th>
              <th>Page ID</th>
              <th>Action</th>
              <th>Locator ID</th>
              <th>Data Profile</th>
              <th>Kommentar</th>
            </tr>
          </thead>
          <tbody>
            
        <tr>
          <td>1-9</td>
          <td>application-start till household</td>
          <td>navigate, verify, fill, click</td>
          <td>nav-application, pre-screen-result-approved, input-household-economy, btn-submit-household</td>
          <td>customer-stakeholder-rejected</td>
          <td>Samma som S1 steg 1-9: Starta process, internal data OK, fyll i hush√•ll</td>
        </tr>
      
        <tr>
          <td>10-13</td>
          <td>stakeholders, stakeholder</td>
          <td>navigate, fill, click</td>
          <td>nav-stakeholders, nav-stakeholder, input-personal-info, checkbox-credit-consent, btn-submit-stakeholder</td>
          <td>customer-stakeholder-rejected</td>
          <td>Navigera till stakeholders, fyll i stakeholder-information (medl√•ntagare med d√•lig kreditv√§rdighet)</td>
        </tr>
      
        <tr>
          <td>14</td>
          <td>stakeholder</td>
          <td>verify</td>
          <td>assess-stakeholder-rejected</td>
          <td>customer-stakeholder-rejected</td>
          <td>Verifiera att Assess Stakeholder DMN returnerar "REJECTED"</td>
        </tr>
      
        <tr>
          <td>15</td>
          <td>stakeholder-rejected</td>
          <td>verify</td>
          <td>error-message-stakeholder</td>
          <td>customer-stakeholder-rejected</td>
          <td>Verifiera att error event "Stakeholder rejected" triggas och processen avslutas</td>
        </tr>
      
          </tbody>
        </table>
      </details>
    
      <details style="margin: 12px 0; padding: 12px; border: 1px solid var(--border); border-radius: 6px;">
        <summary style="cursor: pointer; font-weight: 600; color: var(--primary);">
          <strong>S5: Object rejected</strong> (Klicka f√∂r att expandera)
        </summary>
        <table style="margin-top: 12px;">
          <thead>
            <tr>
              <th>Steg</th>
              <th>Page ID</th>
              <th>Action</th>
              <th>Locator ID</th>
              <th>Data Profile</th>
              <th>Kommentar</th>
            </tr>
          </thead>
          <tbody>
            
        <tr>
          <td>1-15</td>
          <td>application-start till stakeholder</td>
          <td>navigate, verify, fill, click</td>
          <td>nav-application, pre-screen-result-approved, input-household-economy, input-personal-info, assess-stakeholder-approved</td>
          <td>customer-object-rejected</td>
          <td>Samma som S1 steg 1-15: Starta process, internal data OK, hush√•ll OK, stakeholder OK</td>
        </tr>
      
        <tr>
          <td>16-18</td>
          <td>object</td>
          <td>navigate, select, fill</td>
          <td>nav-object, select-property-type, input-property-valuation</td>
          <td>customer-object-rejected</td>
          <td>Navigera till object, v√§lj fastighetstyp, fyll i v√§rdering (t.ex. f√∂r h√∂g LTV, d√•lig bel√§genhet)</td>
        </tr>
      
        <tr>
          <td>19</td>
          <td>object</td>
          <td>click</td>
          <td>btn-submit-object</td>
          <td>customer-object-rejected</td>
          <td>Skicka in Object-data. Systemet utv√§rderar via DMN.</td>
        </tr>
      
        <tr>
          <td>20</td>
          <td>object</td>
          <td>verify</td>
          <td>evaluate-property-rejected</td>
          <td>customer-object-rejected</td>
          <td>Verifiera att Evaluate Fastighet/Bostadsr√§tt DMN returnerar "REJECTED"</td>
        </tr>
      
        <tr>
          <td>21</td>
          <td>object-rejected</td>
          <td>verify</td>
          <td>error-message-object</td>
          <td>customer-object-rejected</td>
          <td>Verifiera att error event "Object rejected" triggas och processen avslutas</td>
        </tr>
      
          </tbody>
        </table>
      </details>
    
      <details style="margin: 12px 0; padding: 12px; border: 1px solid var(--border); border-radius: 6px;">
        <summary style="cursor: pointer; font-weight: 600; color: var(--primary);">
          <strong>S6: Komplettering beh√∂vs</strong> (Klicka f√∂r att expandera)
        </summary>
        <table style="margin-top: 12px;">
          <thead>
            <tr>
              <th>Steg</th>
              <th>Page ID</th>
              <th>Action</th>
              <th>Locator ID</th>
              <th>Data Profile</th>
              <th>Kommentar</th>
            </tr>
          </thead>
          <tbody>
            
        <tr>
          <td>1-9</td>
          <td>application-start till household</td>
          <td>navigate, verify, fill</td>
          <td>nav-application, pre-screen-result-approved, input-household-economy</td>
          <td>customer-incomplete</td>
          <td>Starta process, internal data OK, b√∂rja fylla i hush√•llsekonomi</td>
        </tr>
      
        <tr>
          <td>10</td>
          <td>household</td>
          <td>fill</td>
          <td>input-equity-source</td>
          <td>customer-incomplete</td>
          <td>L√§mna "K√§lla till eget kapital" tomt eller ofullst√§ndig</td>
        </tr>
      
        <tr>
          <td>11</td>
          <td>household</td>
          <td>click</td>
          <td>btn-submit-household</td>
          <td>customer-incomplete</td>
          <td>F√∂rs√∂k skicka in Household-data med ofullst√§ndig information</td>
        </tr>
      
        <tr>
          <td>12</td>
          <td>household</td>
          <td>verify</td>
          <td>validation-error-equity-source</td>
          <td>customer-incomplete</td>
          <td>Verifiera att valideringsfel visas f√∂r saknad k√§lla till eget kapital</td>
        </tr>
      
        <tr>
          <td>13</td>
          <td>household</td>
          <td>fill</td>
          <td>input-equity-source</td>
          <td>customer-incomplete</td>
          <td>Komplettera med k√§lla till eget kapital</td>
        </tr>
      
        <tr>
          <td>14</td>
          <td>household</td>
          <td>click</td>
          <td>btn-submit-household</td>
          <td>customer-incomplete</td>
          <td>Skicka in kompletterad Household-data</td>
        </tr>
      
        <tr>
          <td>15-23</td>
          <td>stakeholders till confirm-application</td>
          <td>navigate, fill, click, verify</td>
          <td>nav-stakeholders, input-personal-info, btn-confirm-application</td>
          <td>customer-incomplete</td>
          <td>Forts√§tt med stakeholders och objekt, bekr√§fta ans√∂kan (samma som S1 steg 10-23)</td>
        </tr>
      
          </tbody>
        </table>
      </details>
    
      <details style="margin: 12px 0; padding: 12px; border: 1px solid var(--border); border-radius: 6px;">
        <summary style="cursor: pointer; font-weight: 600; color: var(--primary);">
          <strong>S7: KALP-ber√§kning n√§r bekr√§ftelse hoppas √∂ver</strong> (Klicka f√∂r att expandera)
        </summary>
        <table style="margin-top: 12px;">
          <thead>
            <tr>
              <th>Steg</th>
              <th>Page ID</th>
              <th>Action</th>
              <th>Locator ID</th>
              <th>Data Profile</th>
              <th>Kommentar</th>
            </tr>
          </thead>
          <tbody>
            
        <tr>
          <td>1-20</td>
          <td>application-start till object</td>
          <td>navigate, verify, fill, click</td>
          <td>nav-application, pre-screen-result-approved, input-household-economy, btn-submit-object</td>
          <td>customer-skip-confirm</td>
          <td>Samma som S1 steg 1-20: Intern data (pre-screen godk√§nd), Household, Stakeholders, Object</td>
        </tr>
      
        <tr>
          <td>21</td>
          <td>skip-step-gateway</td>
          <td>verify</td>
          <td>skip-confirm-yes</td>
          <td>customer-skip-confirm</td>
          <td>Verifiera att Skip step gateway avg√∂r att bekr√§ftelse ska hoppas √∂ver ("Yes")</td>
        </tr>
      
        <tr>
          <td>22</td>
          <td>kalp-calculation</td>
          <td>verify</td>
          <td>kalp-result</td>
          <td>customer-skip-confirm</td>
          <td>Verifiera att KALP-ber√§kningen √§r klar och visar maximalt l√•nebelopp = 2 500 000 SEK (baserat p√• inkomster, utgifter, befintliga l√•n)</td>
        </tr>
      
        <tr>
          <td>23</td>
          <td>screen-kalp</td>
          <td>verify</td>
          <td>screen-kalp-approved</td>
          <td>customer-skip-confirm</td>
          <td>Verifiera att Screen KALP DMN returnerar "APPROVED" f√∂r k√∂pans√∂kan (maximalt belopp = 2 500 000 SEK, ans√∂kt belopp = 2 000 000 SEK, √∂ver ans√∂kt belopp ‚Üí inga √§ndringar)</td>
        </tr>
      
        <tr>
          <td>24</td>
          <td>kalp-ok-gateway</td>
          <td>verify</td>
          <td>kalp-ok-yes</td>
          <td>customer-skip-confirm</td>
          <td>Verifiera att KALP OK gateway avg√∂r att KALP √§r OK ("Yes") baserat p√• Screen KALP resultat</td>
        </tr>
      
        <tr>
          <td>25</td>
          <td>sammanfor-floden-gateway</td>
          <td>verify</td>
          <td>floden-sammanforda</td>
          <td>customer-skip-confirm</td>
          <td>Verifiera att Sammanf√∂r fl√∂den gateway samlar ihop skip-fl√∂det (bekr√§ftelse hoppades √∂ver)</td>
        </tr>
      
        <tr>
          <td>26</td>
          <td>fetch-credit-information</td>
          <td>verify</td>
          <td>credit-info-fetched</td>
          <td>customer-skip-confirm</td>
          <td>Verifiera att Fetch credit information startar automatiskt (multi-instance per stakeholder), h√§mtar kreditinformation fr√•n externa k√§llor (t.ex. UC3) f√∂r huvudans√∂kande</td>
        </tr>
      
        <tr>
          <td>27</td>
          <td>application-completed</td>
          <td>verify</td>
          <td>success-message</td>
          <td>customer-skip-confirm</td>
          <td>Verifiera att ans√∂kan √§r klar och processen avslutas normalt. Ans√∂kan g√•r vidare till kreditevaluering utan kundens bekr√§ftelse.</td>
        </tr>
      
          </tbody>
        </table>
      </details>
    
      <details style="margin: 12px 0; padding: 12px; border: 1px solid var(--border); border-radius: 6px;">
        <summary style="cursor: pointer; font-weight: 600; color: var(--primary);">
          <strong>S8: Application rejected - KALP under ans√∂kt belopp (flytt/oml√•ning)</strong> (Klicka f√∂r att expandera)
        </summary>
        <table style="margin-top: 12px;">
          <thead>
            <tr>
              <th>Steg</th>
              <th>Page ID</th>
              <th>Action</th>
              <th>Locator ID</th>
              <th>Data Profile</th>
              <th>Kommentar</th>
            </tr>
          </thead>
          <tbody>
            
        <tr>
          <td>1-20</td>
          <td>application-start till object</td>
          <td>navigate, verify, fill, click</td>
          <td>nav-application, pre-screen-result-approved, input-household-economy, btn-submit-object</td>
          <td>customer-kalp-rejected-move</td>
          <td>Samma som S1 steg 1-20: Intern data (pre-screen godk√§nd), Household, Stakeholders, Object</td>
        </tr>
      
        <tr>
          <td>21</td>
          <td>skip-step-gateway</td>
          <td>verify</td>
          <td>skip-confirm-no</td>
          <td>customer-kalp-rejected-move</td>
          <td>Verifiera att Skip step gateway avg√∂r att bekr√§ftelse inte ska hoppas √∂ver ("No")</td>
        </tr>
      
        <tr>
          <td>22</td>
          <td>kalp-calculation</td>
          <td>verify</td>
          <td>kalp-result</td>
          <td>customer-kalp-rejected-move</td>
          <td>Verifiera att KALP-ber√§kningen √§r klar och visar maximalt l√•nebelopp = 2 000 000 SEK (l√§gre √§n ans√∂kt belopp = 2 500 000 SEK)</td>
        </tr>
      
        <tr>
          <td>23</td>
          <td>screen-kalp</td>
          <td>verify</td>
          <td>screen-kalp-rejected</td>
          <td>customer-kalp-rejected-move</td>
          <td>Verifiera att Screen KALP DMN returnerar "REJECTED" f√∂r flytt/oml√•ning (regel: om maximalt belopp = 2 000 000 SEK √§r under ans√∂kt belopp = 2 500 000 SEK ‚Üí avvisa)</td>
        </tr>
      
        <tr>
          <td>24</td>
          <td>kalp-ok-gateway</td>
          <td>verify</td>
          <td>kalp-ok-no</td>
          <td>customer-kalp-rejected-move</td>
          <td>Verifiera att KALP OK gateway avg√∂r att KALP inte √§r OK ("No") baserat p√• Screen KALP resultat</td>
        </tr>
      
        <tr>
          <td>25</td>
          <td>application-rejected</td>
          <td>verify</td>
          <td>error-message-application-rejected</td>
          <td>customer-kalp-rejected-move</td>
          <td>Verifiera att "application rejected" error event triggas och processen avslutas</td>
        </tr>
      
        <tr>
          <td>26</td>
          <td>application-rejected</td>
          <td>verify</td>
          <td>rejection-reason</td>
          <td>customer-kalp-rejected-move</td>
          <td>Verifiera att tydligt felmeddelande visas: "Ans√∂kan avvisad: Maximalt l√•nebelopp (2 000 000 SEK) √§r under ans√∂kt belopp (2 500 000 SEK)"</td>
        </tr>
      
          </tbody>
        </table>
      </details>
    
      <details style="margin: 12px 0; padding: 12px; border: 1px solid var(--border); border-radius: 6px;">
        <summary style="cursor: pointer; font-weight: 600; color: var(--primary);">
          <strong>S9: Application rejected - KALP under tr√∂skelv√§rde (k√∂p)</strong> (Klicka f√∂r att expandera)
        </summary>
        <table style="margin-top: 12px;">
          <thead>
            <tr>
              <th>Steg</th>
              <th>Page ID</th>
              <th>Action</th>
              <th>Locator ID</th>
              <th>Data Profile</th>
              <th>Kommentar</th>
            </tr>
          </thead>
          <tbody>
            
        <tr>
          <td>1-20</td>
          <td>application-start till object</td>
          <td>navigate, verify, fill, click</td>
          <td>nav-application, pre-screen-result-approved, input-household-economy, btn-submit-object</td>
          <td>customer-kalp-rejected-threshold</td>
          <td>Samma som S1 steg 1-20: Intern data (pre-screen godk√§nd), Household, Stakeholders, Object</td>
        </tr>
      
        <tr>
          <td>21</td>
          <td>skip-step-gateway</td>
          <td>verify</td>
          <td>skip-confirm-no</td>
          <td>customer-kalp-rejected-threshold</td>
          <td>Verifiera att Skip step gateway avg√∂r att bekr√§ftelse inte ska hoppas √∂ver ("No")</td>
        </tr>
      
        <tr>
          <td>22</td>
          <td>kalp-calculation</td>
          <td>verify</td>
          <td>kalp-result</td>
          <td>customer-kalp-rejected-threshold</td>
          <td>Verifiera att KALP-ber√§kningen √§r klar och visar maximalt l√•nebelopp = 500 000 SEK (under tr√∂skelv√§rde)</td>
        </tr>
      
        <tr>
          <td>23</td>
          <td>screen-kalp</td>
          <td>verify</td>
          <td>screen-kalp-rejected</td>
          <td>customer-kalp-rejected-threshold</td>
          <td>Verifiera att Screen KALP DMN returnerar "REJECTED" f√∂r k√∂pans√∂kan (regel: om maximalt belopp = 500 000 SEK √§r under tr√∂skelv√§rde ‚Üí avvisa)</td>
        </tr>
      
        <tr>
          <td>24</td>
          <td>kalp-ok-gateway</td>
          <td>verify</td>
          <td>kalp-ok-no</td>
          <td>customer-kalp-rejected-threshold</td>
          <td>Verifiera att KALP OK gateway avg√∂r att KALP inte √§r OK ("No") baserat p√• Screen KALP resultat</td>
        </tr>
      
        <tr>
          <td>25</td>
          <td>application-rejected</td>
          <td>verify</td>
          <td>error-message-application-rejected</td>
          <td>customer-kalp-rejected-threshold</td>
          <td>Verifiera att "application rejected" error event triggas och processen avslutas</td>
        </tr>
      
        <tr>
          <td>26</td>
          <td>application-rejected</td>
          <td>verify</td>
          <td>rejection-reason</td>
          <td>customer-kalp-rejected-threshold</td>
          <td>Verifiera att tydligt felmeddelande visas med anledning till avslag (KALP under tr√∂skelv√§rde)</td>
        </tr>
      
          </tbody>
        </table>
      </details>
    
      <details style="margin: 12px 0; padding: 12px; border: 1px solid var(--border); border-radius: 6px;">
        <summary style="cursor: pointer; font-weight: 600; color: var(--primary);">
          <strong>S10: K√∂pans√∂kan - KALP justerar ans√∂kt belopp till maximalt belopp</strong> (Klicka f√∂r att expandera)
        </summary>
        <table style="margin-top: 12px;">
          <thead>
            <tr>
              <th>Steg</th>
              <th>Page ID</th>
              <th>Action</th>
              <th>Locator ID</th>
              <th>Data Profile</th>
              <th>Kommentar</th>
            </tr>
          </thead>
          <tbody>
            
        <tr>
          <td>1-20</td>
          <td>application-start till object</td>
          <td>navigate, verify, fill, click</td>
          <td>nav-application, pre-screen-result-approved, input-household-economy, btn-submit-object</td>
          <td>customer-kalp-adjusted</td>
          <td>Samma som S1 steg 1-20: Intern data (pre-screen godk√§nd), Household, Stakeholders, Object</td>
        </tr>
      
        <tr>
          <td>21</td>
          <td>skip-step-gateway</td>
          <td>verify</td>
          <td>skip-confirm-no</td>
          <td>customer-kalp-adjusted</td>
          <td>Verifiera att Skip step gateway avg√∂r att bekr√§ftelse inte ska hoppas √∂ver ("No")</td>
        </tr>
      
        <tr>
          <td>22</td>
          <td>kalp-calculation</td>
          <td>verify</td>
          <td>kalp-result</td>
          <td>customer-kalp-adjusted</td>
          <td>Verifiera att KALP-ber√§kningen √§r klar och visar maximalt l√•nebelopp = 2 500 000 SEK (h√∂gre √§n ans√∂kt belopp = 2 000 000 SEK)</td>
        </tr>
      
        <tr>
          <td>23</td>
          <td>screen-kalp</td>
          <td>verify</td>
          <td>screen-kalp-approved-adjusted</td>
          <td>customer-kalp-adjusted</td>
          <td>Verifiera att Screen KALP DMN returnerar "APPROVED" f√∂r k√∂pans√∂kan och justerar ans√∂kt belopp fr√•n 2 000 000 SEK till 2 500 000 SEK (regel f√∂r k√∂p: om maximalt belopp √§r under ans√∂kt belopp ‚Üí s√§tt ans√∂kt belopp till maximalt belopp)</td>
        </tr>
      
        <tr>
          <td>24</td>
          <td>confirm-application</td>
          <td>verify</td>
          <td>adjusted-loan-amount</td>
          <td>customer-kalp-adjusted</td>
          <td>Verifiera att sammanfattningen visar justerat ans√∂kt belopp = 2 500 000 SEK (ist√§llet f√∂r ursprungligt 2 000 000 SEK)</td>
        </tr>
      
        <tr>
          <td>25</td>
          <td>confirm-application</td>
          <td>click</td>
          <td>btn-confirm-application</td>
          <td>customer-kalp-adjusted</td>
          <td>Bekr√§fta ans√∂kan med justerat belopp</td>
        </tr>
      
        <tr>
          <td>26</td>
          <td>application-completed</td>
          <td>verify</td>
          <td>success-message</td>
          <td>customer-kalp-adjusted</td>
          <td>Verifiera att ans√∂kan √§r bekr√§ftad med justerat belopp och processen avslutas normalt</td>
        </tr>
      
          </tbody>
        </table>
      </details>
    
      <details style="margin: 12px 0; padding: 12px; border: 1px solid var(--border); border-radius: 6px;">
        <summary style="cursor: pointer; font-weight: 600; color: var(--primary);">
          <strong>S11: Timeout p√• Confirm application</strong> (Klicka f√∂r att expandera)
        </summary>
        <table style="margin-top: 12px;">
          <thead>
            <tr>
              <th>Steg</th>
              <th>Page ID</th>
              <th>Action</th>
              <th>Locator ID</th>
              <th>Data Profile</th>
              <th>Kommentar</th>
            </tr>
          </thead>
          <tbody>
            
        <tr>
          <td>1-20</td>
          <td>application-start till object</td>
          <td>navigate, verify, fill, click</td>
          <td>nav-application, pre-screen-result-approved, input-household-economy, btn-submit-object</td>
          <td>customer-timeout</td>
          <td>Samma som S1 steg 1-20: Intern data (pre-screen godk√§nd), Household, Stakeholders, Object</td>
        </tr>
      
        <tr>
          <td>21</td>
          <td>skip-step-gateway</td>
          <td>verify</td>
          <td>skip-confirm-no</td>
          <td>customer-timeout</td>
          <td>Verifiera att Skip step gateway avg√∂r att bekr√§ftelse inte ska hoppas √∂ver ("No")</td>
        </tr>
      
        <tr>
          <td>22</td>
          <td>kalp-calculation</td>
          <td>verify</td>
          <td>kalp-result</td>
          <td>customer-timeout</td>
          <td>Verifiera att KALP-ber√§kningen √§r klar och Screen KALP returnerar "APPROVED"</td>
        </tr>
      
        <tr>
          <td>23</td>
          <td>kalp-ok-gateway</td>
          <td>verify</td>
          <td>kalp-ok-yes</td>
          <td>customer-timeout</td>
          <td>Verifiera att KALP OK gateway avg√∂r att KALP √§r OK ("Yes")</td>
        </tr>
      
        <tr>
          <td>24</td>
          <td>confirm-application</td>
          <td>navigate</td>
          <td>nav-confirm-application</td>
          <td>customer-timeout</td>
          <td>Navigera till Confirm application</td>
        </tr>
      
        <tr>
          <td>25</td>
          <td>confirm-application</td>
          <td>verify</td>
          <td>summary-all-data</td>
          <td>customer-timeout</td>
          <td>Verifiera att sammanfattning visar all insamlad data</td>
        </tr>
      
        <tr>
          <td>26</td>
          <td>confirm-application</td>
          <td>wait</td>
          <td>timeout-30-days</td>
          <td>customer-timeout</td>
          <td>V√§nta 30 dagar utan att bekr√§fta ans√∂kan (eller simulera timeout)</td>
        </tr>
      
        <tr>
          <td>27</td>
          <td>timeout-boundary-event</td>
          <td>verify</td>
          <td>timeout-triggered</td>
          <td>customer-timeout</td>
          <td>Verifiera att timeout boundary event triggas p√• "Confirm application" user task efter 30 dagar</td>
        </tr>
      
        <tr>
          <td>28</td>
          <td>application-timeout</td>
          <td>verify</td>
          <td>error-message-timeout</td>
          <td>customer-timeout</td>
          <td>Verifiera att "application-timeout" error event triggas och processen avslutas</td>
        </tr>
      
        <tr>
          <td>29</td>
          <td>application-timeout</td>
          <td>verify</td>
          <td>timeout-message</td>
          <td>customer-timeout</td>
          <td>Verifiera att tydligt felmeddelande visas: "Ans√∂kan avslutad: Du har inte bekr√§ftat ans√∂kan inom tidsgr√§nsen (30 dagar)"</td>
        </tr>
      
          </tbody>
        </table>
      </details>
    
      <details style="margin: 12px 0; padding: 12px; border: 1px solid var(--border); border-radius: 6px;">
        <summary style="cursor: pointer; font-weight: 600; color: var(--primary);">
          <strong>S12: Fetch credit information - multi-instance f√∂r flera stakeholders</strong> (Klicka f√∂r att expandera)
        </summary>
        <table style="margin-top: 12px;">
          <thead>
            <tr>
              <th>Steg</th>
              <th>Page ID</th>
              <th>Action</th>
              <th>Locator ID</th>
              <th>Data Profile</th>
              <th>Kommentar</th>
            </tr>
          </thead>
          <tbody>
            
        <tr>
          <td>1-23</td>
          <td>application-start till confirm-application</td>
          <td>navigate, verify, fill, click</td>
          <td>nav-application, pre-screen-result-approved, input-household-economy, btn-confirm-application</td>
          <td>customer-multi-stakeholder</td>
          <td>Samma som S2 steg 1-34: Intern data, Household, flera Stakeholders med Object, bekr√§ftelse</td>
        </tr>
      
        <tr>
          <td>24</td>
          <td>sammanfor-floden-gateway</td>
          <td>verify</td>
          <td>floden-sammanforda</td>
          <td>customer-multi-stakeholder</td>
          <td>Verifiera att Sammanf√∂r fl√∂den gateway samlar ihop bekr√§ftelse-fl√∂det</td>
        </tr>
      
        <tr>
          <td>25</td>
          <td>fetch-credit-information</td>
          <td>verify</td>
          <td>credit-info-fetching-stakeholder-1</td>
          <td>customer-multi-stakeholder</td>
          <td>Verifiera att Fetch credit information startar automatiskt f√∂r f√∂rsta stakeholder (huvudans√∂kande), h√§mtar kreditinformation fr√•n externa k√§llor (t.ex. UC3)</td>
        </tr>
      
        <tr>
          <td>26</td>
          <td>fetch-credit-information</td>
          <td>verify</td>
          <td>credit-info-fetched-stakeholder-1</td>
          <td>customer-multi-stakeholder</td>
          <td>Verifiera att kreditinformation f√∂r f√∂rsta stakeholder √§r h√§mtad och lagrad i datastore "Personal credit information source"</td>
        </tr>
      
        <tr>
          <td>27</td>
          <td>fetch-credit-information</td>
          <td>verify</td>
          <td>credit-info-fetching-stakeholder-2</td>
          <td>customer-multi-stakeholder</td>
          <td>Verifiera att Fetch credit information forts√§tter automatiskt f√∂r andra stakeholder (medl√•ntagare), h√§mtar kreditinformation fr√•n externa k√§llor (t.ex. UC3)</td>
        </tr>
      
        <tr>
          <td>28</td>
          <td>fetch-credit-information</td>
          <td>verify</td>
          <td>credit-info-fetched-stakeholder-2</td>
          <td>customer-multi-stakeholder</td>
          <td>Verifiera att kreditinformation f√∂r andra stakeholder √§r h√§mtad och lagrad i datastore "Personal credit information source"</td>
        </tr>
      
        <tr>
          <td>29</td>
          <td>application-completed</td>
          <td>verify</td>
          <td>success-message</td>
          <td>customer-multi-stakeholder</td>
          <td>Verifiera att ans√∂kan √§r klar, all kreditinformation √§r h√§mtad f√∂r alla stakeholders (multi-instance), och processen avslutas normalt. Ans√∂kan g√•r vidare till kreditevaluering.</td>
        </tr>
      
          </tbody>
        </table>
      </details>
    

      <h3>Testdata-referenser</h3>
      <p class="muted">Testdata-profilerna som anv√§nds i scenarion. Definiera faktiska testdata i separat testdata-katalog.</p>
      <ul>
        
      <li><strong>customer-standard</strong>: Standard kundprofil f√∂r normalfl√∂de - god kreditv√§rdighet, fast anst√§llning, tillr√§cklig inkomst, standard fastighet med god LTV</li>
    
      <li><strong>customer-multi-stakeholder</strong>: Kundprofil med flera stakeholders (huvudans√∂kande + sambo/medl√•ntagare) - b√•da med god kreditv√§rdighet, varje stakeholder har eget objekt</li>
    
      <li><strong>customer-rejected</strong>: Kundprofil som avvisas vid pre-screen - l√•g kreditv√§rdighet (&lt;600), eller ogiltig √•lder, eller os√§ker anst√§llningsstatus</li>
    
      <li><strong>customer-stakeholder-rejected</strong>: Kundprofil d√§r huvudans√∂kande √§r OK men medl√•ntagare avvisas - medl√•ntagare med d√•lig kreditv√§rdighet eller h√∂g skulds√§ttning</li>
    
      <li><strong>customer-object-rejected</strong>: Kundprofil d√§r kund och stakeholder √§r OK men fastighet avvisas - f√∂r h√∂g LTV (&gt;85%), d√•lig bel√§genhet, eller h√∂g f√∂reningsskuld (bostadsr√§tt)</li>
    
      <li><strong>customer-incomplete</strong>: Kundprofil med ofullst√§ndig information - saknar viktiga f√§lt som k√§lla till eget kapital, eller ofullst√§ndiga l√•neuppgifter</li>
    
      </ul>

      <h3>Implementation Mapping</h3>
      <p class="muted">Mappning mellan BPMN-aktiviteter och faktisk implementation (routes, endpoints, locators).</p>
      <table>
        <thead>
          <tr>
            <th>BPMN Aktivitet</th>
            <th>Type</th>
            <th>Route/Endpoint</th>
            <th>Method</th>
            <th>Base URL</th>
            <th>Kommentar</th>
          </tr>
        </thead>
        <tbody>
          
      <tr>
        <td>Application (start)</td>
        <td>UI</td>
        <td>/mortgage/application</td>
        <td>GET</td>
        <td>https://portal.sbab.se</td>
        <td>Startpunkt f√∂r Application-processen. Anropas fr√•n Mortgage huvudprocess.</td>
      </tr>
    
      <tr>
        <td>Internal data gathering</td>
        <td>API + UI</td>
        <td>/api/application/internal-data-gathering<br>/mortgage/application/internal-data</td>
        <td>POST (API)<br>GET (UI)</td>
        <td>https://api.sbab.se<br>https://portal.sbab.se</td>
        <td>H√§mtar befintlig kunddata fr√•n interna system (part, engagemang, kreditinformation). K√∂rs automatiskt som multi-instance per part. Anropar Pre-screen Party DMN.</td>
      </tr>
    
      <tr>
        <td>Household</td>
        <td>Both</td>
        <td>/api/application/household<br>/mortgage/application/household</td>
        <td>POST (API)<br>GET/POST (UI)</td>
        <td>https://api.sbab.se<br>https://portal.sbab.se</td>
        <td>Samlar in hush√•llsekonomi, personlig ekonomi, k√§lla till eget kapital och l√•neuppgifter. K√∂rs parallellt med Stakeholders som multi-instance.</td>
      </tr>
    
      <tr>
        <td>Stakeholders (subprocess)</td>
        <td>UI</td>
        <td>/mortgage/application/stakeholders</td>
        <td>GET</td>
        <td>https://portal.sbab.se</td>
        <td>√ñversiktssida f√∂r alla stakeholders. Hanterar multi-instance f√∂r flera stakeholders.</td>
      </tr>
    
      <tr>
        <td>Stakeholder</td>
        <td>Both</td>
        <td>/api/application/stakeholder<br>/mortgage/application/stakeholder</td>
        <td>POST (API)<br>GET/POST (UI)</td>
        <td>https://api.sbab.se<br>https://portal.sbab.se</td>
        <td>Registrerar personlig information, samtycke till kreditupplysning. Systemet h√§mtar och utv√§rderar personlig information automatiskt. Anropar Assess Stakeholder DMN.</td>
      </tr>
    
      <tr>
        <td>Object</td>
        <td>Both</td>
        <td>/api/application/object<br>/mortgage/application/object</td>
        <td>POST (API)<br>GET/POST (UI)</td>
        <td>https://api.sbab.se<br>https://portal.sbab.se</td>
        <td>Hanterar fastighetsinformation (fastighetstyp, v√§rdering, s√§kerhetsregistrering). Anropar Evaluate Fastighet eller Evaluate Bostadsr√§tt DMN beroende p√• fastighetstyp.</td>
      </tr>
    
      <tr>
        <td>Confirm application</td>
        <td>UI</td>
        <td>/mortgage/application/confirm</td>
        <td>GET/POST</td>
        <td>https://portal.sbab.se</td>
        <td>User task d√§r kunden bekr√§ftar att all information √§r korrekt. Visar sammanfattning av all insamlad data. N√§r bekr√§ftad, avslutas Application-processen och ans√∂kan g√•r vidare till kreditevaluering.</td>
      </tr>
    
      <tr>
        <td>Pre-screen Party (DMN)</td>
        <td>API</td>
        <td>/api/dmn/pre-screen-party</td>
        <td>POST</td>
        <td>https://api.sbab.se</td>
        <td>DMN-beslutsregel f√∂r initial eligibility check. Input: Age, Credit Score, Employment Status. Output: APPROVED / REJECTED / REVIEW.</td>
      </tr>
    
      <tr>
        <td>Assess Stakeholder (DMN)</td>
        <td>API</td>
        <td>/api/dmn/assess-stakeholder</td>
        <td>POST</td>
        <td>https://api.sbab.se</td>
        <td>DMN-beslutsregel f√∂r att utv√§rdera borrower capacity. Input: Annual Income, DTI Ratio, Credit History. Output: APPROVED / REJECTED + Risk Category.</td>
      </tr>
    
      <tr>
        <td>Evaluate Fastighet (DMN)</td>
        <td>API</td>
        <td>/api/dmn/evaluate-fastighet</td>
        <td>POST</td>
        <td>https://api.sbab.se</td>
        <td>DMN-beslutsregel f√∂r hus-evaluering. Input: Property Value, Condition, LTV, Location. Output: APPROVED / REJECTED + Risk Level.</td>
      </tr>
    
      <tr>
        <td>Evaluate Bostadsr√§tt (DMN)</td>
        <td>API</td>
        <td>/api/dmn/evaluate-bostadsratt</td>
        <td>POST</td>
        <td>https://api.sbab.se</td>
        <td>DMN-beslutsregel f√∂r bostadsr√§tt-evaluering. Input: Apartment Value, Association Debt, LTV. Output: APPROVED / REJECTED + Risk Level.</td>
      </tr>
    
      <tr>
        <td>KALP</td>
        <td>API</td>
        <td>/api/application/kalp</td>
        <td>POST</td>
        <td>https://api.sbab.se</td>
        <td>Ber√§knar maximalt l√•nebelopp baserat p√• hush√•llsaffordability (KALP = Kvar Att Leva P√•). Input: inkomster, utgifter, befintliga l√•n, andra ekonomiska faktorer. Output: maximalt l√•nebelopp (KALP). Lagras i datastore "KALP".</td>
      </tr>
    
      <tr>
        <td>Screen KALP (DMN)</td>
        <td>API</td>
        <td>/api/dmn/screen-kalp</td>
        <td>POST</td>
        <td>https://api.sbab.se</td>
        <td>DMN-beslutsregel f√∂r att screena KALP-resultat mot aff√§rsregler. Input: KALP (maximalt l√•nebelopp), ans√∂kt belopp, ans√∂kningstyp (k√∂p, flytt, oml√•ning). Output: APPROVED / REJECTED + motivering. Regler: F√∂r k√∂p - om maximalt belopp √§r under tr√∂skelv√§rde ‚Üí avvisa, om maximalt belopp √§r under ans√∂kt belopp ‚Üí s√§tt ans√∂kt belopp till maximalt belopp, om maximalt belopp √§r √∂ver ans√∂kt belopp ‚Üí inga √§ndringar. F√∂r flytt/oml√•ning - om maximalt belopp √§r under ans√∂kt belopp ‚Üí avvisa.</td>
      </tr>
    
      <tr>
        <td>KALP OK? (gateway)</td>
        <td>Logic</td>
        <td>-</td>
        <td>-</td>
        <td>-</td>
        <td>Logisk gateway som avg√∂r om KALP-ber√§kningen och screening √§r godk√§nd baserat p√• Screen KALP resultat. Om "Yes" ‚Üí forts√§tt till bekr√§ftelse eller kreditupplysning. Om "No" ‚Üí trigga "application rejected" error event.</td>
      </tr>
    
      <tr>
        <td>Skip step? (gateway)</td>
        <td>Logic</td>
        <td>-</td>
        <td>-</td>
        <td>-</td>
        <td>Logisk gateway som avg√∂r om bekr√§ftelsesteget ska hoppas √∂ver baserat p√• aff√§rslogik. Om "Yes" ‚Üí g√• direkt till KALP-ber√§kning och kreditupplysning. Om "No" ‚Üí g√• till bekr√§ftelsesteget.</td>
      </tr>
    
      <tr>
        <td>Sammanf√∂r fl√∂den (gateway)</td>
        <td>Logic</td>
        <td>-</td>
        <td>-</td>
        <td>-</td>
        <td>Logisk gateway som samlar ihop b√•de bekr√§ftelse-fl√∂det (fr√•n "Confirm application") och skip-fl√∂det (fr√•n "Skip step?" gateway "Yes"), s√• att "Fetch credit information" bara startar n√§r antingen bekr√§ftelse √§r klar eller bekr√§ftelse har hoppats √∂ver.</td>
      </tr>
    
      <tr>
        <td>Fetch credit information</td>
        <td>API</td>
        <td>/api/application/fetch-credit-information</td>
        <td>POST</td>
        <td>https://api.sbab.se</td>
        <td>H√§mtar kreditinformation fr√•n externa k√§llor (t.ex. UC3) f√∂r alla stakeholders. K√∂rs automatiskt som multi-instance - en g√•ng per stakeholder. Input: stakeholder-ID. Output: kreditinformation. Lagras i datastore "Personal credit information source" f√∂r anv√§ndning i senare steg i kreditprocessen.</td>
      </tr>
    
      <tr>
        <td>Timeout boundary event (Confirm application)</td>
        <td>Event</td>
        <td>-</td>
        <td>-</td>
        <td>-</td>
        <td>Timeout boundary event p√• "Confirm application" user task. Triggas efter 30 dagar om kunden inte bekr√§ftar ans√∂kan. Triggar "application-timeout" error event, avslutar processen, och visar tydligt felmeddelande till kunden.</td>
      </tr>
    
        </tbody>
      </table>
        </div>
      </details>
    </section>
    <section class="doc-section">
      <details>
        <summary>Effekt</summary>
        <div class="section-content">
<p class="muted">F√∂rv√§ntad aff√§rseffekt som uppn√•s med feature goalet.</p>
      <p>Application-processen bidrar till flera viktiga aff√§rseffekter genom specifika mekanismer:</p>
      
      <h3>√ñkad automatisering och minskad manuell hantering</h3>
      <ul>
        <li><strong>Automatisk datainsamling via "Internal data gathering":</strong> Systemet h√§mtar automatiskt befintlig kunddata (part, engagemang, kreditinformation) fr√•n interna system f√∂r alla identifierade parter (multi-instance). F√∂r √•terkommande kunder elimineras detta behovet av manuell datainmatning, vilket kan minska handl√§ggningstid med upp till 40% f√∂r k√§nda kunder j√§mf√∂rt med manuell process.</li>
        <li><strong>Automatisk pre-screening via DMN-beslutsregel:</strong> Systemet utf√∂r automatiskt pre-screening f√∂r varje part (√•lder, anst√§llningsstatus, kreditv√§rdighet) och avvisar ans√∂kningar d√§r parter inte uppfyller grundl√§ggande krav via "pre-screen rejected" error event. Detta eliminerar manuell initial validering och minskar antalet ans√∂kningar som n√•r handl√§ggare med 30-50%.</li>
        <li><strong>Automatisk KALP-ber√§kning och screening:</strong> N√§r bekr√§ftelsesteget hoppas √∂ver via "Skip step?" gateway, ber√§knar systemet automatiskt maximalt l√•nebelopp (KALP) och screener resultatet via "Screen KALP" DMN-beslutsregel. F√∂r k√∂pans√∂kningar justeras ans√∂kt belopp automatiskt till maximalt belopp om det √§r l√§gre, vilket eliminerar behovet av manuell justering och minskar handl√§ggningstid med 15-20%.</li>
        <li><strong>Automatisk kreditupplysning via "Fetch credit information":</strong> Systemet h√§mtar automatiskt kreditinformation fr√•n externa k√§llor (t.ex. UC3) f√∂r alla stakeholders (multi-instance) n√§r ans√∂kan √§r bekr√§ftad eller bekr√§ftelse har hoppats √∂ver. Detta eliminerar manuell kreditupplysning och s√§kerst√§ller att all information √§r tillg√§nglig n√§r ans√∂kan n√•r handl√§ggare.</li>
      </ul>

      <h3>F√∂rb√§ttrad datakvalitet och beslutsunderlag</h3>
      <ul>
        <li><strong>Strukturerad datainsamling via parallella fl√∂den:</strong> Genom att k√∂ra "Household" och "Stakeholders" parallellt s√§kerst√§lls att all n√∂dv√§ndig information samlas in strukturerat. Multi-instance-mekanismer f√∂r flera parter, hush√•ll och stakeholders s√§kerst√§ller att varje part bed√∂ms individuellt, vilket minskar risken f√∂r felaktiga ans√∂kningar med 25-35%.</li>
        <li><strong>Automatisk validering via DMN-beslutsregler:</strong> Systemet validerar automatiskt stakeholders och objekt mot aff√§rsregler via DMN-beslutsregler och avvisar ans√∂kningar d√§r stakeholders eller objekt inte uppfyller krav via error events (stakeholder rejected, object rejected). Detta s√§kerst√§ller att endast ans√∂kningar som uppfyller grundl√§ggande krav g√•r vidare, vilket f√∂rb√§ttrar beslutsunderlaget f√∂r kreditevaluering.</li>
        <li><strong>Komplett datainsamling innan bekr√§ftelse:</strong> Genom "Confirm application" steget med sammanfattning av all insamlad information (intern data, hush√•ll, stakeholders, objekt) s√§kerst√§lls att kunden kan kontrollera att allt √§r korrekt innan ans√∂kan g√•r vidare. Detta minskar risken f√∂r felaktiga ans√∂kningar och f√∂rb√§ttrar datakvaliteten med 20-30%.</li>
      </ul>

      <h3>Snabbare beslutsprocess och minskad v√§ntetid</h3>
      <ul>
        <li><strong>Tidig avvisning via automatisk screening:</strong> Genom automatisk pre-screening, stakeholder-validering, objekt-validering och KALP-screening kan ans√∂kningar som inte uppfyller grundl√§ggande krav avvisas tidigt i processen (innan kreditevaluering). Detta sparar tid och resurser genom att eliminera on√∂dig handl√§ggning av osannolika ans√∂kningar, vilket minskar genomsnittlig handl√§ggningstid med 30-40%.</li>
        <li><strong>Parallell datainsamling minskar total tid:</strong> Genom att k√∂ra "Household" och "Stakeholders" parallellt kan kunden slutf√∂ra ans√∂kan snabbare √§n om processen var sekventiell. Detta minskar total tid f√∂r ans√∂kan fr√•n kundens perspektiv med 25-35% j√§mf√∂rt med sekventiell process.</li>
        <li><strong>Automatisk timeout-hantering:</strong> Genom timeout-mekanism p√• "Confirm application" s√§kerst√§lls att ans√∂kningar d√§r kunden inte bekr√§ftar inom tidsgr√§nsen avslutas automatiskt via "Timeout" error event och inte fastnar i systemet. Detta minskar antalet fastnade ans√∂kningar med 90-95%.</li>
      </ul>

      <h3>F√∂rb√§ttrad kundupplevelse och minskat avhopp</h3>
      <ul>
        <li><strong>Strukturerad process med tydlig feedback:</strong> Genom tydlig strukturering av processen (intern data ‚Üí objekt ‚Üí parallell datainsamling ‚Üí KALP ‚Üí bekr√§ftelse ‚Üí kreditupplysning) och tydlig feedback vid avvisning (pre-screen rejected, stakeholder rejected, object rejected, application rejected, timeout) f√∂rst√•r kunden processen b√§ttre. Detta kan √∂ka kundn√∂jdheten med 15-25% och minska avhopp i ans√∂kningsprocessen med 20-30%.</li>
        <li><strong>Automatisk justering av ans√∂kt belopp f√∂r k√∂pans√∂kningar:</strong> Genom att automatiskt justera ans√∂kt belopp till maximalt l√•nebelopp f√∂r k√∂pans√∂kningar n√§r KALP visar att kunden kan l√•na mer √§n ans√∂kt, f√•r kunden r√§tt belopp utan att beh√∂va √§ndra ans√∂kan. Detta f√∂rb√§ttrar kundupplevelsen och minskar behovet av manuell justering.</li>
        <li><strong>Sammanfattning innan bekr√§ftelse:</strong> Genom "Confirm application" steget med sammanfattning av all insamlad information kan kunden kontrollera att allt √§r korrekt innan ans√∂kan g√•r vidare. Detta minskar risken f√∂r fel och f√∂rb√§ttrar kundens f√∂rtroende f√∂r processen.</li>
      </ul>

      <h3>Riskminskning och f√∂rb√§ttrad riskhantering</h3>
      <ul>
        <li><strong>Tidig riskidentifiering via automatisk screening:</strong> Genom automatisk pre-screening, stakeholder-validering, objekt-validering och KALP-screening identifieras och avvisas ans√∂kningar med h√∂g risk tidigt i processen (innan kreditevaluering). Detta minskar risken f√∂r felaktiga kreditbeslut med 40-50% och potentiella f√∂rluster med 30-40%.</li>
        <li><strong>Multi-instance felhantering:</strong> Genom multi-instance-mekanismer f√∂r flera parter, hush√•ll och stakeholders kan varje part bed√∂mas individuellt och avvisas separat via error events (pre-screen rejected, stakeholder rejected). Detta s√§kerst√§ller att endast ans√∂kningar d√§r alla parter uppfyller krav g√•r vidare, vilket minskar risken f√∂r felaktiga beslut.</li>
        <li><strong>Automatisk timeout-hantering:</strong> Genom timeout-mekanism p√• "Confirm application" s√§kerst√§lls att ans√∂kningar d√§r kunden inte bekr√§ftar inom tidsgr√§nsen avslutas automatiskt och inte fastnar i systemet. Detta minskar risken f√∂r f√∂r√•ldrade ans√∂kningar och f√∂rb√§ttrar riskhanteringen.</li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>User stories</summary>
        <div class="section-content">
<p class="muted">Relevanta och realistiska user stories som kan kopplas till feature goalet.</p>
      <p class="muted"><strong>Notera:</strong> Varje user story kan kompletteras med acceptanskriterier f√∂r att vara implementeringsklar. Se "Acceptanskriterier"-sektionen f√∂r detaljerade krav.</p>
      
      <h3>Kundperspektiv</h3>
      <ul>
        <li><strong>Som kund</strong> vill jag att systemet automatiskt h√§mtar min befintliga information via "Internal data gathering" call activity (internal-data-gathering) <strong>s√• att</strong> jag inte beh√∂ver fylla i information som banken redan har om mig, s√§rskilt viktigt f√∂r √•terkommande kunder. <em>Acceptanskriterier: "Internal data gathering" call activity (internal-data-gathering) ska k√∂ras som multi-instance f√∂r varje identifierad part, och systemet ska visa h√§mtad information (part, engagemang, kreditinformation) i ett tydligt format, markera f√§lt som √§r auto-ifyllda, och till√•ta mig att √§ndra information om den √§r felaktig.</em></li>
        <li><strong>Som kund</strong> vill jag att systemet automatiskt g√∂r pre-screening f√∂r mig och mina medl√•ntagare via DMN-beslutsregel i "Internal data gathering" <strong>s√• att</strong> jag f√•r tidig feedback om n√•gon av oss inte uppfyller grundl√§ggande krav (√•lder, anst√§llningsstatus, kreditv√§rdighet). <em>Acceptanskriterier: Om pre-screening avvisar en part via boundary event "Event_03349px" (pre-screen-rejected, Error_1vtortg) p√• "Internal data gathering" call activity (internal-data-gathering), ska processen avslutas med end event "Event_1uj7wwd" (Pre-screening rejected), och jag ska f√• ett tydligt meddelande som f√∂rklarar vilket krav som inte uppfylldes (t.ex. "√Ölder under 18 √•r" eller "Kreditscore under 300"), vilken part som avvisades, och att ans√∂kan inte kan forts√§tta.</em></li>
        <li><strong>Som kund</strong> vill jag kunna fylla i information om hush√•llsekonomi (Household) och stakeholders-information parallellt via parallel gateway (Gateway_0n2ekt4) <strong>s√• att</strong> jag kan slutf√∂ra ans√∂kan snabbare √§n om jag m√•ste g√∂ra det sekventiellt. <em>Acceptanskriterier: Efter "Internal data gathering completed" intermediate throw event (internal-data-completed), ska parallel gateway (Gateway_0n2ekt4) starta b√•de "Household" call activity (household) och "Per stakeholder" subprocess (stakeholders) parallellt. Jag ska kunna √∂ppna b√•de Household- och Stakeholders-formul√§ren samtidigt i separata flikar/f√∂nster, och spara progress i varje formul√§r oberoende av varandra. Systemet ska validera varje formul√§r separat och visa tydligt vilka formul√§r som √§r kompletta.</em></li>
        <li><strong>Som kund med flera hush√•ll</strong> vill jag kunna registrera ekonomi f√∂r varje hush√•ll separat via multi-instance "Household" call activity (household) <strong>s√• att</strong> systemet kan bed√∂ma varje hush√•ll individuellt. <em>Acceptanskriterier: "Household" call activity (household) ska k√∂ras som multi-instance f√∂r varje hush√•ll, s√• jag kan registrera ekonomi f√∂r varje hush√•ll separat, och systemet kan bed√∂ma varje hush√•ll individuellt.</em></li>
        <li><strong>Som kund med sambo/medl√•ntagare</strong> vill jag kunna l√§gga till flera stakeholders i "Per stakeholder" subprocess (stakeholders) <strong>s√• att</strong> b√•de min och min partners ekonomi tas med i bed√∂mningen via multi-instance "Stakeholder" call activity (stakeholder). <em>Acceptanskriterier: "Per stakeholder" subprocess (stakeholders) ska k√∂ras som multi-instance, och inuti subprocessen ska "Stakeholder" call activity (stakeholder) k√∂ras sekventiellt f√∂r varje stakeholder (t.ex. huvudans√∂kande och medl√•ntagare), s√• b√•de min och min partners ekonomi tas med i bed√∂mningen.</em></li>
        <li><strong>Som kund</strong> vill jag kunna se en sammanfattning av all insamlad information (intern data, hush√•ll, stakeholders, objekt) innan jag bekr√§ftar ans√∂kan via "Confirm application" user task (confirm-application) <strong>s√• att</strong> jag kan kontrollera att allt √§r korrekt innan ans√∂kan g√•r vidare. <em>Acceptanskriterier: Efter parallel gateway (Gateway_1960pk9) samlar fl√∂den fr√•n b√•de "Household" call activity (household) och "Per stakeholder" subprocess (stakeholders), ska "Confirm application" user task (confirm-application) aktiveras. Sammanfattningen ska visa alla insamlade data i ett strukturerat format med tydliga rubriker (Intern data, Hush√•llsekonomi, Stakeholders, Objekt), till√•ta mig att g√• tillbaka och √§ndra information, och visa en tydlig "Bekr√§fta"-knapp. Om n√•gon information saknas, ska systemet visa en varning och inte till√•ta bekr√§ftelse. N√§r jag bekr√§ftar, ska processen avslutas med end event "Event_0j4buhs".</em></li>
        <li><strong>Som kund</strong> vill jag f√• tydlig feedback om varf√∂r ans√∂kan avvisas via error events (pre-screen rejected, stakeholder rejected, object rejected) <strong>s√• att</strong> jag f√∂rst√•r vad som beh√∂ver f√∂rb√§ttras eller √§ndras. <em>Acceptanskriterier: Om "Internal data gathering" call activity (internal-data-gathering) triggar boundary event "Event_03349px" (pre-screen-rejected, Error_1vtortg), ska processen avslutas med end event "Event_1uj7wwd" (Pre-screening rejected). Om "Per stakeholder" subprocess (stakeholders) triggar boundary event "Event_1dhapnx" (stakeholder-rejected, Error_0xx0ma1), ska processen avslutas med end event "Event_1uk9ycv" (Stakeholder rejected). Om "Per stakeholder" subprocess (stakeholders) triggar boundary event "Event_152muhg" (object-rejected, Error_1pe398g), ska processen avslutas med end event "Event_07jlrhu" (Object rejected). Varje avvisning ska inneh√•lla ett tydligt felmeddelande p√• svenska som f√∂rklarar orsaken, vilken part/objekt som avvisades, och konkreta steg f√∂r att f√∂rb√§ttra situationen.</em></li>
      </ul>

      <h3>Handl√§ggarperspektiv</h3>
      <ul>
        <li><strong>Som handl√§ggare</strong> vill jag att systemet automatiskt g√∂r pre-screening via DMN-beslutsregel i "Internal data gathering" call activity (internal-data-gathering) f√∂r alla parter <strong>s√• att</strong> ans√∂kningar d√§r parter inte uppfyller grundl√§ggande krav (√•lder, anst√§llningsstatus, kreditv√§rdighet) avvisas automatiskt innan de n√•r mig. <em>Acceptanskriterier: "Internal data gathering" call activity (internal-data-gathering) ska k√∂ras som multi-instance f√∂r varje identifierad part, och om pre-screening avvisar en part, ska boundary event "Event_03349px" (pre-screen-rejected, Error_1vtortg) triggas, och processen ska avslutas med end event "Event_1uj7wwd" (Pre-screening rejected) innan ans√∂kan n√•r mig.</em></li>
        <li><strong>Som handl√§ggare</strong> vill jag att systemet automatiskt validerar stakeholders och objekt mot aff√§rsregler via DMN-beslutsregler i "Per stakeholder" subprocess (stakeholders) <strong>s√• att</strong> ans√∂kningar d√§r stakeholders eller objekt inte uppfyller krav avvisas automatiskt via error events. <em>Acceptanskriterier: Om "Per stakeholder" subprocess (stakeholders) triggar boundary event "Event_1dhapnx" (stakeholder-rejected, Error_0xx0ma1), ska processen avslutas med end event "Event_1uk9ycv" (Stakeholder rejected). Om "Per stakeholder" subprocess (stakeholders) triggar boundary event "Event_152muhg" (object-rejected, Error_1pe398g), ska processen avslutas med end event "Event_07jlrhu" (Object rejected). Ans√∂kningar d√§r stakeholders eller objekt inte uppfyller krav avvisas automatiskt innan de n√•r mig.</em></li>
        <li><strong>Som handl√§ggare</strong> vill jag att systemet automatiskt samlar fl√∂den fr√•n b√•de "Household" call activity (household) och "Per stakeholder" subprocess (stakeholders) via parallel gateway (Gateway_1960pk9) <strong>s√• att</strong> "Confirm application" user task (confirm-application) bara aktiveras n√§r b√•da fl√∂dena √§r klara. <em>Acceptanskriterier: Parallel gateway (Gateway_1960pk9) ska samla fl√∂den fr√•n b√•de "Household" call activity (household) och "Per stakeholder" subprocess (stakeholders), och "Confirm application" user task (confirm-application) ska bara aktiveras n√§r b√•da fl√∂dena √§r klara och processen kan avslutas med end event "Event_0j4buhs".</em></li>
      </ul>

      <h3>Systemperspektiv</h3>
      <ul>
        <li><strong>Som systemadministrat√∂r</strong> vill jag att "Internal data gathering" call activity (internal-data-gathering) k√∂rs som multi-instance f√∂r varje identifierad part <strong>s√• att</strong> datainsamling och pre-screening sker separat f√∂r huvudans√∂kande och medl√•ntagare, och att varje part kan avvisas individuellt via "pre-screen rejected" error event. <em>Acceptanskriterier: "Internal data gathering" call activity (internal-data-gathering) ska ha multi-instance loop characteristics, s√• processen k√∂rs en g√•ng per identifierad part. Om pre-screening avvisar en part, ska boundary event "Event_03349px" (pre-screen-rejected, Error_1vtortg) triggas p√• call activity, och processen ska avslutas med end event "Event_1uj7wwd" (Pre-screening rejected).</em></li>
        <li><strong>Som systemadministrat√∂r</strong> vill jag att "Internal data gathering completed" intermediate throw event (internal-data-completed) signalerar n√§r datainsamling √§r klar <strong>s√• att</strong> parallel gateway (Gateway_0n2ekt4) kan starta parallella fl√∂den. <em>Acceptanskriterier: N√§r "Internal data gathering" call activity (internal-data-gathering) slutf√∂rs, ska "Internal data gathering completed" intermediate throw event (internal-data-completed) signaleras, och parallel gateway (Gateway_0n2ekt4) ska starta b√•de "Household" call activity (household) och "Per stakeholder" subprocess (stakeholders) parallellt.</em></li>
        <li><strong>Som systemadministrat√∂r</strong> vill jag att "Household" call activity (household) och "Per stakeholder" subprocess (stakeholders) k√∂rs parallellt via parallel gateway (Gateway_0n2ekt4) <strong>s√• att</strong> kunden kan fylla i b√•de hush√•llsekonomi och stakeholder-information samtidigt, vilket minskar total tid f√∂r ans√∂kan. <em>Acceptanskriterier: Parallel gateway (Gateway_0n2ekt4) ska starta b√•de "Household" call activity (household) och "Per stakeholder" subprocess (stakeholders) parallellt, s√• kunden kan fylla i b√•de hush√•llsekonomi och stakeholder-information samtidigt.</em></li>
        <li><strong>Som systemadministrat√∂r</strong> vill jag att "Household" call activity (household) k√∂rs som multi-instance <strong>s√• att</strong> flera hush√•ll kan hanteras separat. <em>Acceptanskriterier: "Household" call activity (household) ska ha multi-instance loop characteristics, s√• processen k√∂rs en g√•ng per hush√•ll, och flera hush√•ll kan hanteras separat.</em></li>
        <li><strong>Som systemadministrat√∂r</strong> vill jag att "Per stakeholder" subprocess (stakeholders) k√∂rs som multi-instance <strong>s√• att</strong> flera stakeholders kan hanteras separat, och att varje stakeholder kan avvisas individuellt via error events. <em>Acceptanskriterier: "Per stakeholder" subprocess (stakeholders) ska ha multi-instance loop characteristics, s√• processen k√∂rs en g√•ng per stakeholder. Inuti subprocessen ska "Stakeholder" call activity (stakeholder) k√∂ras sekventiellt f√∂r varje stakeholder, f√∂ljt av "Object" call activity (object). Om "Stakeholder" call activity (stakeholder) avvisas, ska boundary event "Event_1dhapnx" (stakeholder-rejected, Error_0xx0ma1) triggas, och processen ska avslutas med end event "Event_1uk9ycv" (Stakeholder rejected). Om "Object" call activity (object) avvisas, ska boundary event "Event_152muhg" (object-rejected, Error_1pe398g) triggas, och processen ska avslutas med end event "Event_07jlrhu" (Object rejected).</em></li>
        <li><strong>Som systemadministrat√∂r</strong> vill jag att parallel gateway (Gateway_1960pk9) samlar fl√∂den fr√•n b√•de "Household" call activity (household) och "Per stakeholder" subprocess (stakeholders) <strong>s√• att</strong> "Confirm application" user task (confirm-application) bara aktiveras n√§r b√•da fl√∂dena √§r klara. <em>Acceptanskriterier: Parallel gateway (Gateway_1960pk9) ska samla fl√∂den fr√•n b√•de "Household" call activity (household) och "Per stakeholder" subprocess (stakeholders), och "Confirm application" user task (confirm-application) ska bara aktiveras n√§r b√•da fl√∂dena √§r klara. N√§r kunden bekr√§ftar ans√∂kan, ska processen avslutas med end event "Event_0j4buhs".</em></li>
        <li><strong>Som systemadministrat√∂r</strong> vill jag att processen hanterar alla error events (pre-screen rejected, stakeholder rejected, object rejected) via boundary events <strong>s√• att</strong> processen avslutas korrekt med tydliga felmeddelanden till kunden. <em>Acceptanskriterier: Om "Internal data gathering" call activity (internal-data-gathering) triggar boundary event "Event_03349px" (pre-screen-rejected, Error_1vtortg), ska processen avslutas med end event "Event_1uj7wwd" (Pre-screening rejected). Om "Per stakeholder" subprocess (stakeholders) triggar boundary event "Event_1dhapnx" (stakeholder-rejected, Error_0xx0ma1), ska processen avslutas med end event "Event_1uk9ycv" (Stakeholder rejected). Om "Per stakeholder" subprocess (stakeholders) triggar boundary event "Event_152muhg" (object-rejected, Error_1pe398g), ska processen avslutas med end event "Event_07jlrhu" (Object rejected). Varje error event ska inneh√•lla tydliga felmeddelanden till kunden.</em></li>
      </ul>
        </div>
      </details>
    </section>

    <section class="doc-section">
      <details>
        <summary>Acceptanskriterier</summary>
        <div class="section-content">
<p class="muted">Relevanta och realistiska acceptanskriterier som kan kopplas till feature goalet.</p>
      
      <h3>1. Intern datainsamling och pre-screening</h3>
      <ul>
        <li>Systemet ska automatiskt h√§mta befintlig kunddata fr√•n interna system (part, engagemang, kreditinformation) f√∂r alla identifierade parter i ans√∂kan via "Internal data gathering" call activity</li>
        <li>"Internal data gathering" ska k√∂ras som multi-instance f√∂r varje identifierad part, s√• att datainsamling och pre-screening sker separat f√∂r huvudans√∂kande och medl√•ntagare</li>
        <li>Systemet ska automatiskt utf√∂ra pre-screening via DMN-beslutsregel f√∂r varje part och kontrollera grundl√§ggande krav (√•lder ‚â• 18 √•r, anst√§llningsstatus, kreditscore ‚â• 300)</li>
        <li>Om en eller flera parter avvisas vid pre-screening, ska systemet trigga "pre-screen rejected" error event via boundary event p√• "Internal data gathering" call activity, avsluta processen, och visa tydligt felmeddelande till kunden som f√∂rklarar vilket krav som inte uppfylldes och vilken part som avvisades</li>
        <li>Om alla parter godk√§nns vid pre-screening, ska processen forts√§tta till "Object" call activity</li>
      </ul>

      <h3>2. Objektinformation och validering</h3>
      <ul>
        <li>Systemet ska samla in grundl√§ggande information om fastigheten/bostadsr√§tten som ans√∂kan g√§ller via "Object" call activity innan stakeholders-processen startar</li>
        <li>Om fastigheten/bostadsr√§tten avvisas vid validering (t.ex. f√∂r h√∂g LTV, d√•lig bel√§genhet), ska systemet trigga "object rejected" error event via boundary event p√• "Object" call activity, avsluta processen, och visa tydligt felmeddelande till kunden</li>
        <li>Om objektet godk√§nns, ska processen forts√§tta till "Stakeholders" subprocess</li>
      </ul>

      <h3>3. Parallell datainsamling (Household och Stakeholders)</h3>
      <ul>
        <li>Systemet ska k√∂ra "Household" och "Stakeholders" parallellt efter att intern data och objektinformation √§r insamlad, s√• att kunden kan fylla i b√•de hush√•llsekonomi och stakeholder-information samtidigt</li>
        <li>Kunden ska kunna √∂ppna b√•de Household- och Stakeholders-formul√§ren samtidigt i separata flikar/f√∂nster, spara progress i varje formul√§r oberoende av varandra, och systemet ska validera varje formul√§r separat och visa tydligt vilka formul√§r som √§r kompletta</li>
        <li>"Household" call activity ska k√∂ras som multi-instance f√∂r flera hush√•ll om det beh√∂vs, s√• att varje hush√•ll kan registreras separat</li>
        <li>"Stakeholders" subprocess ("Per household") ska k√∂ras som multi-instance - en g√•ng per hush√•ll</li>
        <li>Inne i "Stakeholders" subprocessen ska "Household" ‚Üí "Stakeholder" ‚Üí "Object" call activities k√∂ras sekventiellt f√∂r varje stakeholder, och "Stakeholder" call activity ska k√∂ras som multi-instance f√∂r flera stakeholders (t.ex. huvudans√∂kande och medl√•ntagare)</li>
        <li>Om en stakeholder avvisas vid validering, ska systemet trigga "stakeholder rejected" error event via boundary event p√• "Stakeholders" subprocess, avsluta processen, och visa tydligt felmeddelande till kunden</li>
        <li>N√§r b√•de "Household" och "Stakeholders" √§r klara, ska processen forts√§tta till "Skip step?" gateway</li>
      </ul>

      <h3>4. KALP-ber√§kning och screening</h3>
      <ul>
        <li>"Skip step?" gateway ska avg√∂ra om bekr√§ftelsesteget ska hoppas √∂ver eller inte baserat p√• aff√§rslogik</li>
        <li>Om bekr√§ftelse hoppas √∂ver ("Yes"), ska processen g√• direkt till "Sammanf√∂r fl√∂den" gateway och sedan "Fetch credit information"</li>
        <li>Om bekr√§ftelse inte hoppas √∂ver ("No"), ska systemet automatiskt ber√§kna maximalt l√•nebelopp baserat p√• hush√•llsaffordability (KALP) via "KALP" service task, lagra resultatet i datastore "KALP", och forts√§tta till "Screen KALP" business rule task</li>
        <li>"Screen KALP" DMN-beslutsregel ska utv√§rdera KALP-resultatet mot aff√§rsregler baserat p√• ans√∂kningstyp:
          <ul>
            <li><strong>F√∂r k√∂p:</strong> Om maximalt l√•nebelopp √§r under tr√∂skelv√§rde ‚Üí avvisa. Om maximalt l√•nebelopp √§r under ans√∂kt belopp ‚Üí s√§tt ans√∂kt belopp till maximalt belopp. Om maximalt l√•nebelopp √§r √∂ver ans√∂kt belopp ‚Üí inga √§ndringar.</li>
            <li><strong>F√∂r flytt/oml√•ning:</strong> Om maximalt l√•nebelopp √§r under ans√∂kt belopp ‚Üí avvisa.</li>
          </ul>
        </li>
        <li>"KALP OK?" gateway ska avg√∂ra om KALP-ber√§kningen och screening √§r godk√§nd baserat p√• "Screen KALP" resultat</li>
        <li>Om KALP inte √§r OK ("No"), ska systemet trigga "application rejected" error event, avsluta processen, och visa tydligt felmeddelande till kunden som f√∂rklarar orsaken (t.ex. "Maximalt l√•nebelopp (2 500 000 SEK) √§r under ans√∂kt belopp (3 000 000 SEK)") och konkreta steg f√∂r att f√∂rb√§ttra situationen</li>
        <li>Om KALP √§r OK ("Yes"), ska processen forts√§tta till "Confirm application" user task (om bekr√§ftelse inte hoppades √∂ver) eller direkt till "Sammanf√∂r fl√∂den" gateway (om bekr√§ftelse hoppades √∂ver)</li>
      </ul>

      <h3>5. Bekr√§ftelse och timeout-hantering</h3>
      <ul>
        <li>Kunden ska kunna se en sammanfattning av all insamlad information (intern data, hush√•ll, stakeholders, objekt) i "Confirm application" user task, med tydliga rubriker (Intern data, Hush√•llsekonomi, Stakeholders, Objekt), m√∂jlighet att g√• tillbaka och √§ndra information, och en tydlig "Bekr√§fta"-knapp</li>
        <li>Om n√•gon information saknas, ska systemet visa en varning och inte till√•ta bekr√§ftelse</li>
        <li>Om kunden bekr√§ftar ans√∂kan, ska processen forts√§tta till "Sammanf√∂r fl√∂den" gateway</li>
        <li>Om kunden inte bekr√§ftar ans√∂kan inom tidsgr√§nsen (t.ex. 30 dagar), ska systemet trigga timeout boundary event p√• "Confirm application" user task, trigga "application-timeout" error event, avsluta processen, och visa tydligt felmeddelande till kunden</li>
      </ul>

      <h3>6. Kreditupplysning</h3>
      <ul>
        <li>"Sammanf√∂r fl√∂den" gateway ska samla ihop b√•de bekr√§ftelse-fl√∂det (fr√•n "Confirm application") och skip-fl√∂det (fr√•n "Skip step?" gateway "Yes"), s√• att "Fetch credit information" bara startar n√§r antingen bekr√§ftelse √§r klar eller bekr√§ftelse har hoppats √∂ver</li>
        <li>Systemet ska automatiskt h√§mta kreditinformation fr√•n externa k√§llor (t.ex. UC3) f√∂r alla stakeholders via "Fetch credit information" service task n√§r ans√∂kan √§r bekr√§ftad eller bekr√§ftelse har hoppats √∂ver</li>
        <li>"Fetch credit information" ska k√∂ras som multi-instance - en g√•ng per stakeholder, s√• att kreditinformation h√§mtas separat f√∂r huvudans√∂kande och medl√•ntagare</li>
        <li>Kreditinformationen ska lagras i datastore "Personal credit information source" f√∂r anv√§ndning i senare steg i kreditprocessen</li>
        <li>N√§r kreditupplysning √§r klar, ska processen avslutas normalt och ans√∂kan ska g√• vidare till kreditevaluering i Mortgage huvudprocessen</li>
      </ul>

      <h3>7. Felhantering och error events</h3>
      <ul>
        <li>Systemet ska hantera alla error events via boundary events p√• relevanta call activities/user tasks:
          <ul>
            <li>"pre-screen rejected" error event via boundary event p√• "Internal data gathering" call activity</li>
            <li>"object rejected" error event via boundary event p√• "Object" call activity</li>
            <li>"stakeholder rejected" error event via boundary event p√• "Stakeholders" subprocess</li>
            <li>"application rejected" error event via "KALP OK?" gateway "No" fl√∂de</li>
            <li>"application-timeout" error event via timeout boundary event p√• "Confirm application" user task</li>
          </ul>
        </li>
        <li>Varje error event ska avsluta processen med korrekt felmeddelande till kunden som f√∂rklarar orsaken, vilken part/objekt som avvisades, och konkreta steg f√∂r att f√∂rb√§ttra situationen</li>
        <li>Felmeddelanden ska vara p√• svenska, tydliga och aff√§rsorienterade (inte tekniska), och ska inneh√•lla konkreta siffror d√§r relevant (t.ex. "Maximalt l√•nebelopp (2 500 000 SEK) √§r under ans√∂kt belopp (3 000 000 SEK)")</li>
      </ul>

      <h3>8. Multi-instance och parallellitet</h3>
      <ul>
        <li>Processen ska st√∂dja multi-instance f√∂r flera parter, hush√•ll och stakeholders:
          <ul>
            <li>"Internal data gathering" som multi-instance f√∂r varje identifierad part</li>
            <li>"Household" som multi-instance f√∂r flera hush√•ll</li>
            <li>"Stakeholders" subprocess som multi-instance - en g√•ng per hush√•ll</li>
            <li>"Stakeholder" call activity som multi-instance inuti "Stakeholders" subprocessen</li>
            <li>"Fetch credit information" som multi-instance f√∂r varje stakeholder</li>
          </ul>
        </li>
        <li>Varje multi-instance ska hanteras separat med korrekt felhantering, s√• att om en instans avvisas, p√•verkar det inte andra instanser</li>
        <li>"Household" och "Stakeholders" ska k√∂ras parallellt, s√• att kunden kan fylla i b√•de hush√•llsekonomi och stakeholder-information samtidigt</li>
      </ul>
        </div>
      </details>
    </section>

</body>
</html>
