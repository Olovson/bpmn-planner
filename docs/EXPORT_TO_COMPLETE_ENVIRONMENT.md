# Export to Complete Environment: Step-by-Step Guide

## Översikt

Denna guide beskriver hur du exporterar test scripts från BPMN Planner och tar dem till complete environment för finalisering.

---

## Steg 1: Generera Test Scripts i BPMN Planner

### 1.1 Generera Artifacts

1. Öppna BPMN Planner
2. Gå till BPMN File Manager
3. Klicka på "Generate All Artifacts"
4. Välj provider (Local fallback / ChatGPT / Ollama)
5. Vänta på att genereringen slutförs

### 1.2 Verifiera Test Scripts

1. Gå till `/test-scripts` eller `/node-tests`
2. Verifiera att test scripts har genererats
3. Kontrollera att scenarios har metadata (persona, riskLevel, uiFlow, etc.)

---

## Steg 2: Exportera Test Scripts

### 2.1 Export från Node Tests Page

1. Gå till `/node-tests?bpmnFile=...&elementId=...`
2. Klicka på "Export Tests for Complete Environment"
3. Välj format (Playwright / Jest / Mocha)
4. Välj output directory
5. Klicka på "Export"

### 2.2 Export från Test Scripts Page

1. Gå till `/test-scripts`
2. Välj test scripts du vill exportera
3. Klicka på "Export Selected Tests"
4. Välj format och output directory
5. Klicka på "Export"

### 2.3 Export från BPMN File Manager

1. Efter generering av artifacts
2. Klicka på "Export for Complete Environment"
3. Välj format och output directory
4. Klicka på "Export"

---

## Steg 3: Export Manifest

Varje export genererar en `export-manifest.json` som innehåller:

```json
{
  "exportDate": "2024-01-15T10:30:00.000Z",
  "format": "playwright",
  "summary": {
    "totalTests": 25,
    "withUiFlow": 15,
    "withPersona": 20,
    "withRiskLevel": 25,
    "needsCompleteEnvironment": 25
  },
  "files": [
    {
      "path": "tests/fictional-app/confirm-application-EPIC-S1.spec.ts",
      "status": "ready-for-completion"
    }
  ],
  "instructions": {
    "step1": "Import tests to complete environment",
    "step2": "Add actual routes/endpoints",
    "step3": "Add actual UI locators",
    "step4": "Add test data fixtures",
    "step5": "Validate and run tests"
  }
}
```

---

## Steg 4: Importera till Complete Environment

### 4.1 Kopiera Filer

```bash
# Kopiera exporterade test scripts
cp bpmn-planner/exports/tests/* tests/fictional-app/

# Kopiera export manifest
cp bpmn-planner/exports/export-manifest.json .
```

### 4.2 Verifiera Struktur

Kontrollera att filerna har korrekt struktur:

```typescript
// EXPORT-READY TEST - Generated by BPMN Planner
// BPMN File: mortgage-se-application.bpmn
// Node ID: confirm-application
// Scenario: EPIC-S1
// ...

import { test, expect } from '@playwright/test';

test.describe('...', () => {
  test('...', async ({ page }) => {
    // TODO markers för completion
  });
});
```

---

## Steg 5: Komplettera Test Scripts

Se `docs/COMPLETING_TESTS_IN_COMPLETE_ENVIRONMENT.md` för detaljerad guide om hur du kompletterar scripts.

### Snabb Checklist

- [ ] Uppdatera routes/endpoints
- [ ] Uppdatera UI locators
- [ ] Lägg till testdata fixtures
- [ ] Verifiera assertions
- [ ] Kör tester och fixa eventuella problem

---

## Troubleshooting

### Problem: Export-knapp syns inte

**Lösning**: Kontrollera att test scripts har genererats först. Export är bara tillgängligt när det finns scripts att exportera.

### Problem: Export genererar tomma filer

**Lösning**: Kontrollera att scenarios har metadata (persona, riskLevel, etc.). Uppdatera scenarios om nödvändigt.

### Problem: Filer saknas i export

**Lösning**: Kontrollera export manifest för att se vilka filer som exporterades. Verifiera att alla noder har scenarios.

---

## Nästa Steg

Efter export:
1. Följ `docs/COMPLETING_TESTS_IN_COMPLETE_ENVIRONMENT.md` för att komplettera scripts
2. Kör tester och validera
3. Iterera baserat på resultat

