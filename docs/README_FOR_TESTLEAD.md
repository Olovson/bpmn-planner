# BPMN Planner: Guide f√∂r Test Lead

## V√§lkommen!

Denna guide √§r skriven specifikt f√∂r dig som test lead och f√∂rklarar hur BPMN Planner fungerar och hur du kan ta de genererade test scripts vidare till ditt reella projekt.

---

## Vad √§r BPMN Planner?

**BPMN Planner** √§r ett verktyg som:
- L√§ser BPMN-filer (samma som ditt projekt anv√§nder)
- Genererar dokumentation, test scenarios och test scripts
- Skapar en struktur som kan exporteras och anv√§ndas i ditt reella projekt

**Viktigt**: BPMN Planner genererar **starter scripts** - de beh√∂ver kompletteras med riktiga routes, UI locators och testdata i ditt projekt.

---

## Hur BPMN Planner Fungerar

### 1. BPMN-filer som Input

BPMN Planner anv√§nder **samma BPMN-filer** som ditt projekt:
- `mortgage-se-application.bpmn`
- `mortgage-se-internal-data-gathering.bpmn`
- etc.

Dessa filer beskriver processerna som ska testas.

### 2. Generering av Test Scenarios

BPMN Planner analyserar BPMN-filerna och genererar:
- **Test scenarios** baserat p√• BPMN-noder (UserTasks, ServiceTasks, etc.)
- **Scenario metadata**:
  - `persona` - Vem interagerar (customer, advisor, system)
  - `riskLevel` - Testprioritet (P0, P1, P2)
  - `assertionType` - Testtyp (functional, regression, compliance)
  - `uiFlow` - Navigationssteg (pageId, action, locatorId)
  - `dataProfileId` - Referens till testdata

### 3. Generering av Test Scripts

BPMN Planner genererar **export-ready test scripts** i Playwright-format:
- Korrekt teststruktur
- BPMN-metadata som kommentarer
- Tydliga TODO-mark√∂rer f√∂r vad som beh√∂ver kompletteras
- Smart defaults (inferred routes/endpoints fr√•n nodnamn)

### 4. Export till Ditt Projekt

Test scripts kan exporteras och tas till ditt reella projekt d√§r de kompletteras med:
- Riktiga routes/endpoints
- Riktiga UI locators
- Riktiga testdata fixtures

---

## Vad Du F√•r fr√•n BPMN Planner

### 1. Test Scenarios

Varje BPMN-nod f√•r test scenarios baserat p√•:
- **Happy path** - Normalfl√∂de
- **Error cases** - Felhantering
- **Edge cases** - Gr√§nsfall

**Exempel scenario**:
```typescript
{
  id: 'EPIC-S1',
  name: 'Normalfl√∂de med komplett underlag',
  persona: 'customer',
  riskLevel: 'P0',
  assertionType: 'functional',
  uiFlow: [
    { pageId: 'application-form', action: 'fill form', locatorId: 'form' },
    { pageId: 'application-form', action: 'click submit', locatorId: 'submit-btn' },
    { pageId: 'confirmation-page', action: 'verify message', locatorId: 'confirmation' }
  ]
}
```

### 2. Export-Ready Test Scripts

**Exempel export-ready test**:
```typescript
// ============================================
// EXPORT-READY TEST - Generated by BPMN Planner
// BPMN File: mortgage-se-application.bpmn
// Node ID: confirm-application
// Scenario: EPIC-S1 - Normalfl√∂de med komplett underlag
// Persona: customer, Risk Level: P0
// ============================================

import { test, expect } from '@playwright/test';

test.describe('P0 - Confirm Application - Happy Path', () => {
  test('Normalfl√∂de med komplett underlag', async ({ page }) => {
    // Setup: Login as customer
    await page.goto('/login'); // ‚ö†Ô∏è TODO: Update with actual login route
    await page.fill('#email', 'customer@example.com'); // ‚ö†Ô∏è TODO: Use real test credentials
    
    // Navigation steps (from uiFlow)
    await page.goto('/application-form'); // ‚ö†Ô∏è TODO: Update with actual route
    await page.fill('#form', 'TODO: Add test data'); // ‚ö†Ô∏è TODO: Update locator and add test data
    await page.click('#submit-btn'); // ‚ö†Ô∏è TODO: Verify locator
    
    // Assertions based on scenario outcome
    await expect(page.locator('.success-message, .confirmation')).toBeVisible();
  });
});
```

### 3. BPMN Metadata

Varje test inneh√•ller BPMN-metadata som kommentarer:
- BPMN-fil
- Node ID
- Node typ
- Scenario information
- Persona, riskLevel, etc.

Detta g√∂r det enkelt att sp√•ra varje test tillbaka till BPMN-processen.

---

## Hur Du Tar Detta Vidare i Ditt Projekt

### Steg 1: Exportera Test Scripts

1. √ñppna BPMN Planner
2. G√• till `/test-scripts` eller `/node-tests`
3. Klicka p√• "Export Tests for Complete Environment"
4. V√§lj format (Playwright)
5. Exportera till filer

### Steg 2: Importera till Ditt Projekt

```bash
# Kopiera exporterade test scripts
cp bpmn-planner/exports/tests/* tests/fictional-app/

# Kopiera export manifest
cp bpmn-planner/exports/export-manifest.json .
```

### Steg 3: Komplettera Test Scripts

Se `docs/COMPLETING_TESTS_IN_COMPLETE_ENVIRONMENT.md` f√∂r detaljerad guide.

**Kort checklist**:
- [ ] Uppdatera routes/endpoints med riktiga URLs
- [ ] Uppdatera UI locators med riktiga selektorer
- [ ] L√§gg till testdata fixtures
- [ ] Verifiera assertions
- [ ] K√∂r tester och fixa eventuella problem

**Exempel transformation**:

**F√∂re** (Export-ready):
```typescript
await page.goto('/login'); // ‚ö†Ô∏è TODO: Update with actual login route
await page.fill('#email', 'customer@example.com'); // ‚ö†Ô∏è TODO: Use real test credentials
```

**Efter** (Komplett):
```typescript
import { testData } from '../fixtures/mortgage-test-data';

await page.goto('https://mortgage-app.example.com/login');
await page.fill('[data-testid="email-input"]', testData.customer.email);
await page.fill('[data-testid="password-input"]', testData.customer.password);
```

### Steg 4: Validera och K√∂r

```bash
# Kompilera
npm run type-check

# K√∂r tester
npm test

# K√∂r specifik test
npx playwright test tests/fictional-app/confirm-application-EPIC-S1.spec.ts
```

---

## Viktiga Koncept

### 1. Starter vs. Complete Environment

**BPMN Planner** = Starter environment
- Genererar grundl√§ggande test scripts
- Inkluderar BPMN-metadata och struktur
- Har tydliga TODO-mark√∂rer

**Ditt Projekt** = Complete environment
- Kompletterar scripts med riktiga routes/locators/data
- K√∂r och validerar tester
- Itererar baserat p√• resultat

### 2. BPMN-filer som Single Source of Truth

BPMN-filerna √§r **single source of truth**:
- BPMN Planner l√§ser dem och genererar test scenarios
- Ditt projekt anv√§nder samma BPMN-filer
- N√§r BPMN-filer uppdateras ‚Üí regenerera test scenarios

### 3. Test Context: Fictional App vs. BPMN Planner

**Viktigt**: Test scripts fr√•n BPMN Planner testar **den fiktiva appen** (mortgage systemet), inte BPMN Planner sj√§lv.

- **FICTIONAL_APP**: Den app som BPMN-filerna beskriver (t.ex. mortgage system)
- **BPMN_PLANNER**: Verktyget vi bygger (BPMN Planner)

Test scripts √§r alltid f√∂r FICTIONAL_APP.

---

## Workflow: Fr√•n BPMN till K√∂rbara Tester

```
1. BPMN-filer
   ‚Üì
2. BPMN Planner analyserar och genererar:
   - Test scenarios (med metadata)
   - Export-ready test scripts
   ‚Üì
3. Exportera fr√•n BPMN Planner
   ‚Üì
4. Importera till ditt projekt
   ‚Üì
5. Komplettera med:
   - Riktiga routes/endpoints
   - Riktiga UI locators
   - Riktiga testdata
   ‚Üì
6. K√∂r och validera tester
   ‚Üì
7. Iterera baserat p√• resultat
```

---

## Dokumentation och Guider

### F√∂r Export och Completion

- **`docs/EXPORT_TO_COMPLETE_ENVIRONMENT.md`** - Steg-f√∂r-steg guide f√∂r export
- **`docs/COMPLETING_TESTS_IN_COMPLETE_ENVIRONMENT.md`** - Detaljerad guide f√∂r att komplettera scripts
- **`docs/STARTER_VS_COMPLETE_ENVIRONMENT.md`** - Fullst√§ndig plan f√∂r starter vs. complete environment

### F√∂r Test Context

- **`docs/TWO_APP_CONTEXTS.md`** - F√∂rklarar skillnaden mellan FICTIONAL_APP och BPMN_PLANNER
- **`docs/USING_TEST_CONTEXT_SAFEGUARDS.md`** - Hur man anv√§nder safeguards f√∂r att undvika kontextf√∂rvirring

### F√∂r Test Scenarios

- **`docs/FROM_BPMN_TO_REAL_TESTS_ANALYSIS.md`** - Analys av hur BPMN mappas till tester
- **`docs/RISK_ANALYSIS_AND_MITIGATION.md`** - Riskanalys och mitigering
- **`docs/PRAGMATIC_IMPLEMENTATION_PLAN.md`** - Implementeringsplan

---

## FAQ

### Q: Kan jag anv√§nda BPMN-filerna direkt i mitt projekt?

**A**: Ja! BPMN-filerna √§r samma i b√•de BPMN Planner och ditt projekt. BPMN Planner genererar bara test scenarios och starter scripts baserat p√• dem.

### Q: Vad h√§nder om BPMN-filerna √§ndras?

**A**: Regenerera test scenarios i BPMN Planner och exportera igen. Dina kompletterade scripts beh√•lls (de skrivs inte √∂ver), men du f√•r nya scenarios f√∂r √§ndrade/nya noder.

### Q: Kan jag redigera test scenarios i BPMN Planner?

**A**: Ja, du kan uppdatera scenario metadata (persona, riskLevel, uiFlow, etc.) i BPMN Planner. Dessa √§ndringar kommer med i exporten.

### Q: Hur ofta ska jag exportera?

**A**: 
- **N√§r BPMN-filer √§ndras** ‚Üí Regenerera och exportera
- **N√§r nya noder l√§ggs till** ‚Üí Regenerera och exportera
- **N√§r scenario metadata uppdateras** ‚Üí Exportera igen

### Q: Kan jag anv√§nda flera BPMN-filer?

**A**: Ja! BPMN Planner st√∂djer flera BPMN-filer och genererar test scenarios f√∂r alla. Exportera alla samtidigt eller selektivt.

### Q: Vad √§r skillnaden mellan export-ready och kompletta scripts?

**A**: 
- **Export-ready**: Har struktur, metadata, TODO-mark√∂rer (fr√•n BPMN Planner)
- **Kompletta**: Har riktiga routes, locators, testdata (i ditt projekt)

---

## N√§sta Steg

1. **L√§s export-guiden**: `docs/EXPORT_TO_COMPLETE_ENVIRONMENT.md`
2. **L√§s completion-guiden**: `docs/COMPLETING_TESTS_IN_COMPLETE_ENVIRONMENT.md`
3. **Exportera test scripts** fr√•n BPMN Planner
4. **Importera till ditt projekt**
5. **Komplettera scripts** enligt guiden
6. **K√∂r och validera** tester

---

## Support

Om du har fr√•gor eller beh√∂ver hj√§lp:
- Se dokumentationen i `docs/`-mappen
- Kontakta utvecklingsteamet
- Kolla main README: `README.md`

---

**Lycka till med testgenereringen!** üöÄ

