<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Approve Application</title>
  <style>
    :root {
      color-scheme: light;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --card-bg: #ffffff;
      --primary: #1d4ed8;
      --text-strong: #0f172a;
      --text-muted: #475569;
      --border: #e2e8f0;
      --accent: #dbeafe;
    }
    body {
      margin: 0;
      padding: 16px;
      background: #ffffff;
      color: var(--text-strong);
      line-height: 1.7;
    }
    .doc-shell {
      max-width: 960px;
      margin: 0 auto;
    }
    h1 {
      font-size: 1.5rem;
      margin: 0 0 24px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 8px;
    }
    h2 {
      color: var(--primary);
      margin: 24px 0 12px;
      font-size: 1.1rem;
    }
    p { margin: 0 0 12px; }
    ul { padding-left: 20px; margin: 0 0 12px; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 12px 0;
      background: var(--card-bg);
      border: 1px solid var(--border);
    }
    table th,
    table td {
      border-bottom: 1px solid var(--border);
      padding: 8px;
      text-align: left;
    }
    table th {
      background: var(--accent);
      color: var(--primary);
      font-weight: 600;
    }
    table tr:last-child td {
      border-bottom: none;
    }
    .muted { color: var(--text-muted); font-size: 0.9rem; }
    a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
    }
    a:hover { text-decoration: underline; }
    .doc-section {
      margin-bottom: 24px;
      padding: 16px;
      background: var(--card-bg);
      border: 1px solid var(--border);
    }
    .doc-section + .doc-section { margin-top: 16px; }
    .doc-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--accent);
      color: var(--primary);
      padding: 2px 10px;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-bottom: 8px;
    }
  </style>
</head>
<body>
  <div class="doc-shell">
  <!-- LLM_SECTION_ORIGIN: summary=llm, prerequisites=llm, inputs=llm, flowSteps=llm, interactions=llm, dataContracts=llm, businessRulesPolicy=llm, scenarios=llm, testDescription=llm, implementationNotes=llm, relatedItems=llm, technicalDependencies=fallback -->
    
    <section class="doc-section">
      <span class="doc-badge">Epic</span>
      <h1>Approve Application</h1>
      <p class="muted">userTask i mortgage mellan Processstart → Nästa steg.</p>
      <ul>
        <li><strong>BPMN-element:</strong> Task_Approve (userTask)</li>
        <li><strong>Kreditprocess-steg:</strong> mortgage</li>
        <li><strong>Swimlane/ägare:</strong> Kund / Rådgivare</li>
        <li><strong>Version &amp; datum:</strong> 1.0 (exempel) – uppdateras vid ändring</li>
        <li><strong>Ansvarig:</strong> Produktteam Kredit / Arkitektur</li>
      </ul>
    </section>

    <section class="doc-section">
      <h2>Syfte &amp; Effekt</h2>
      <p>Epiken 'Approve Application' syftar till att möjliggöra en effektiv och korrekt godkännandeprocess för bolåneansökningar. Den spelar en central roll i kreditprocessen genom att säkerställa att alla nödvändiga kontroller och bedömningar är genomförda innan ett slutgiltigt beslut fattas. Detta är en User Task där handläggaren granskar och godkänner ansökningar baserat på systemets rekommendationer.</p>
    </section>

    <section class="doc-section">
      <h2>Inputs</h2>
      
      <table>
        <tr>
          <th>Input</th>
          <th>Källa</th>
          <th>Format</th>
          <th>Validering</th>
        </tr>
        
        <tr>
          <td>Input: sammanfattad ansökningsdata från föregående steg.</td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>Input: resultat från kreditvärdighetsbedömning.</td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>Input: interna riskflaggor och engagemangsdata.</td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>Input: dokumentation från kunder och eventuella kompletteringar.</td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </table>
    </section>

    <section class="doc-section">
      <h2>Funktionellt flöde</h2>
      <ol>
        <li>Användaren öppnar vyn för att granska ansökningsdetaljer.</li><li>Systemet visar sammanfattad information och rekommendationer.</li><li>Användaren granskar och gör eventuella justeringar i bedömningen.</li><li>Systemet registrerar beslutet och uppdaterar ansökningsstatusen.</li><li>Användaren bekräftar godkännandet och skickar vidare till nästa steg.</li>
      </ol>
    </section>

    <section class="doc-section">
      <h2>Output</h2>
      <ul><li>Input: ansökningssystem – sammanfattad ansökningsdata.</li><li>Output: beslutsmotor – godkännandestatus och eventuella kommentarer.</li><li>Input: kreditvärderingssystem – riskbedömning och rekommendationer.</li><li>Output: kundsystem – uppdaterad status och beslut.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Affärsregler som triggas</h2>
      <ul><li>Epiken använder sig av affärsregler för kreditvärdighetsbedömning.</li><li>Policyer för belåningsgrad och skuldsättning måste följas strikt.</li><li>AML/KYC-regler måste vara uppfyllda innan godkännande.</li><li>Beslut ska dokumenteras i enlighet med interna och externa regelverk.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Affärs-scenarion (tabell)</h2>
      <p class="muted">Scenarierna nedan är affärsnära och ska mappas till automatiska tester.</p>
      <table>
        <tr>
          <th>Scenario-ID</th>
          <th>Scenario</th>
          <th>Typ</th>
          <th>Förväntat utfall</th>
          <th>Automatiskt test</th>
        </tr>
        
        <tr>
          <td>EPIC-S1</td>
          <td>Happy path</td>
          <td>Happy</td>
          <td>Ansökan godkänns och skickas vidare för utbetalning.</td>
          <td><code>tests/mortgage.smoke.spec.ts</code></td>
        </tr>
        <tr>
          <td>EPIC-S2</td>
          <td>Edge case</td>
          <td>Edge</td>
          <td>Ansökan godkänns med noteringar för framtida uppföljning.</td>
          <td><code>tests/mortgage.smoke.spec.ts</code></td>
        </tr>
        <tr>
          <td>EPIC-S3</td>
          <td>Error case</td>
          <td>Error</td>
          <td>Ansökan skickas tillbaka för komplettering eller avslås.</td>
          <td><code>tests/mortgage.smoke.spec.ts</code></td>
        </tr>
      </table>
    </section>

    <section class="doc-section">
      <h2>Koppling till automatiska tester</h2>
      <p>
        Scenarierna ska mappas till automatiska tester för att säkerställa korrekt funktionalitet. Scenario-ID och namn bör återanvändas i testfall och rapportering.
        <br />Testfil: <code>tests/mortgage.smoke.spec.ts</code>
      </p>
    </section>

    <section class="doc-section">
      <h2>Implementation Notes</h2>
      <ul><li>Använd API-endpoints för att hämta och uppdatera ansökningsdata.</li><li>Loggning och audit ska implementeras för alla beslut och ändringar.</li><li>Beroenden inkluderar kreditmotor och kunddata för korrekt bedömning.</li><li>Prestandaoptimering kan behövas för att hantera stora datamängder.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Tekniska &amp; externa beroenden</h2>
      <ul><li>Beroende tjänster och API:er som epiken anropar eller är beroende av.</li><li>Datakällor (tabeller, domäner och register) som epiken läser eller uppdaterar.</li><li>Externa system eller tredjepartstjänster som påverkar epikens flöde och tillgänglighet.</li><li>Påverkade komponenter i backend, frontend och integrationslager som behöver samspela.</li><li>Tekniska risker och känsliga beroenden som kräver särskild övervakning eller fallback-hantering.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Relaterade steg &amp; artefakter</h2>
      <ul><li>Föregående steg: Insamling och validering av ansökningsdata.</li><li>Relaterad Feature Goal: Effektivisering av kreditbeslutsprocessen.</li><li>Relaterad subprocess: Riskbedömning och flaggning.</li><li>Dokumentation: Affärsregler och policyer för kreditbeslut.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Definition of Ready</h2>
      <ul><li>Syfte, effektmål och förväntat affärsvärde för epiken är beskrivet och förankrat.</li><li>Upstream- och downstream-noder, beroenden och grundläggande affärsregler är identifierade.</li><li>Indata, gränssnitt och eventuella externa beroenden är kända och övergripande dokumenterade.</li><li>Affärs-scenarion och testkriterier är definierade på en nivå som möjliggör planering av automatiska tester.</li><li>Acceptanskriterier och icke‑funktionella krav (prestanda, robusthet, spårbarhet) är övergripande klarlagda.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Definition of Done</h2>
      <ul><li>Epiken levererar den avtalade effekten och stöder definierade affärsflöden utan kritiska gap.</li><li>Alla in- och utdataflöden fungerar, är testade och dokumenterade med spårbarhet mot beroende noder.</li><li>Affärsregler som triggas av epiken är implementerade, testade och dokumenterade.</li><li>Automatiska tester täcker huvudflöde, relevanta edge-cases och felhantering.</li><li>Monitorering/loggning är på plats och dokumentation är uppdaterad för berörda team.</li></ul>
    </section>
  
  </div>
</body>
</html>