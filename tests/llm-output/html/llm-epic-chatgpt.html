<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Approve Application</title>
  <style>
    :root {
      color-scheme: light;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --card-bg: #ffffff;
      --primary: #1d4ed8;
      --text-strong: #0f172a;
      --text-muted: #475569;
      --border: #e2e8f0;
      --accent: #dbeafe;
    }
    body {
      margin: 0;
      padding: 16px;
      background: #ffffff;
      color: var(--text-strong);
      line-height: 1.7;
    }
    .doc-shell {
      max-width: 960px;
      margin: 0 auto;
    }
    h1 {
      font-size: 1.5rem;
      margin: 0 0 24px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 8px;
    }
    h2 {
      color: var(--primary);
      margin: 24px 0 12px;
      font-size: 1.1rem;
    }
    p { margin: 0 0 12px; }
    ul { padding-left: 20px; margin: 0 0 12px; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 12px 0;
      background: var(--card-bg);
      border: 1px solid var(--border);
    }
    table th,
    table td {
      border-bottom: 1px solid var(--border);
      padding: 8px;
      text-align: left;
    }
    table th {
      background: var(--accent);
      color: var(--primary);
      font-weight: 600;
    }
    table tr:last-child td {
      border-bottom: none;
    }
    .muted { color: var(--text-muted); font-size: 0.9rem; }
    a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
    }
    a:hover { text-decoration: underline; }
    .doc-section {
      margin-bottom: 24px;
      padding: 16px;
      background: var(--card-bg);
      border: 1px solid var(--border);
    }
    .doc-section + .doc-section { margin-top: 16px; }
    .doc-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--accent);
      color: var(--primary);
      padding: 2px 10px;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-bottom: 8px;
    }
    .llm-fallback-banner {
      padding: 8px 12px;
      margin-bottom: 16px;
      border-radius: 6px;
      background-color: #fefce8;
      color: #854d0e;
      border: 1px solid #fef9c3;
      font-size: 0.85rem;
    }
    .llm-fallback-badge {
      display: inline-block;
      padding: 4px 8px;
      margin-bottom: 12px;
      border-radius: 4px;
      background-color: #fff3cd;
      color: #856404;
      border: 1px solid #ffeeba;
      font-size: 0.9rem;
      font-weight: 600;
    }
    .llm-fallback-details {
      font-size: 0.8rem;
      color: #4b5563;
      margin-bottom: 16px;
      white-space: pre-wrap;
    }
    .llm-fallback-local-note {
      font-size: 0.8rem;
      color: #2563eb;
      margin-bottom: 16px;
    }
  </style>
</head>
<body>
  <div class="doc-shell">
  <!-- LLM_SECTION_ORIGIN: summary=llm, prerequisites=llm, inputs=llm, flowSteps=llm, interactions=llm, dataContracts=llm, businessRulesPolicy=llm, scenarios=llm, testDescription=llm, implementationNotes=llm, relatedItems=llm, technicalDependencies=fallback -->
    
    
    
    <section class="doc-section">
      <span class="doc-badge">Epic</span>
      <h1>Approve Application</h1>
      <p class="muted">userTask i mortgage mellan Processstart → Nästa steg.</p>
      <ul>
        <li><strong>BPMN-element:</strong> Task_Approve (userTask)</li>
        <li><strong>Kreditprocess-steg:</strong> mortgage</li>
        <li><strong>Swimlane/ägare:</strong> Kund / Rådgivare</li>
        <li><strong>Version &amp; datum:</strong> 1.0 (exempel) – uppdateras vid ändring</li>
        <li><strong>Ansvarig:</strong> Produktteam Kredit / Arkitektur</li>
      </ul>
    </section>

    <section class="doc-section" data-source-summary="llm">
      <h2>Syfte &amp; Effekt</h2>
      <p>Epiken 'Approve Application' hanterar godkännandet av låneansökningar, vilket är en kritisk del av kreditprocessen. Den säkerställer att alla nödvändiga kontroller och bedömningar är genomförda innan ett slutgiltigt beslut fattas. Epiken fungerar som en User Task där handläggaren spelar en central roll i beslutsfattandet.</p>
    </section>

    <section class="doc-section" data-source-inputs="llm">
      <h2>Inputs</h2>
      
      <table>
        <tr>
          <th>Input</th>
          <th>Källa</th>
          <th>Format</th>
          <th>Validering</th>
        </tr>
        
        <tr>
          <td>Fält: Ansöknings-ID; Datakälla: Intern databas; Typ: Sträng; Obligatoriskt: Ja; Validering: Kontrollera format; Felhantering: Avvisa ansökan vid fel.</td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>Fält: Kreditvärderingspoäng; Datakälla: Extern kreditbyrå; Typ: Numeriskt; Obligatoriskt: Ja; Validering: Poäng över 600 (exempelvärde); Felhantering: Flagga för manuell granskning.</td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>Fält: Inkomstuppgifter; Datakälla: Kundens arbetsgivare; Typ: Numeriskt; Obligatoriskt: Ja; Validering: Kontrollera mot deklarerade uppgifter; Felhantering: Begär komplettering.</td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>Fält: Belåningsgrad; Datakälla: Intern kalkyl; Typ: Procent; Obligatoriskt: Ja; Validering: Under 85 % (exempelvärde); Felhantering: Avslag vid överträdelse.</td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </table>
    </section>

    <section class="doc-section" data-source-flow="llm">
      <h2>Funktionellt flöde</h2>
      <ol>
        <li>Handläggaren granskar alla inlämnade dokument och verifierar deras äkthet.</li><li>Systemet hämtar och presenterar kreditvärderingspoäng från extern kreditbyrå.</li><li>Handläggaren bedömer ansökan baserat på inkomstuppgifter och belåningsgrad.</li><li>Ett slutgiltigt beslut om godkännande eller avslag fattas och dokumenteras i systemet.</li>
      </ol>
    </section>

    <section class="doc-section" data-source-outputs="llm">
      <h2>Output</h2>
      <ul><li>Systemet tar emot kreditvärderingspoäng som input och skickar vidare beslutsstatus som output.</li><li>Inkomstuppgifter används för att beräkna belåningsgrad och beslutsunderlag.</li><li>Beslutsstatus delas med interna rapporteringsverktyg för vidare analys.</li></ul>
    </section>

    <section class="doc-section" data-source-business-rules="llm">
      <h2>Affärsregler som triggas</h2>
      <ul><li>Epiken stödjer bankens kreditpolicy genom att säkerställa att alla ansökningar följer fastställda kreditgränser.</li><li>Belåningsgrad och skuldkvot kontrolleras mot bankens riskbedömningsregler.</li><li>AML/KYC-kontroller genomförs för att säkerställa efterlevnad av lagkrav.</li><li>Epiken säkerställer att alla beslut är dokumenterade och spårbara.</li></ul>
    </section>

    <section class="doc-section" data-source-scenarios="llm">
      <h2>Affärs-scenarion (tabell)</h2>
      <p class="muted">Scenarierna nedan är affärsnära och ska mappas till automatiska tester.</p>
      <table>
        <tr>
          <th>Scenario-ID</th>
          <th>Scenario</th>
          <th>Typ</th>
          <th>Förväntat utfall</th>
          <th>Automatiskt test</th>
        </tr>
        
        <tr>
          <td>EPIC-S1</td>
          <td>Standard Approval</td>
          <td>Happy</td>
          <td>Ansökan godkänns och kunden informeras automatiskt.</td>
          <td><code>tests/mortgage.smoke.spec.ts</code></td>
        </tr>
        <tr>
          <td>EPIC-S2</td>
          <td>Manual Override</td>
          <td>Edge</td>
          <td>Ansökan godkänns efter manuell granskning och dokumentation av beslutet.</td>
          <td><code>tests/mortgage.smoke.spec.ts</code></td>
        </tr>
        <tr>
          <td>EPIC-S3</td>
          <td>Application Rejection</td>
          <td>Error</td>
          <td>Ansökan avslås och kunden informeras om orsakerna till avslaget.</td>
          <td><code>tests/mortgage.smoke.spec.ts</code></td>
        </tr>
      </table>
    </section>

    <section class="doc-section" data-source-test-description="llm">
      <h2>Koppling till automatiska tester</h2>
      <p>
        Scenarierna mappas mot automatiska tester för att säkerställa korrekt funktionalitet. Scenario-ID och namn bör användas i testfall och rapportering.
        <br />Testfil: <code>tests/mortgage.smoke.spec.ts</code>
      </p>
    </section>

    <section class="doc-section" data-source-implementation-notes="llm">
      <h2>Implementation Notes</h2>
      <ul><li>Epiken använder interna tjänster för att hämta och validera kreditvärderingsdata.</li><li>Loggning och audit-spår är kritiska för att säkerställa fullständig spårbarhet av beslut.</li><li>Felhantering omfattar både systemfel och användarfel med tydliga återkopplingar.</li><li>Epiken måste uppfylla höga prestandakrav för att hantera stora volymer av ansökningar.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Tekniska &amp; externa beroenden</h2>
      <ul><li>Beroende tjänster och API:er som epiken anropar eller är beroende av.</li><li>Datakällor (tabeller, domäner och register) som epiken läser eller uppdaterar.</li><li>Externa system eller tredjepartstjänster som påverkar epikens flöde och tillgänglighet.</li><li>Påverkade komponenter i backend, frontend och integrationslager som behöver samspela.</li><li>Tekniska risker och känsliga beroenden som kräver särskild övervakning eller fallback-hantering.</li></ul>
    </section>

    <section class="doc-section" data-source-related-items="llm">
      <h2>Relaterade steg &amp; artefakter</h2>
      <ul><li>Feature Goal: Kreditvärdering och riskbedömning.</li><li>Epic: Dokumentinsamling och verifiering.</li><li>Business Rule: Kreditpolicy för belåningsgrad och skuldkvot.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Definition of Ready</h2>
      <ul><li>Syfte, effektmål och förväntat affärsvärde för epiken är beskrivet och förankrat.</li><li>Upstream- och downstream-noder, beroenden och grundläggande affärsregler är identifierade.</li><li>Indata, gränssnitt och eventuella externa beroenden är kända och övergripande dokumenterade.</li><li>Affärs-scenarion och testkriterier är definierade på en nivå som möjliggör planering av automatiska tester.</li><li>Acceptanskriterier och icke‑funktionella krav (prestanda, robusthet, spårbarhet) är övergripande klarlagda.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Definition of Done</h2>
      <ul><li>Epiken levererar den avtalade effekten och stöder definierade affärsflöden utan kritiska gap.</li><li>Alla in- och utdataflöden fungerar, är testade och dokumenterade med spårbarhet mot beroende noder.</li><li>Affärsregler som triggas av epiken är implementerade, testade och dokumenterade.</li><li>Automatiska tester täcker huvudflöde, relevanta edge-cases och felhantering.</li><li>Monitorering/loggning är på plats och dokumentation är uppdaterad för berörda team.</li></ul>
    </section>
  
  </div>
</body>
</html>