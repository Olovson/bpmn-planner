<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Eligibility Rule</title>
  <style>
    :root {
      color-scheme: light;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --card-bg: #ffffff;
      --primary: #1d4ed8;
      --text-strong: #0f172a;
      --text-muted: #475569;
      --border: #e2e8f0;
      --accent: #dbeafe;
    }
    body {
      margin: 0;
      padding: 16px;
      background: #ffffff;
      color: var(--text-strong);
      line-height: 1.7;
    }
    .doc-shell {
      max-width: 960px;
      margin: 0 auto;
    }
    h1 {
      font-size: 1.5rem;
      margin: 0 0 24px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 8px;
    }
    h2 {
      color: var(--primary);
      margin: 24px 0 12px;
      font-size: 1.1rem;
    }
    p { margin: 0 0 12px; }
    ul { padding-left: 20px; margin: 0 0 12px; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 12px 0;
      background: var(--card-bg);
      border: 1px solid var(--border);
    }
    table th,
    table td {
      border-bottom: 1px solid var(--border);
      padding: 8px;
      text-align: left;
    }
    table th {
      background: var(--accent);
      color: var(--primary);
      font-weight: 600;
    }
    table tr:last-child td {
      border-bottom: none;
    }
    .muted { color: var(--text-muted); font-size: 0.9rem; }
    a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
    }
    a:hover { text-decoration: underline; }
    .doc-section {
      margin-bottom: 24px;
      padding: 16px;
      background: var(--card-bg);
      border: 1px solid var(--border);
    }
    .doc-section + .doc-section { margin-top: 16px; }
    .doc-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--accent);
      color: var(--primary);
      padding: 2px 10px;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-bottom: 8px;
    }
  </style>
</head>
<body>
  <div class="doc-shell">
  <!-- LLM_SECTION_ORIGIN: summary=llm, inputs=llm, decisionLogic=llm, outputs=llm, businessRulesPolicy=llm, scenarios=llm, testDescription=llm, implementationNotes=llm, relatedItems=llm -->
    
    <section class="doc-section">
      <span class="doc-badge">Business Rule / DMN</span>
      <h1>Eligibility Rule</h1>
      <ul>
        <li><strong>Regel-ID:</strong> Rule_Eligibility</li>
        <li><strong>BPMN-element:</strong> Rule_Eligibility (businessRuleTask)</li>
        <li><strong>Version:</strong> 1.0 (exempel) – uppdateras vid ändring</li>
        <li><strong>Ägare:</strong> Risk &amp; Kreditpolicy</li>
        <li><strong>Kreditprocess-steg:</strong> mortgage</li>
      </ul>
    </section>

    <section class="doc-section">
      <h2>Sammanfattning &amp; scope</h2>
      <ul><li>Regeln för behörighet bedömer om en kund är berättigad till en viss produkt, såsom ett bolån. Den riktar sig främst till privatkunder som ansöker om nya lån och används under förhandsbedömningen. Regeln inkluderar inte företagskunder eller andra typer av krediter.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Förutsättningar &amp; kontext</h2>
      <ul><li>Fält: Ålder; Datakälla: Kundregister; Typ: Heltal; Obligatoriskt: Ja; Validering: 18-70 år; Felhantering: Avslag vid ogiltig ålder.</li><li>Fält: Inkomst; Datakälla: Inkomstregister; Typ: Decimal; Obligatoriskt: Ja; Validering: Positivt värde; Felhantering: Avslag vid ogiltig inkomst.</li><li>Fält: Kreditvärdighet; Datakälla: Extern kreditupplysning; Typ: Heltal; Obligatoriskt: Ja; Validering: 300-850; Felhantering: Avslag vid ogiltigt värde.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Inputs &amp; datakällor</h2>
      <ul><li>Fält: Ålder; Datakälla: Kundregister; Typ: Heltal; Obligatoriskt: Ja; Validering: 18-70 år; Felhantering: Avslag vid ogiltig ålder.</li><li>Fält: Inkomst; Datakälla: Inkomstregister; Typ: Decimal; Obligatoriskt: Ja; Validering: Positivt värde; Felhantering: Avslag vid ogiltig inkomst.</li><li>Fält: Kreditvärdighet; Datakälla: Extern kreditupplysning; Typ: Heltal; Obligatoriskt: Ja; Validering: 300-850; Felhantering: Avslag vid ogiltigt värde.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Beslutslogik (DMN / regler)</h2>
      <ul><li>Beslutslogiken baseras på en kombination av ålder, inkomst och kreditvärdighet.</li><li>Kunder under 18 eller över 70 år avvisas automatiskt.</li><li>Inkomster under en viss tröskel, exempelvis 200,000 kr per år, leder till avslag.</li><li>En kreditvärdighet under 600 leder till avslag.</li><li>Regeln implementeras i en DMN-tabell som används för att säkerställa konsekventa beslut.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Output &amp; effekter</h2>
      <ul><li>Outputtyp: Beslut; Typ: String; Effekt: APPROVE, REFER eller DECLINE; Loggning: Alla beslut loggas för revision.</li><li>Outputtyp: Flaggor; Typ: Boolean; Effekt: Indikerar hög riskprofil; Loggning: Flaggor loggas för vidare analys.</li><li>Outputtyp: Meddelande; Typ: String; Effekt: Informerar kund om beslut; Loggning: Kundkommunikation loggas.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Affärsregler &amp; policystöd</h2>
      <ul><li>Regeln stödjer interna principer för ansvarsfull utlåning.</li><li>Den säkerställer att kunder uppfyller minimikrav för kreditvärdighet.</li><li>Följer regulatoriska krav enligt konsumentkreditlagen.</li><li>Stödjer bankens policy för att minimera kreditförluster.</li><li>Regeln bidrar till att upprätthålla en hållbar kreditportfölj.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Nyckelscenarier / testkriterier (affärsnivå)</h2>
      <p class="muted">Nedan scenarier är affärsnära exempel och ska mappas mot automatiska tester.</p>
      <table>
        <tr>
          <th>Scenario-ID</th>
          <th>Scenario</th>
          <th>Input (kortfattat)</th>
          <th>Förväntat beslut/flagga</th>
          <th>Automatiskt test</th>
        </tr>
        
        <tr>
          <td>BR1</td>
          <td>Standardkund</td>
          <td>Kund är 35 år, har en inkomst på 400,000 kr och en kreditvärdighet på 750.</td>
          <td>APPROVE</td>
          <td><code>tests/mortgage.smoke.spec.ts</code></td>
        </tr>
        <tr>
          <td>BR2</td>
          <td>Ung kund</td>
          <td>Kund är 17 år, har en inkomst på 300,000 kr och en kreditvärdighet på 700.</td>
          <td>DECLINE</td>
          <td><code>tests/mortgage.smoke.spec.ts</code></td>
        </tr>
        <tr>
          <td>BR3</td>
          <td>Låg inkomst</td>
          <td>Kund är 40 år, har en inkomst på 150,000 kr och en kreditvärdighet på 650.</td>
          <td>DECLINE</td>
          <td><code>tests/mortgage.smoke.spec.ts</code></td>
        </tr>
      </table>
    </section>

    <section class="doc-section">
      <h2>Implementation &amp; integrationsnoter</h2>
      <ul><li>Regeln implementeras i en DMN-tabell för att säkerställa flexibilitet och skalbarhet.</li><li>Exponeras via en intern beslutstjänst/API för realtidsbedömningar.</li><li>Kritiska beroenden inkluderar kunddataregister och externa kreditupplysningar.</li><li>Prestandaoptimering är viktig för att hantera stora volymer ansökningar.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Relaterade regler &amp; subprocesser</h2>
      <ul><li>Relaterad regel: Kreditvärdighetsbedömning.</li><li>Subprocess: Förhandsbedömning av kreditansökan.</li><li>Dokumentation: Intern kreditpolicy för bolån.</li><li>Övergripande process: Huvudbeslut för kreditansökan.</li></ul>
    </section>
  
  </div>
</body>
</html>