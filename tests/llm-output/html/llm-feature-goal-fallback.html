<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Internal data gathering</title>
  <style>
    :root {
      color-scheme: light;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --card-bg: #ffffff;
      --primary: #1d4ed8;
      --text-strong: #0f172a;
      --text-muted: #475569;
      --border: #e2e8f0;
      --accent: #dbeafe;
    }
    body {
      margin: 0;
      padding: 16px;
      background: #ffffff;
      color: var(--text-strong);
      line-height: 1.7;
    }
    .doc-shell {
      max-width: 960px;
      margin: 0 auto;
    }
    h1 {
      font-size: 1.5rem;
      margin: 0 0 24px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 8px;
    }
    h2 {
      color: var(--primary);
      margin: 24px 0 12px;
      font-size: 1.1rem;
    }
    p { margin: 0 0 12px; }
    ul { padding-left: 20px; margin: 0 0 12px; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 12px 0;
      background: var(--card-bg);
      border: 1px solid var(--border);
    }
    table th,
    table td {
      border-bottom: 1px solid var(--border);
      padding: 8px;
      text-align: left;
    }
    table th {
      background: var(--accent);
      color: var(--primary);
      font-weight: 600;
    }
    table tr:last-child td {
      border-bottom: none;
    }
    .muted { color: var(--text-muted); font-size: 0.9rem; }
    a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
    }
    a:hover { text-decoration: underline; }
    .doc-section {
      margin-bottom: 24px;
      padding: 16px;
      background: var(--card-bg);
      border: 1px solid var(--border);
    }
    .doc-section + .doc-section { margin-top: 16px; }
    .doc-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--accent);
      color: var(--primary);
      padding: 2px 10px;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-bottom: 8px;
    }
    .llm-fallback-banner {
      padding: 8px 12px;
      margin-bottom: 16px;
      border-radius: 6px;
      background-color: #fefce8;
      color: #854d0e;
      border: 1px solid #fef9c3;
      font-size: 0.85rem;
    }
    .llm-fallback-badge {
      display: inline-block;
      padding: 4px 8px;
      margin-bottom: 12px;
      border-radius: 4px;
      background-color: #fff3cd;
      color: #856404;
      border: 1px solid #ffeeba;
      font-size: 0.9rem;
      font-weight: 600;
    }
    .llm-fallback-details {
      font-size: 0.8rem;
      color: #4b5563;
      margin-bottom: 16px;
      white-space: pre-wrap;
    }
    .llm-fallback-local-note {
      font-size: 0.8rem;
      color: #2563eb;
      margin-bottom: 16px;
    }
  </style>
</head>
<body>
  <div class="doc-shell">
    
    
    
    <section class="doc-section">
      <span class="doc-badge">Feature Goal</span>
      <h1>Internal data gathering</h1>
      <ul>
        <li><strong>Initiativ:</strong> mortgage-se-application</li>
        <li><strong>BPMN Call Activity:</strong> internal-data-gathering (Internal data gathering)</li>
        <li><strong>Regel/affärsägare:</strong> Produktägare Kredit / Risk & Policy</li>
        <li><strong>Kreditprocess-steg:</strong> mortgage-se-application</li>
        <li><strong>Version / datum:</strong> 1.0 (LLM-validerad) – uppdateras vid ändring</li>
      </ul>
    </section>

    <section class="doc-section">
      <h2>Sammanfattning &amp; scope</h2>
      <p>Detta Feature Goal samlar flera epics till ett sammanhängande steg i bolåneresan där kundens behov, riskprofil och underlag hanteras på ett strukturerat sätt. Målet är att skapa en tydlig brygga mellan föregående processsteg och efterföljande beslut, med fokus på spårbarhet och konsekvent tillämpning av regler.</p>
      
      <h3>Ingår</h3>
      <ul>
        <li>hantering av de epics som är direkt kopplade till detta steg i bolåneprocessen.</li><li>insamling och konsolidering av de uppgifter som krävs för att kunna fatta nästa kreditbeslut.</li><li>tillämpning av relevanta affärsregler och policys på den information som samlas in här.</li>
      </ul>
      
      <h3>Ingår inte</h3>
      <ul>
        <li>generella eftermarknadsprocesser och kundåtgärder utanför det aktuella bolåneärendet.</li><li>detaljerad produktutveckling eller prissättningsstrategi, som hanteras i andra fora.</li>
      </ul>
    </section>

    <section class="doc-section">
      <h2>Effektmål</h2>
      <ul><li>Minska manuellt arbete genom ökad grad av automatisering i det aktuella steget av bolåneflödet.</li><li>Förbättra kvaliteten i beslutsunderlaget genom att samla data och regler på ett enhetligt sätt.</li><li>Skapa en mer förutsägbar kundupplevelse genom tydliga besked och färre omtag.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Ingående Epics</h2>
      
      <table>
        <tr>
          <th>Epic-ID</th>
          <th>Epic-namn</th>
          <th>Beskrivning</th>
          <th>Team</th>
        </tr>
        
        <tr>
          <td>E1</td>
          <td>Förberedelse av underlag</td>
          <td>Samlar in och kvalitetssäkrar de uppgifter som behövs för det aktuella Feature Goalet.</td>
          <td>Kredit och produktteam</td>
        </tr>
        <tr>
          <td>E2</td>
          <td>Affärsregler och validering</td>
          <td>Tillämpning av centrala affärsregler och kontroller på insamlade data.</td>
          <td>Risk & Policy</td>
        </tr>
      </table>
    </section>

    <section class="doc-section">
      <h2>Affärsflöde</h2>
      <ol>
        <li>Kund- och ansökningsdata samlas in och förbereds för vidare bearbetning.</li><li>Relevanta affärsregler och kontroller tillämpas för att identifiera avvikelser eller kompletteringsbehov.</li><li>Resultat och status samlas i en gemensam struktur som kan återanvändas i efterföljande beslutssteg.</li>
      </ol>
    </section>

    <section class="doc-section">
      <h2>Affärs-scenarion</h2>
      <table>
        <tr>
          <th>Scenario</th>
          <th>Beskrivning</th>
          <th>Typ (Happy/Edge/Error)</th>
          <th>Förväntat resultat</th>
        </tr>
        
        <tr>
          <td>FG-S1</td>
          <td>Normalflöde med komplett data</td>
          <td>Happy</td>
          <td>Feature Goalet kan slutföras utan avvikelser och levererar ett komplett underlag till nästa steg.</td>
        </tr>
        <tr>
          <td>FG-S2</td>
          <td>Delvis ofullständig data</td>
          <td>Edge</td>
          <td>Feature Goalet identifierar vilka uppgifter som saknas och flaggar ärendet för komplettering.</td>
        </tr>
        <tr>
          <td>FG-S3</td>
          <td>Kritisk avvikelse eller tekniskt fel</td>
          <td>Error</td>
          <td>Feature Goalet kan inte slutföras, ärendet stoppas och skickas till manuell hantering med tydlig orsak.</td>
        </tr>
      </table>
    </section>

    <section class="doc-section">
      <h2>Koppling till automatiska tester</h2>
      <p>
        Scenarierna FG-S1–FG-S3 ska mappas mot automatiska tester där scenario-ID och namn återanvänds i testfall. Testerna ska säkerställa att normalflöde, kompletteringsfall och kritiska avvikelser hanteras enligt beskrivningen.
        <br />Testfil: <code>tests/mortgage.smoke.spec.ts</code>
        <br />
        Testblock och scenarionamngivning bör återspegla affärs-scenariernas ID och namn.
      </p>
    </section>

    <section class="doc-section">
      <h2>Implementation Notes (för dev)</h2>
      <ul><li>Feature Goalet bör implementeras så att det är återanvändbart för flera relaterade processer.</li><li>Loggning ska ge spårbarhet från inkommande underlag till de beslut och flaggor som sätts.</li><li>Felhantering ska tydligt skilja på affärsmässiga avvikelser och tekniska problem i underliggande system.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Tekniska &amp; externa beroenden</h2>
      <ul><li>Regelmotor(er) och beslutsmotorer kopplade till Feature Goalet.</li><li>Datakällor (interna register, databaser och domäntjänster) som används i flödet.</li><li>Externa API:er och tjänster som tillhandahåller kredit-, person- eller objektsdata.</li><li>Integrationer och integrationslager som hanterar kommunikation mot interna/externa system.</li><li>Påverkade interna system, moduler och komponenter som behöver anpassas eller övervakas.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Relaterade regler / subprocesser</h2>
      <ul><li>Relaterade Feature Goals som ligger före eller efter detta steg i bolåneresan.</li><li>Epics och Business Rules som tillsammans beskriver den logik och de flöden som Feature Goalet omfattar.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Definition of Ready</h2>
      <ul><li>Syfte, målgrupper och affärsvärde för Feature Goalet är dokumenterat och förankrat.</li><li>Ingående epics och beroende huvudflöden är identifierade och övergripande beskrivna.</li><li>Centrala beroenden (regelmotor, datakällor, externa tjänster) är identifierade och ägarskap är tydliggjort.</li><li>Övergripande affärsscenarier och risk-/policykrav är kända och dokumenterade.</li><li>Tekniska förutsättningar (plattform, integrationer, miljöer) är klarlagda på en övergripande nivå.</li></ul>
    </section>

    <section class="doc-section">
      <h2>Definition of Done</h2>
      <ul><li>Feature Goalet stödjer de definierade affärsscenarierna och uppfyller beskrivna policys och regler.</li><li>Alla epics som ingår är implementerade, testade och dokumenterade med spårbarhet mot detta Feature Goal.</li><li>Automatiska tester täcker centrala flöden, felhantering och definierade risk-/policykrav.</li><li>Loggning och mätpunkter finns på plats för uppföljning, insikter och incidenthantering.</li><li>Dokumentation (Feature Goal, epics, regler) är uppdaterad och tillgänglig för berörda team.</li></ul>
    </section>
  
  </div>
</body>
</html>