// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`documentation rendering regression (legacy vs schema) > Business Rule legacy HTML matches snapshot and equals schema HTML (normalized) > business-rule-legacy 1`] = `"<div class="doc-shell"> <section class="doc-section"> <span class="doc-badge">Business Rule / DMN</span> <h1>Eligibility Rule</h1> <ul> <li><strong>Regel-ID:</strong> Rule_Eligibility</li> <li><strong>BPMN-element:</strong> Rule_Eligibility (businessRuleTask)</li> <li><strong>Kreditprocess-steg:</strong> mortgage</li> </ul> </section> <section class="doc-section" data-source-summary="llm"> <h2>Sammanfattning &amp; scope</h2> <p>Eligibility Rule kombinerar flera risk- och kreditparametrar för att avgöra om en ansökan kan godkännas, ska skickas till manuell granskning eller avslås. Regeln säkerställer konsekvent tillämpning av kreditpolicy och riskmandat för målgrupperna.</p> </section> <section class="doc-section" data-source-inputs="llm"> <h2>Inputs &amp; datakällor</h2> <table> <tr> <th>Fält</th> <th>Datakälla</th> <th>Typ / format</th> <th>Obligatoriskt</th> <th>Validering</th> <th>Felhantering</th> </tr> <tr> <td>riskScore</td> <td>Kreditmotor / UC</td> <td>Tal (0–1000)</td> <td>Ja</td> <td>Inom definierat intervall</td> <td>Avslå eller skicka till manuell granskning</td> </tr> <tr> <td>debtToIncomeRatio</td> <td>Intern beräkning</td> <td>Decimal</td> <td>Ja</td> <td>>= 0</td> <td>Flagga för manuell granskning vid saknade data</td> </tr> <tr> <td>loanToValue</td> <td>Fastighetsvärdering</td> <td>Procent</td> <td>Ja</td> <td>0–100 %</td> <td>Avslå vid orimliga värden</td> </tr> </table> </section> <section class="doc-section" data-source-decision-logic="llm"> <h2>Beslutslogik (DMN / regler)</h2> <ul><li>Hög riskScore och måttlig skuldsättning ger normalt auto-approve.</li><li>Mellanrisk eller ofullständig data leder till manuell granskning.</li><li>Tydliga exklusionskriterier (t.ex. betalningsanmärkningar eller sanktionsflaggor) ger auto-decline.</li></ul> </section> <section class="doc-section" data-source-outputs="llm"> <h2>Output &amp; effekter</h2> <table> <tr> <th>Outputtyp</th> <th>Typ</th> <th>Effekt</th> <th>Loggning</th> </tr> <tr> <td>Beslut</td> <td>APPROVE, REFER (manuell granskning) eller DECLINE</td> <td>Processpåverkan: fortsätter till Final Decision vid APPROVE, pausas i manuell kö vid REFER, avslutas vid DECLINE</td> <td></td> </tr> <tr> <td>Flaggor</td> <td>t.ex. hög skuldsättning, bristfällig dokumentation, sanktions-/fraudträff</td> <td>Används för vidare analys och beslutsfattande</td> <td></td> </tr> <tr> <td>Loggning</td> <td>beslut, huvudparametrar och regelversion</td> <td>Loggas för audit och spårbarhet</td> <td></td> </tr> </table> </section> <section class="doc-section" data-source-business-rules="llm"> <h2>Affärsregler &amp; policystöd</h2> <ul><li>Stödjer intern kreditpolicy och mandat för respektive produkt och segment.</li><li>Bygger på dokumenterade riskramverk och beslutsmodeller.</li><li>Tar hänsyn till regulatoriska krav (t.ex. konsumentkreditlag, AML/KYC) på en övergripande nivå.</li></ul> </section> <section class="doc-section" data-source-related-items="llm"> <h2>Relaterade regler &amp; subprocesser</h2> <ul><li>Relaterad DMN-modell: <a href="/dmn/example.dmn">example.dmn</a></li><li>Relaterad BPMN-subprocess: <a href="#/bpmn/mortgage.bpmn">Visa i BPMN viewer</a></li><li>Överordnad nod: <a href="#/doc-viewer/nodes%2Fmortgage%2FTask_Scoring">Run Scoring</a></li><li>Relaterad DMN-modell: <a href="/dmn/example.dmn">example.dmn</a></li><li>Relaterad BPMN-subprocess: <a href="#/bpmn/mortgage.bpmn">Visa i BPMN viewer</a></li><li>Överordnad nod: <a href="#/doc-viewer/nodes%2Fmortgage%2FTask_Scoring">Run Scoring</a></li></ul> </section> </div>"`;

exports[`documentation rendering regression (legacy vs schema) > Epic legacy HTML matches snapshot and equals schema HTML (normalized) > epic-legacy 1`] = `"<div class="doc-shell"> <section class="doc-section"> <span class="doc-badge">Epic</span> <h1>Approve Application</h1> <p class="muted">userTask i mortgage mellan Previous Step → Next Step.</p> <ul> <li><strong>BPMN-element:</strong> Task_Approve (userTask)</li> <li><strong>Kreditprocess-steg:</strong> mortgage</li> </ul> </section> <section class="doc-section" data-source-summary="llm"> <h2>Sammanfattning</h2> <p>Approve Application är ett delsteg i kreditflödet som säkerställer att rätt data, regler och interaktioner hanteras innan processen går vidare. Epiken bidrar till en spårbar och begriplig kreditprocess för både kund och interna användare.</p> </section> <section class="doc-section" data-source-flow="llm"> <h2>Funktionellt flöde</h2> <ol> <li>Användaren öppnar vyn och ser sammanfattad ansöknings- och kundinformation.</li><li>Formulär eller val presenteras baserat på föregående steg och riskprofil.</li><li>Användaren fyller i eller bekräftar uppgifter och skickar vidare.</li><li>Systemet validerar indata och uppdaterar processens status samt triggar nästa steg.</li> </ol> </section> <section class="doc-section" data-source-dependencies="llm"> <h2>Beroenden</h2> <ul><li>Beroende: Process; Id: previous-step; Beskrivning: Föregående steg måste vara slutfört.</li></ul> </section> <section class="doc-section" data-source-user-stories="llm"> <h2>User Stories</h2> <p class="muted">User stories med acceptanskriterier som ska mappas till automatiska tester.</p> <div class="user-story" style="margin-bottom: 2rem; padding: 1rem; border-left: 3px solid #3b82f6; background: #f8fafc;"> <h3 style="margin-top: 0; margin-bottom: 0.5rem;"> <strong>US-1:</strong> Som <strong>Handläggare</strong> vill jag <strong>godkänna ansökan</strong> så att <strong>kunna fatta välgrundade beslut snabbt</strong> </h3> <div style="margin-top: 1rem;"> <p style="margin-bottom: 0.5rem; font-weight: 600;">Acceptanskriterier:</p> <ul style="margin-top: 0;"> <li>Systemet ska visa all relevant information för beslutet</li><li>Systemet ska logga beslutet för spårbarhet</li> </ul> </div> <p style="margin-top: 0.5rem; font-size: 0.875rem; color: #64748b;">Testfil: <code>tests/mortgage.example.spec.ts</code></p> </div> <div class="user-story" style="margin-bottom: 2rem; padding: 1rem; border-left: 3px solid #3b82f6; background: #f8fafc;"> <h3 style="margin-top: 0; margin-bottom: 0.5rem;"> <strong>US-2:</strong> Som <strong>Kund</strong> vill jag <strong>få besked om min ansökan</strong> så att <strong>kunna planera min ekonomi</strong> </h3> <div style="margin-top: 1rem;"> <p style="margin-bottom: 0.5rem; font-weight: 600;">Acceptanskriterier:</p> <ul style="margin-top: 0;"> <li>Systemet ska meddela kunden om beslutet</li><li>Systemet ska förklara nästa steg</li> </ul> </div> <p style="margin-top: 0.5rem; font-size: 0.875rem; color: #64748b;">Testfil: <code>tests/mortgage.example.spec.ts</code></p> </div> <div class="user-story" style="margin-bottom: 2rem; padding: 1rem; border-left: 3px solid #3b82f6; background: #f8fafc;"> <h3 style="margin-top: 0; margin-bottom: 0.5rem;"> <strong>US-3:</strong> Som <strong>Processägare</strong> vill jag <strong>säkerställa konsekvent beslutsfattande</strong> så att <strong>följa bankens policy och regler</strong> </h3> <div style="margin-top: 1rem;"> <p style="margin-bottom: 0.5rem; font-weight: 600;">Acceptanskriterier:</p> <ul style="margin-top: 0;"> <li>Systemet ska följa definierade regler och policy</li><li>Systemet ska logga alla beslut för granskning</li> </ul> </div> <p style="margin-top: 0.5rem; font-size: 0.875rem; color: #64748b;">Testfil: <code>tests/mortgage.example.spec.ts</code></p> </div> </section> </div>"`;

exports[`documentation rendering regression (legacy vs schema) > Feature Goal legacy HTML matches snapshot and equals schema HTML (normalized) > feature-goal-legacy 1`] = `"<div class="doc-shell"> <section class="doc-section"> <span class="doc-badge">Feature Goal</span> <h1>Application Assessment</h1> <p class="muted">callActivity i mortgage mellan Start Application → Collect Applicant Data.</p> <ul> <li><strong>BPMN-element:</strong> Call_Feature (callActivity)</li> <li><strong>Kreditprocess-steg:</strong> mortgage</li> </ul> </section> <section class="doc-section" data-source-summary="llm"> <h2>Sammanfattning</h2> <p>Application Assessment samlar och koordinerar ett antal epics för att skapa ett sammanhängande kreditflöde med tydlig ansvarsfördelning och spårbarhet. Feature Goalet säkerställer att rätt data, regler och interaktioner finns på plats för att fatta välgrundade kreditbeslut.</p> </section> <section class="doc-section" data-source-included-tasks="context"> <h2>Ingående komponenter</h2> <p class="muted">Översikt över service tasks, user tasks, call activities och business rules som ingår i detta Feature Goal.</p> <div style="margin-bottom: 1.5rem;"> <h3 style="margin-bottom: 0.5rem; font-size: 1rem; font-weight: 600;">User Tasks (1)</h3> <ul style="margin-top: 0;"> <li><a href="#/doc-viewer/nodes%2Fmortgage%2FTask_Epic" style="color: #3b82f6; text-decoration: none;">Collect Applicant Data</a> <code style="font-size: 0.875rem; color: #64748b;">(Task_Epic)</code></li> </ul> </div> </section> <section class="doc-section" data-source-flow="llm"> <h2>Funktionellt flöde</h2> <ol> <li>Initiativet startar i Start Application när en kreditprocess initieras.</li><li>Application Assessment samlar in, koordinerar och kvalitetssäkrar data och beslut från ingående epics.</li><li>Regler och policystöd appliceras på ett konsekvent sätt för att möjliggöra välgrundade kreditbeslut.</li><li>Resultat och status förs vidare till Collect Applicant Data och vidare in i efterföljande processer.</li> </ol> </section> <section class="doc-section" data-source-dependencies="llm"> <h2>Beroenden</h2> <ul><li>Beroende: Process; Id: application-initiation; Beskrivning: Ansökan måste vara initierad innan processen kan starta.</li></ul> </section> <section class="doc-section" data-source-user-stories="llm"> <h2>User Stories</h2> <p class="muted">User stories med acceptanskriterier som ska mappas till automatiska tester.</p> <div class="user-story" style="margin-bottom: 2rem; padding: 1rem; border-left: 3px solid #3b82f6; background: #f8fafc;"> <h3 style="margin-top: 0; margin-bottom: 0.5rem;"> <strong>US-1:</strong> Som <strong>Kund</strong> vill jag <strong>skapa ansökan</strong> så att <strong>jag kan ansöka om lån</strong> </h3> <div style="margin-top: 1rem;"> <p style="margin-bottom: 0.5rem; font-weight: 600;">Acceptanskriterier:</p> <ul style="margin-top: 0;"> <li>Systemet ska validera att alla obligatoriska fält är ifyllda</li><li>Systemet ska visa tydliga felmeddelanden om fält saknas</li> </ul> </div> <p style="margin-top: 0.5rem; font-size: 0.875rem; color: #64748b;">Testfil: <code>tests/mortgage.example.spec.ts</code></p> </div> <div class="user-story" style="margin-bottom: 2rem; padding: 1rem; border-left: 3px solid #3b82f6; background: #f8fafc;"> <h3 style="margin-top: 0; margin-bottom: 0.5rem;"> <strong>US-2:</strong> Som <strong>Handläggare</strong> vill jag <strong>få komplett ansökningsdata</strong> så att <strong>spara tid genom att få all data på ett ställe</strong> </h3> <div style="margin-top: 1rem;"> <p style="margin-bottom: 0.5rem; font-weight: 600;">Acceptanskriterier:</p> <ul style="margin-top: 0;"> <li>Systemet ska samla data från alla relevanta källor</li><li>Systemet ska presentera data på ett strukturerat sätt</li> </ul> </div> <p style="margin-top: 0.5rem; font-size: 0.875rem; color: #64748b;">Testfil: <code>tests/mortgage.example.spec.ts</code></p> </div> </section> </div>"`;
